<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Null-hypothesis significance testing | Advanced Statistical Methods</title>
  <meta name="description" content="An introduction to Bayesian Statistics" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Null-hypothesis significance testing | Advanced Statistical Methods" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to Bayesian Statistics" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Null-hypothesis significance testing | Advanced Statistical Methods" />
  
  <meta name="twitter:description" content="An introduction to Bayesian Statistics" />
  

<meta name="author" content="Dr Lincoln Colling" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="criticisms-of-p-values.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Bayesian Stats</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html"><i class="fa fa-check"></i><b>1</b> Null-hypothesis significance testing</a>
<ul>
<li class="chapter" data-level="1.1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#probability"><i class="fa fa-check"></i><b>1.1</b> Probability</a></li>
<li class="chapter" data-level="1.2" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#probability-and-p-values"><i class="fa fa-check"></i><b>1.2</b> Probability and <em>p</em> values</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#understanding-the-p-through-simulation"><i class="fa fa-check"></i><b>1.2.1</b> Understanding the <em>p</em> through simulation</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#summary"><i class="fa fa-check"></i><b>1.3</b> Summary</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#a-short-note-on-confidence-intervals"><i class="fa fa-check"></i><b>1.3.1</b> A short note on confidence intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html"><i class="fa fa-check"></i><b>2</b> Criticisms of <em>p</em> values</a>
<ul>
<li class="chapter" data-level="2.1" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html#same-measurements-from-different-devices"><i class="fa fa-check"></i><b>2.1</b> Same measurements from different devices</a></li>
<li class="chapter" data-level="2.2" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html#the-universe-of-possible-events"><i class="fa fa-check"></i><b>2.2</b> The universe of possible events</a></li>
<li class="chapter" data-level="2.3" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html#summary-1"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html"><i class="fa fa-check"></i><b>3</b> An alternative to <em>p</em> values</a>
<ul>
<li class="chapter" data-level="3.1" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html#doing-inference-with-likelihoods"><i class="fa fa-check"></i><b>3.1</b> Doing inference with likelihoods</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html#a-brief-detour-back-to-sampling-rules"><i class="fa fa-check"></i><b>3.1.1</b> A brief detour back to sampling rules</a></li>
<li class="chapter" data-level="3.1.2" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html#the-likelihood-ratio"><i class="fa fa-check"></i><b>3.1.2</b> The likelihood ratio</a></li>
<li class="chapter" data-level="3.1.3" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html#a-note-about-likelihood-functions-and-probability-distributions"><i class="fa fa-check"></i><b>3.1.3</b> A note about likelihood functions and probability distributions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html#testing-more-complex-hypotheses"><i class="fa fa-check"></i><b>3.2</b> Testing more complex hypotheses</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="an-alternative-to-p-values.html"><a href="an-alternative-to-p-values.html#theres-more-than-one-way-to-average"><i class="fa fa-check"></i><b>3.2.1</b> There’s more than one way to average</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-bayes-factor.html"><a href="the-bayes-factor.html"><i class="fa fa-check"></i><b>4</b> The Bayes factor</a>
<ul>
<li class="chapter" data-level="4.1" data-path="the-bayes-factor.html"><a href="the-bayes-factor.html#computing-bayes-factors-with-bayesplay"><i class="fa fa-check"></i><b>4.1</b> Computing Bayes factors with <code>bayesplay</code></a></li>
<li class="chapter" data-level="4.2" data-path="the-bayes-factor.html"><a href="the-bayes-factor.html#computing-bayes-factors-with-bayesplay-web"><i class="fa fa-check"></i><b>4.2</b> Computing Bayes factors with Bayesplay-Web</a></li>
<li class="chapter" data-level="4.3" data-path="the-bayes-factor.html"><a href="the-bayes-factor.html#moving-beyond-coin-flips"><i class="fa fa-check"></i><b>4.3</b> Moving beyond coin flips</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="./">Lincoln Colling</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced Statistical Methods</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="null-hypothesis-significance-testing" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Null-hypothesis significance testing</h1>
<p><a href="data:text/x-markdown;base64,LS0tCnRpdGxlOiAiTnVsbCBoeXBvdGhlc2lzIHNpZ25pZmljYW5jZSB0ZXN0aW5nIgpvdXRwdXQ6IGh0bWxfZG9jdW1lbnQKLS0tCgpgYGB7ciBzZXR1cCwgZWNobz1GQUxTRX0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBGQUxTRSkKc3VwcHJlc3NNZXNzYWdlcyhleHByID0gIHsKICBpZiAoInBhdGNod29yayIgJWluJSByb3cubmFtZXMoaW5zdGFsbGVkLnBhY2thZ2VzKCkpID09IEZBTFNFKSB7CiAgICBpbnN0YWxsLnBhY2thZ2VzKCJwYXRjaHdvcmsiKQogIH0KICBpZiAoImJheWVzcGxheSIgJWluJSByb3cubmFtZXMoaW5zdGFsbGVkLnBhY2thZ2VzKCkpID09IEZBTFNFKSB7CiAgICBpbnN0YWxsLnBhY2thZ2VzKCJiYXllc3BsYXkiKQogIH0KICBpZiAoInBvbHNwbGluZSIgJWluJSByb3cubmFtZXMoaW5zdGFsbGVkLnBhY2thZ2VzKCkpID09IEZBTFNFKSB7CiAgICBpbnN0YWxsLnBhY2thZ2VzKCJwb2xzcGxpbmUiKQogIH0KCiAgaWYgKCJJUmRpc3BsYXkiICVpbiUgcm93Lm5hbWVzKGluc3RhbGxlZC5wYWNrYWdlcygpKSA9PSBUUlVFKSB7CiAgICBkaXNwbGF5X21hcmtkb3duIDw8LSBcKHgpIElSZGlzcGxheTo6ZGlzcGxheV9tYXJrZG93bihhcy5jaGFyYWN0ZXIoeCkpCiAgICBkaXNwbGF5X2h0bWwgPDwtIFwoeCkgSVJkaXNwbGF5OjpkaXNwbGF5X2h0bWwoYXMuY2hhcmFjdGVyKHgpKQogIH0gZWxzZSB7CiAgICBkaXNwbGF5X21hcmtkb3duIDw8LSBrbml0cjo6YXNpc19vdXRwdXQKICAgIGRpc3BsYXlfaHRtbCA8PC0ga25pdHI6OmFzaXNfb3V0cHV0CiAgfQoKICBsaWJyYXJ5KHRpZHl2ZXJzZSkKICBsaWJyYXJ5KHBvbHNwbGluZSkKICBsaWJyYXJ5KHBhdGNod29yaykKICBsaWJyYXJ5KG1hZ3JpdHRyKQogIGxpYnJhcnkoYmF5ZXNwbGF5KQp9KQoKdGFibGVfZm9ybWF0IDwtICJodG1sIgoKYGBgCiMgTnVsbC1oeXBvdGhlc2lzIHNpZ25pZmljYW5jZSB0ZXN0aW5nCgpCZWZvcmUgZGl2aW5nIGludG8gQmF5ZXNpYW4gaHlwb3RoZXNpcyB0ZXN0aW5nLCBpdCdzIHdvcnRoIHNwZW5kaW5nIGEgbGl0dGxlCnRpbWUgZ29pbmcgb3ZlciBGcmVxdWVudGlzdCBudWxsLWh5cG90aGVzaXMgc2lnbmlmaWNhbmNlIHRlc3RpbmcuIFRoZSByZWFzb24KZm9yIHRoaXMgaXMgdGhhdCBJIHdhbnQgaXQgdG8gYmUgY2xlYXIgdGhhdCBCYXllc2lhbiBtZXRob2RzIGFuZCBGcmVxdWVudGlzdAptZXRob2RzIGFyZW4ndCBqdXN0IHR3byBkaWZmZXJlbnQgd2F5cyBvZiBhbnN3ZXJpbmcgdGhlIHNhbWUgcXVlc3Rpb24uIFJhdGhlciwKSSB3YW50IGl0IHRvIGJlIGNsZWFyIHRoYXQgQmF5ZXNpYW4gbWV0aG9kcyBhbmQgRnJlcXVlbnRpc3QgbWV0aG9kcyBhcmUgYXNraW5nCioqZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgcXVlc3Rpb25zKiouIEZvciB0aGlzIHJlYXNvbiwgd2UnbGwgc3RhcnQgcmlnaHQgYmFjawphdCB0aGUgYmVnaW5uaW5nIHdpdGggKnAqIHZhbHVlcy4KClRoZSBBbWVyaWNhbiBTdGF0aXN0aWNhbCBBc3NvY2lhdGlvbiAoQVNBKSBkZWZpbmVzIGEgKnAqIHZhbHVlIGFzOgoKPiB0aGUgcHJvYmFiaWxpdHkgdW5kZXIgYSBzcGVjaWZpZWQgc3RhdGlzdGljYWwgbW9kZWwgdGhhdCBhIHN0YXRpc3RpY2FsCj4gc3VtbWFyeSBvZiB0aGUgZGF0YSAoZS5nLiwgdGhlIHNhbXBsZSBtZWFuIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gY29tcGFyZWQKPiBncm91cHMpIHdvdWxkIGJlIGVxdWFsIHRvIG9yIG1vcmUgZXh0cmVtZSB0aGFuIGl0cyBvYnNlcnZlZCB2YWx1ZQo+IChbV2Fzc2Vyc3RlaW4gYW5kIExhemFyIDIwMTZdKGh0dHBzOi8vZG9pLm9yZy8xMC4xMDgwLzAwMDMxMzA1LjIwMTYuMTE1NDEwOCkpCgpXaGlsZSB0aGlzIGlzIGEgcGVyZmVjdGx5IGFjY2VwdGFibGUgZGVmaW5pdGlvbiwgaXQgaXMgbWF5YmUgYSBsaXR0bGUgdHJpY2t5IHRvCnVuZGVyc3RhbmQuIFRoZSBtYWluIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0IHRoZSBkZWZpbml0aW9uIGNvbnRhaW5zIGF0IGxlYXN0Cm9uZSAqaWxsLWRlZmluZWQgY29uY2VwdCogKCJwcm9iYWJpbGl0eSIpIGFuZCBvbmUgdHJpY2t5IGNvbmNlcHQgKCJzcGVjaWZpZWQKc3RhdGlzdGljYWwgbW9kZWwiKS4gVG8gdW5kZXJzdGFuZCB3aGF0IGEgKnAqIHZhbHVlIHJlYWxseSBpcywgd2UncmUgZ29pbmcgdG8KaGF2ZSB0byB1bnBhY2sgYm90aCBvZiB0aGVzZSBpZGVhcy4gQWxvbmcgdGhlIHdheSwgd2UncmUgZ29pbmcgdG8gbGVhcm4gYWJvdXQKc29tZSBvdGhlciBjb25jZXB0cyB0aGF0IHdpbGwgYWxzbyBoZWxwIHVzIHVuZGVyc3RhbmQgKkZyZXF1ZW50aXN0KiBpbmZlcmVuY2UuCkFuZCBhIGdvb2QgZ3JvdW5kaW5nIGluIEZyZXF1ZW50aXN0IGluZmVyZW5jZSB3aWxsIGFsc28gaGVscCB1cyB1bmRlcnN0YW5kIHRoZQpkaXN0aW5jdGlvbiBiZXR3ZWVuIEZyZXF1ZW50aXN0IGluZmVyZW5jZSBhbmQgQmF5ZXNpYW4gaW5mZXJlbmNlLgoKIyMgUHJvYmFiaWxpdHkKCk1vc3QgcGVvcGxlIHRoaW5rIG9mICpwcm9iYWJpbGl0eSogYXMgYSBtYXRoZW1hdGljYWwgY29uY2VwdC4gSW4gYSBzZW5zZSBpdCBpcywKYnV0IGl0IGlzIGFsc28gYSBkZWVwbHkgKnBoaWxvc29waGljYWwqIGNvbmNlcHQuIFdlIGRlcGxveSB0aGUgd29yZAoqcHJvYmFiaWxpdHkqIGluIG1hbnkgZGlmZmVyZW50ICpraW5kcyogb2Ygc2l0dWF0aW9ucywgYW5kIGl0J3Mgbm90IGNsZWFyCndoZXRoZXIgd2UgbWVhbiB0aGUgc2FtZSB0aGluZyBpbiBlYWNoIG9mIHRoZW0uIFNvbWUgZXhhbXBsZXMgb2Ygd2hlcmUgd2UgdXNlCnRoZSB3b3JkIHByb2JhYmlsaXR5IGFyZSB3aGVuIHdlIGFzayBxdWVzdGlvbnMgbGlrZTogV2hhdCBpcyB0aGUgcHJvYmFiaWxpdHkgb2YKZ2V0dGluZyBoZWFkcyBvbiByZXBlYXRlZCB0b3NzZXMgb2YgYSBmYWlyIGNvaW4/IFdoYXQgaXMgdGhlIHByb2JhYmlsaXR5IHRoYXQKaXQgd2lsbCByYWluIHRvbW9ycm93PyBXaGF0IGlzIHRoZSBwcm9iYWJpbGl0eSB0aGUgYWNjdXNlZCBjb21taXR0ZWQgdGhlIGNyaW1lPwpUaGUgd29yZCAqcHJvYmFiaWxpdHkqIHNlZW1pbmdseSByZWZlcnMgdG8gZGlmZmVyZW50IHRoaW5ncyBpbiBlYWNoIG9mIHRoZXNlCnNpdHVhdGlvbnMuCgpGb3IgZXhhbXBsZSwgd2UgbWlnaHQgc3VnZ2VzdCB0aGF0IHRoZSBwcm9iYWJpbGl0eSBvZiB0aGUgZ2V0dGluZyBoZWFkcyBpcyAwLjUsCndoZXJlIHRoaXMgMC41IHJlZmVycyB0byB0aGUgKmxvbmctcnVuIHJlbGF0aXZlIGZyZXF1ZW5jeSogb2YgZ2V0dGluZyBoZWFkcy4KVGhhdCBpcywgaWYgd2Ugd2VyZSB0byB0b3NzIGEgY29pbiBtYW55IG1hbnkgdGltZXMgdGhlbiBvbiBhcm91bmQgMC41IChpLmUuLApoYWxmKSBvZiB0aGUgdG9zc2VzIHRoZSBjb2luIHdvdWxkIGNvbWUgdXAgaGVhZHMuCgpXZSBtaWdodCB1c2UgYSBkaWZmZXJlbnQgbm90aW9uIHdoZW4gdGhpbmtpbmcgYWJvdXQgdGhlIGNhc2Ugb2Ygc29tZWJvZHkKYWNjdXNlZCBvZiBhIGNyaW1lLiBXZSBtaWdodCBzYXkgc29tZXRoaW5nIGxpa2UsICJ3ZSBhcmUgOTAlIHN1cmUiIChwcm9iYWJpbGl0eQpvZiAuOSkgdGhhdCB0aGUgY3JpbWluYWwgY29tbWl0dGVkIHRoZSBjcmltZS4gQnV0IHdoYXQgZG9lcyAiOTAlIHN1cmUiIG1lYW4uCkRvZXMgaXQgbWFrZSBzZW5zZSB0byB0aGluayBvZiBpdCBhcyB0aGUgKnJlbGF0aXZlIGZyZXF1ZW5jeSo/IElmIG5vdCwgdGhlbiBob3cKZWxzZSBtaWdodCB3ZSB0aGluayBvZiBpdD8gV2UgbWlnaHQsIGZvciBleGFtcGxlLCB0aGluayBvZiBpdCBhcyBhICpjcmVkZW5jZSoKb3IgYSAqZGVncmVlIG9mIGJlbGllZiogdGhhdCB0aGUgcHJvcG9zaXRpb24gaXMgdHJ1ZS4gT3Igd2UgbWlnaHQgdGhpbmsgb2YgaXQKYXMgYSAqZGVncmVlIG9mIHN1cHBvcnQqLiBUaGF0IGlzLCB3ZSBtaWdodCBzYXkgdGhhdCB0aGUgYXZhaWxhYmxlIGV2aWRlbmNlCnN1cHBvcnRzIHRoZSBoeXBvdGhlc2lzIHRoYXQgdGhlIGFjY3VzZWQgY29tbWl0dGVkIHRoZSBjcmltZSB3aXRoIG9kZHMgb2YKOS10by0xLgoKVGhpcyBsaXN0IGlzbid0IG1lYW50IHRvIGJlIGV4aGF1c3RpdmUuIFRoZSBhaW0gaXMganVzdCB0byBoaWdobGlnaHQgdGhhdCB3ZQptaWdodCBzb21ldGltZXMgbWVhbiBkaWZmZXJlbnQgdGhpbmdzIHdoZW4gd2UgdGhpbmsgYWJvdXQgcHJvYmFiaWxpdHkuIEl0IHBheXMKdG8ga2VlcCB0aGlzIGluIG1pbmQgYXMgd2UgbW92ZSB0aHJvdWdoIHRoZSBjb3Vyc2UuCgojIyBQcm9iYWJpbGl0eSBhbmQgKnAqIHZhbHVlcwoKTm93IHRoYXQgd2Uga25vdyB0aGF0ICpwcm9iYWJpbGl0eSogY2FuIG1lYW4gZGlmZmVyZW50IHRoaW5ncyBpbiBkaWZmZXJlbnQKc2l0dWF0aW9ucywgd2hhdCBub3Rpb24gb2YgKnByb2JhYmlsaXR5KiBpcyBhdCBwbGF5IGluIEFTQSdzIGRlZmluaXRpb24gb2YgdGhlCipwKiB2YWx1ZT8gVGhlIGNvbW1vbiB2aWV3IGlzIHRvIHNheSB0aGF0IGl0IHJlZmVycyB0byAqcmVsYXRpdmUgZnJlcXVlbmNpZXMqLgpCdXQgcmVsYXRpdmUgZnJlcXVlbmNpZXMgb2YgKip3aGF0Kiogb3ZlciByZXBlYXRzIG9mICoqd2hhdCoqPwoKV2UgY291bGQgcG9zc2libHkgcmUtcGhyYXNlIHRoYXQgZGVmaW5pdGlvbiB0byBzYXkgc29tZXRoaW5nIGxpa2UgdGhpczoKCj4gdGhlIHAgdmFsdWUgcmVmZXJzIHRvIHRoZSByZWxhdGl2ZSBmcmVxdWVuY3kgb2Ygb2J0YWluaW5nIGEgc3RhdGlzdGljYWwKPiBzdW1tYXJ5IG9mIHRoZSBkYXRhIGFzIGxhcmdlIG9yIGxhcmdlciB0aGFuIHRoZSBvYnNlcnZlZCB2YWx1ZSBvdmVyCj4gaHlwb3RoZXRpY2FsIHJlcGVhdHMgb2YgYW4gZXhwZXJpbWVudCBkZXNjcmliZWQgYnkgYSBzcGVjaWZpZWQgc3RhdGlzdGljYWwKPiBtb2RlbAoKIyMjIFVuZGVyc3RhbmRpbmcgdGhlICpwKiB0aHJvdWdoIHNpbXVsYXRpb24KCk9uZSBtZXRob2QgdGhhdCBJIHRoaW5rIGlzIHVzZWZ1bCBmb3IgdW5kZXJzdGFuZGluZyBzdGF0aXN0aWNhbCBjb25jZXB0IGlzCipzaW11bGF0aW9uKi4gVGhpcyBpcyBwYXJ0aWN1bGFybHkgdHJ1ZSBpbiB0aGUgY2FzZSBvZiAqcCotdmFsdWVzLCBiZWNhdXNlIEkKZGVmaW5pdGlvbiBhYm92ZSByZWZlcnMgdG8gKmh5cG90aGV0aWNhbCByZXBlYXRzKi4gU2ltdWxhdGlvbiBtZWFucyB0aGF0IHdlIGNhbgpqdXN0IHNpbXVsYXRlIHRob3NlICpyZXBlYXRzKi4gVG8gdW5kZXJzdGFuZCBob3cgKnAqIHZhbHVlcyB3b3JrLCBsZXQncyBzdGFydAp3aXRoIGEgbGl0dGxlIHNjZW5hcmlvOgoKPiBZb3UndmUgYmVlbiBnaXZlbiBhIGRldmljZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGZpbmQgYnVyaWVkIHRyZWFzdXJlLiBUaGUKPiBkZXZpY2UgaGFzIGEgbnVtYmVyZWQgZGlhbCBvbiBpdCwgYW5kIHRoZXJlIGlzIGEgbGl0dGxlIGFycm93IHRoYXQgY2FuIHBvaW50Cj4gYXQgdGhlc2UgbnVtYmVycy4gVGhlIGluZGljYXRvciBuZXZlciBzdGF5cyBzdGlsbCwgYnV0IHN3aW5ncyBhcm91bmQgYSBiaXQuCj4gWW91IGRvbid0IGtub3cgaG93IHRoZSBkZXZpY2Ugd29ya3MsIGV4Y2VwdCB0aGF0IGl0IGJlaGF2ZXMgKmRpZmZlcmVudGx5Kgo+IGFyb3VuZCB0cmVhc3VyZSBjb21wYXJlZCB3aXRoIHdoZW4gdGhlcmUgaXMgbm8gdHJlYXN1cmUgcHJlc2VudC4gSG93IGNhbiB5b3UKPiB1c2UgdGhpcyBkZXZpY2UgdG8gZmluZCB0cmVhc3VyZT8KClRoaXMgc2VlbXMgbGlrZSBhIGhhcmQgcHJvYmxlbS4gWW91IGtub3cgdmVyeSBsaXR0bGUgYWJvdXQgdGhlIGRldmljZS4gWW91CmRvbid0IGtub3cgd2hhdCBpdCdzIG1lYW50IHRvIGRvIHdoZW4gaXQgZmluZHMgdHJlYXN1cmUsIGFuZCB5b3UgZG9uJ3Qga25vdwp3aGF0IGl0J3MgbWVhbnQgdG8gZG8gd2hlbiB0aGVyZSBpc24ndCBhbnkgdHJlYXN1cmUuIFNvIGhvdyBkbyB5b3UgZ28gYWJvdXQKdXNpbmcgaXQgdG8gZmluZCB0cmVhc3VyZT8KCiMjIyMgRmluZGluZyB0cmVhc3VyZQoKVGhlIGZpcnN0IHN0ZXAgaW4gdXNpbmcgdGhlIGRldmljZSBpcyB0byBnZXQgYSBnb29kIGRlc2NyaXB0aW9uIG9mIHdoYXQgaXQgZG9lcwp3aGVuIHRoZXJlIGlzbid0IGFueSB0cmVhc3VyZSBhcm91bmQuIFRvIGRvIHRoaXMsIHlvdSBtaWdodCBqdXN0IHRha2UgeW91cgpkZXZpY2Ugc29tZXdoZXJlIHdpdGhvdXQgdHJlYXN1cmUuIFlvdSBjYW4gdGhlbiBqdXN0IHNpdCBhbmQgd2F0Y2ggdGhlIGRpYWwuCkFmdGVyIGEgbG9uZyB0aW1lIHdhdGNoaW5nIGl0LCB5b3UgbWlnaHQgbm90aWNlIHRoYXQgYWx0aG91Z2ggdGhlIHBvaW50ZXIKc3dpbmdzIGFyb3VuZCBhIGxvdCwgKm9uIGF2ZXJhZ2UqIGl0IHBvaW50cyBhdCB6ZXJvLiBUaGlzIG9uZSBiaXQgb2YKaW5mb3JtYXRpb24gaXMgZW5vdWdoIHRvIGRldmVsb3AgYSB0cmVhc3VyZSBodW50aW5nIHN0cmF0ZWd5IHVzaW5nIHRoaXMgZGV2aWNlLgoKVGhlIGZpcnN0IHN0ZXAgaW4gdGhlIHN0cmF0ZWd5IGlzIGRlY2lkaW5nIGhvdyBtYW55IHJlYWRpbmdzIHRvIHRha2Ugb24gZWFjaApodW50LiBCZWNhdXNlIHRoZSBwb2ludGVyIHN3aW5ncyBhcm91bmQgYSBsb3QsIHdlJ2xsIG5lZWQgdG8gdGFrZSBhIGNvdXBsZSBvZgpyZWFkaW5ncyBhbmQgdGhlbiB1c2UgdGhlc2UgdG8gd29yayBvdXQgYW4gYXZlcmFnZSAod2hpY2ggd2UnbGwgY2FsbAokXGJhcnt4fSQpLiBXZSdyZSBpbiBhIGh1cnJ5IHNvIHdlJ2xsIHRha2UgKioxMCoqIHJlYWRpbmdzIG9uIGVhY2ggaHVudC4KCk5leHQsIHdlJ2xsIG5lZWQgdG8gc2NhbGUgb3VyIGF2ZXJhZ2UuIElmIG91ciBhdmVyYWdlIGlzIDEsIHRoZW4gaXMgdGhpcyBjbG9zZQp0byAwPyBIb3cgYWJvdXQgMC41PyBPciA1PyBPciAxNT8gSXQncyBpbXBvc3NpYmxlIHRvIGtub3cgYmVjYXVzZSB5b3UgZG9uJ3QKa25vdyByYW5nZSBvZiB0aGUgYXZlcmFnZSBkaWFsJ3Mgc3dpbmdzLiBTbyB5b3VyIHNjYWxpbmcgZmFjdG9yIHNob3VsZCBiZQpwcm9wb3J0aW9uYWwgdG8gdGhlIG1hZ25pdHVkZSBvZiB0aGUgYXZlcmFnZSBkZXZpYXRpb25zIHlvdSd2ZSBvYnNlcnZlZCAod2UnbGwKY2FsbCB0aGlzIHNjYWxpbmcgZmFjdG9yICRzX3tcYmFye3h9fSQpLgoKV2l0aCB0aGlzIGluZm9ybWF0aW9uIGluIGhhbmQsIHdlIGhhdmUgZW5vdWdoIHRvIGJ1aWxkIGEgc3RhdGlzdGljYWwgbW9kZWwgb2YKb3VyIGRldmljZSdzIGJlaGF2aW91ci4gVG8gZG8gdGhpcywgd2UganVzdCBnbyB3aGVyZSB0aGVyZSBpcyBubyB0cmVhc3VyZSBhbmQKcGVyZm9ybSB0aGUgZm9sbG93aW5nIHN0ZXBzOiAxKSBUYWtlIDEwIHJlYWRpbmdzOyAyKSB3b3JrIG91dCBhbiBhdmVyYWdlCigkXGJhcnt4fSQpOyAzKSBzY2FsZSBpdCBieSBvdXIgc2NhbGluZyBmYWN0b3IgKCRzX3tcYmFye3h9fSQpOyB3cml0ZSBkb3duIG91cgpzY2FsZWQgbWVhc3VyZW1lbnQgKHdoaWNoIHdlJ2xsIGNhbGwgJHQkKSwgYW5kIHJlcGVhdCEgT25jZSB3ZSd2ZSBkb25lIHRoaXMKbWFueSBtYW55IHRpbWVzLCB0aGVuIHdlJ2xsIGhhdmUgYSBuaWNlIGRpc3RyaWJ1dGlvbiBvciBzdGF0aXN0aWNhbCBtb2RlbCBvZgpob3cgb3VyIGRldmljZSBiZWhhdmVzIHdoZW4gdGhlcmUgaXNuJ3QgYW55IHRyZWFzdXJlLiBPZiBjb3Vyc2UsIHdlIGRvbid0IGhhdmUKdG8gZG8gdGhpcyBmb3IgcmVhbC4gV2UgY2FuIGp1c3Qgc2ltdWxhdGUgaXQhIEZlZWwgZnJlZSB0byBwbGF5IGFyb3VuZCB3aXRoIHRoZQpzaW11bGF0aW9uLCB0byBjaGFuZ2UgdGhlIG51bWJlcnMsIGFuZCB0byBzZWUgaG93IHRoaXMgaW5mbHVlbmNlcyBvdXIKc3RhdGlzdGljYWwgbW9kZWwuCgpgYGB7cn0KIyBydW4gdGhpcyBjaHVuayBpcyB0byBzZXQgdXAgdGhlIHNpbXVsYXRpb24gZnVuY3Rpb24KCnNldC5zZWVkKDYxMikgIyBTZXQgdGhlIHNlZWQgZm9yIHJlcHJvZHVjaWJpbGl0eQoKcnVuX2V4cCA8LSBmdW5jdGlvbihzYW1wbGVfc2l6ZSwgYXZlcmFnZSkgewogICMgZGVmaW5lIGZ1bmN0aW9uIGZvciBydW5uaW5nIGFuZCBleHBlcmltZW50CgogICMgd2UgZG9uJ3Qga25vdyBob3cgbXVjaCB0aGUgcG9pbnRlciBhY3R1YWxseSBzd2luZ3MgYXJvdW5kLAogICMgc28gbGV0cyBqdXN0IHBpY2sgYSByYW5kb20gcmFuZ2UgYmV0d2VlbiAxIGFuZCAxMCEKICBkZXYgPC0gcnVuaWYoMSwgMSwgMTApCiAgbWluX3Bvc3NpYmxlIDwtIGF2ZXJhZ2UgLSBkZXYKICBtYXhfcG9zc2libGUgPC0gYXZlcmFnZSArIGRldgoKICAjIGdlbmVyYXRlIGEgc2FtcGxlIG9mIHJlYWRpbmdzCiAgdGhpc19zYW1wbGUgPC0gcnVuaWYoc2FtcGxlX3NpemUsIG1pbl9wb3NzaWJsZSwgbWF4X3Bvc3NpYmxlKQoKICAjIG1ha2UgZGVzY3JpcHRpdmUgc3RhdHMKICB0aWJibGU6OnRpYmJsZSgKICAgIHNhbXBsZV9tZWFuID0gbWVhbih0aGlzX3NhbXBsZSksICMgb3VyIHgtYmFyCiAgICBzYW1wbGVfc2QgPSBzZCh0aGlzX3NhbXBsZSksICMgYW5kIGF2ZXJhZ2UgZGV2aWF0aW9uIGZyb20geC1iYXIKICAgIG4gPSBzYW1wbGVfc2l6ZSwgIyB0aGUgc2FtcGxlIHNpemUKICAgIHNlID0gc2FtcGxlX3NkIC8gc3FydChzYW1wbGVfc2l6ZSksICMgb3VyIHNjYWxpbmcgIGZhY3RvcgogICAgdCA9IHNhbXBsZV9tZWFuIC8gc2UgIyBvdXIgc2NhbGVkIHZhbHVlCiAgKQp9CgoKCmBgYAoKYGBge3J9CiMgcnVuIHRoaXMgY2h1bmsgdG8gYWN0dWFsbHkgcnVuIHRoZSBzaW11bGF0aW9ucyEKCiMgU2V0IHRoZSBudW1iZXIgb2YgZXhwZXJpbWVudHMgdG8gc2ltdWxhdGUKIyBUaGlzIGNhbiBiZSBzZXQgdG8gYSBoaWdoZXIgbnVtYmVyIGlmIHlvdSB3YW50IHRvIHJ1biB0aGUgc2ltdWxhdGlvbgojIGZvciBsb25nZXIKbm9fb2ZfZXhwcyA8LSAxMDAwCgphbGxfZXhwcyA8LSBwdXJycjo6bWFwX2RmKDE6bm9fb2ZfZXhwcywgZnVuY3Rpb24oeCkgewogIHJ1bl9leHAoc2FtcGxlX3NpemUgPSAxMCwgYXZlcmFnZSA9IDApICU+JSBkcGx5cjo6bXV0YXRlKGkgPSB4KQp9KQoKIyB2aWV3IHRoZSBmaXJzdCAxMCByb3dzIG9mIHRoZSB0YWJsZQphbGxfZXhwcyAlPiUKICBkcGx5cjo6c2xpY2UoMToxMCkgJT4lCiAga25pdHI6OmthYmxlKAogICAgZGlnaXRzID0gMiwKICAgIGZvcm1hdCA9IHRhYmxlX2Zvcm1hdCwKICAgIGNvbC5uYW1lcyA9IGMoIlNhbXBsZSBNZWFuIiwgIlNhbXBsZSBzZCIsICJOIiwgIlN0ZCBFcnJvciIsICJ0IiwgImluZGV4IiksCiAgICBjYXB0aW9uID0gIkZpcnN0IDEwIHJvd3Mgb2Ygc2ltdWxhdGVkIGV4cGVyaW1lbnQgZGF0YSIsCiAgICBhbGlnbiA9ICJjIiwKICApICU+JQogIGRpc3BsYXlfaHRtbCgpCgoKCmBgYAoKYGBge3J9CgojIG1ha2UgYSBoaXN0b2dyYW0gb2YgdGhlIHVuc2NhbGVkIGF2ZXJhZ2VzCm1lYW5faGlzdCA8LSBhbGxfZXhwcyAlPiUgZ2dwbG90KGFlcyh4ID0gc2FtcGxlX21lYW4pKSArCiAgZ2VvbV9oaXN0b2dyYW0oZmlsbCA9ICJzZWFncmVlbiIsIGJpbnMgPSAxMDAsIG5hLnJtID0gVFJVRSkgKwogIGxhYnMoeCA9ICJzYW1wbGUgbWVhbiIsIHkgPSAibnVtYmVyIG9mIGV4cGVyaW1lbnRzIikgKwogIHhsaW0oYygKICAgIC1tYXgoYWJzKGFsbF9leHBzJHNhbXBsZV9tZWFuKSkgKiAxLjEwLAogICAgbWF4KGFicyhhbGxfZXhwcyRzYW1wbGVfbWVhbikpICogMS4xMAogICkpICsKICB0aGVtZV9taW5pbWFsKDE0KQoKIyBtYWtlIGEgaGlzdG9ncmFtZSBvZiB0aGUgc2NhbGVkIGF2ZXJhZ2VzCnRfaGlzdCA8LSBhbGxfZXhwcyAlPiUgZ2dwbG90KGFlcyh4ID0gdCkpICsKICBnZW9tX2hpc3RvZ3JhbShmaWxsID0gInNlYWdyZWVuIiwgYmlucyA9IDEwMCwgbmEucm0gPSBUUlVFKSArCiAgbGFicyh4ID0gInQgc3RhdCIsIHkgPSAibnVtYmVyIG9mIGV4cGVyaW1lbnRzIikgKwogIHhsaW0oYygtNCwgNCkpICsKICB0aGVtZV9taW5pbWFsKDE0KQoKIyBjb252ZXJ0IHRoZSBoaXN0b2dyYW0gb2YgdGhlIHNjYWxlZCBhdmVyYWdlcyB0byBhIHByb2JhYmlsaXR5IGRlbnNpdHkKZGVuc2l0eV9wbG90IDwtIHRpYmJsZSh4ID0gc2VxKC00LCA0LCBsZW5ndGgub3V0ID0gMTAwMDApKSAlPiUKICBtdXRhdGUoeSA9IHBvbHNwbGluZTo6ZGxvZ3NwbGluZSh4LCBwb2xzcGxpbmU6OmxvZ3NwbGluZShhbGxfZXhwcyR0KSkpICU+JQogIGdncGxvdChhZXMoeCA9IHgsIHkgPSB5KSkgKwogIGdlb21fbGluZShjb2xvdXIgPSAiZGFya2JsdWUiKSArCiAgZ2VvbV9mdW5jdGlvbigKICAgIGZ1biA9IGR0LCBhcmdzID0gbGlzdChkZiA9IHVuaXF1ZShhbGxfZXhwcyRuKSAtIDEpLAogICAgbGluZXR5cGUgPSAyCiAgKSArCiAgbGFicyh4ID0gInQiLCB5ID0gImRlbnNpdHkiKSArCiAgeGxpbShjKC00LCA0KSkgKwogIHRoZW1lX21pbmltYWwoMTQpCgooKChtZWFuX2hpc3QgfCB0X2hpc3QpIC8gZGVuc2l0eV9wbG90KSArIHBsb3RfYW5ub3RhdGlvbih0YWdfbGV2ZWxzID0gIkEiKSkKCgoKYGBgCgpJbiBwYW5lbCAqKkEqKiB3ZSBjYW4gc2VlIHRoZSBkaXN0cmlidXRpb24gb2YgdGhlIHJhdyBhdmVyZ2VzIGZyb20gb3VyIGRldmljZS4KSW4gcGFuZWwgKipCKiogdGhlIGF2ZXJhZ2VzIGhhdmUgYmVlbiBzY2FsZWQuIEZpbmFsbHksIGluIHBhbmVsICoqQyoqLCB0aGUKaGlzdG9ncmFtIGhhcyBiZWVuIHR1cm5lZCBpbnRvIGEgZGVuc2l0eSBwbG90LiBUaGUgYmx1ZSBsaW5lIHNob3dzIG91ciBzY2FsZWQKYXZlcmFnZXMsIGFuZCB0aGUgZGFzaGVkIGJsYWNrIGxpbmUgc2hvd3MgYSAqdCogZGlzdHJpYnV0aW9uLiBBcyB3ZSBpbmNyZWFzZQp0aGUgbnVtYmVyIG9mIGV4cGVyaW1lbnRzIHdlIHNpbXVsYXRlIHRoZW4gdGhlIHR3byBsaW5lcyBzaG91bGQgYmVnaW4gdG8Kb3ZlcmxhcC4KCiMjIyMgVXNpbmcgb3VyIGRldmljZQoKV2UgY2FuIHVzZSBvdXIgc3RhdGlzdGljYWwgbW9kZWwgb2Ygb3VyIGRldmljZSAob3VyIGRpc3RyaWJ1dGlvbiBvZiAqdCogdmFsdWVzKQp0byBjb21lIHVwIHdpdGggYSBtZXRob2QgZm9yIGZpbmRpbmcgdHJlYXN1cmUuIE91ciBzdGF0aXN0aWNhbCBtb2RlbCB0ZWxscyB1cwp3aGF0IHJlYWRpbmdzIHdlJ2xsIHNlZSB3aGVuICoqd2UgaGF2ZW4ndCBmb3VuZCB0cmVhc3VyZSoqIGFuZCAqKmhvdyBvZnRlbioqCndlJ2xsIHNlZSB0aG9zZSByZWFkaW5ncy4gSW4gdGhlIGFic2VuY2Ugb2YgdHJlYXN1cmUgd2UnbGwgc2VlIHJlYWRpbmdzIG5lYXIKdGhlIG1pZGRsZSBvZiB0aGUgZGlzdHJpYnV0aW9uIHZlcnkgb2Z0ZW4gYW5kIHJlYWRpbmdzIG5lYXIgdGhlIHRhaWxzIG9mIHRoZQpkaXN0cmlidXRpb24gbGVzcyBvZnRlbi4gV2UgbWlnaHQgZXZlbiBzYXkgdGhhdCwgaW4gdGhlIGFic2VuY2Ugb2YgdHJlYXN1cmUsIGl0CndvdWxkIGJlIHByZXR0eSAqKnN1cnByaXNpbmcqKiB0byBzZWUgYW4gZXh0cmVtZSByZWFkaW5nLiBOb3cgd2UgZG9uJ3Qga25vdwphbnl0aGluZyBhYm91dCBob3cgdGhlIGRldmljZSBiZWhhdmVzIHdoZW4gaXQncyBhcm91bmQgdHJlYXN1cmUsIGJ1dCB3ZSBrbm93CndoYXQgcmVhZGluZ3Mgd291bGQgYmUgKnN1cnByaXNpbmcqIGlmIGl0ICoqd2Fzbid0KiogYXJvdW5kIHRyZWFzdXJlLgoKV2UgY2FuIHVzZSB0aGlzIGZhY3QgdG8gY29tZSB1cCB3aXRoIGEgdHJlYXN1cmUgaHVudGluZyBydWxlLiBXaGVuIHlvdSBzZWUgYQoqKnN1cnByaXNpbmcqKiByZWFkaW5nICh0aGF0IGlzLCBpZiBvdXIgYXZlcmFnZSBvZiBtdWx0aXBsZSByZWFkaW5ncywgZnJvbSBhCnNpbmdsZSBodW50IGZhbGxzIGluIHRoZSBleHRyZW1lIHRhaWxzKSB0aGUgd2UgZGlnIGZvciB0cmVhc3VyZS4gV2hlbiB5b3Ugc2VlCmFuICoqdW5zdXJwcmlzaW5nKiogcmVhZGluZywgbW92ZSBvbiB0byB0aGUgbmV4dCBzcG90LiBMZXQncyB0cnkgaXQgb3V0IQoKYGBge3J9CiMgdHJ5aW5nIG91dCBvdXIgdHJlYXN1cmUgaHVudGluZyBkZXZpY2UKc2V0LnNlZWQoMTUxKQpuIDwtIDEwCmdlbmVyYXRlZF9kYXRhIDwtIHJub3JtKG4sIHJ1bmlmKDEsIC0xMCwgMTApLCBydW5pZigxKSkKeF9iYXIgPC0gbWVhbihnZW5lcmF0ZWRfZGF0YSkgIyB3b3JrIG91dCBhbiBhdmVyYWdlCnNfeF9iYXIgPC0gc2QoZ2VuZXJhdGVkX2RhdGEpIC8gc3FydChsZW5ndGgoZ2VuZXJhdGVkX2RhdGEpKQp0X3ZhbHVlIDwtIHhfYmFyIC8gc194X2JhciAjIHdvcmsgb3V0IHRoZSBzY2FsZWQgbWVhc3VyZW1lbnQKCiMgbm93IHJlcG9ydCBpdCBuaWNlbHkKCmdlbmVyYXRlZF9kYXRhX3R4dCA8LSBwYXN0ZTAocm91bmQoZ2VuZXJhdGVkX2RhdGEsIDIpLCBjb2xsYXBzZSA9ICI7ICIpCnhfYmFyX3R4dCA8LSAiJFxcYmFye3h9JCIKc194X2Jhcl90eHQgPC0gIiRzX3tcXGJhcnt4fX0kIgoKZ2x1ZTo6Z2x1ZSgiT3VyIHtufSBtZWFzdXJlbWVudHMgYXJlOgp7Z2VuZXJhdGVkX2RhdGFfdHh0fQoKT3VyIHt4X2Jhcl90eHR9ID0ge3JvdW5kKHhfYmFyLDMpfQoKT3VyIHtzX3hfYmFyX3R4dH0gPSB7cm91bmQoc194X2JhciwzKX0KClRoaXMgbWVhbnMgdGhhdCBvdXIgc2NhbGVkIG1lYXN1cmVtZW50LCAkdCQgPSB7cm91bmQodF92YWx1ZSwzKX0iKSAlPiUKICBkaXNwbGF5X21hcmtkb3duKCkKCgoKYGBgCgpPbmNlIHdlIGhhdmUgb3VyIHNjYWxlZCByZWFkaW5nICR0JCwgd2UgY2FuIGFzayBob3cgKipzdXJwcmlzaW5nKiogaXQgaXMuIFRvIGRvCnRoaXMsIHdlIGp1c3QgY29tcGFyZSBpdCBhZ2FpbnN0IHRoZSBkaXN0cmlidXRpb24gb2YgbWVhc3VyZW1lbnRzIHRoYXQgd2UKZ2VuZXJhdGVkIHdoZW4gd2Ugd2VyZW4ndCBhcm91bmQgdHJlYXN1cmUuCgpgYGB7cn0KIyBob3cgc3VycHJpc2luZyBpcyBvdXIgbWVhc3VyZW1lbnQKCiMgZmlyc3QgY29udmVydCBpdCB0byBhbiBhYnNvbHV0ZSB2YWx1ZQp0X3ZhbHVlIDwtIGFicyh0X3ZhbHVlKQoKbGFyZ2VyX3RoYW5fcG9zaXRpdmUgPC0gbWVhbihhbGxfZXhwcyR0ID4gdF92YWx1ZSkKc21hbGxlcl90aGFuX25lZ2F0aXZlIDwtIG1lYW4oYWxsX2V4cHMkdCA8IC10X3ZhbHVlKQoKZnVydGhlcl9mcm9tX3plcm8gPC0gbGFyZ2VyX3RoYW5fcG9zaXRpdmUgKyBzbWFsbGVyX3RoYW5fbmVnYXRpdmUKY2xvc2VyX3RvX3plcm8gPC0gMSAtIGZ1cnRoZXJfZnJvbV96ZXJvCgpnbHVlOjpnbHVlKAogICJ7cm91bmQoY2xvc2VyX3RvX3plcm8gKiAxMDAsMil9JSBvZiB2YWx1ZXMgZnJvbSBvdXIgc2ltdWxhdGlvbiIsCiAgIiB3aGVyZSBjbG9zZXIgdG8gemVybyB0aGFuIG91ciBjdXJyZW50IHZhbHVlLgpPbmx5IHtyb3VuZChmdXJ0aGVyX2Zyb21femVybyAqIDEwMCwgMil9JSBvZiB2YWx1ZXMgd2hlcmUgZnVydGhlciBmcm9tICIsCiAgInplcm8gdGhhbiBvdXIgY3VycmVudCB2YWx1ZS4iCikgJT4lCiAgZGlzcGxheV9tYXJrZG93bigpCgoKCmBgYAoKT25jZSB3ZSBoYXZlIGEgbWVhc3VyZW1lbnQgb2YgaG93IHN1cnByaXNpbmcgb3VyIHZhbHVlIGlzLCB0aGVuIHdlIGp1c3QgbmVlZCB0bwpzZXQgYSB0aHJlc2hvbGQgZm9yIHdoZW4gaXQncyBzdXJwcmlzaW5nIGVub3VnaCB0byB3YXJyYW50IGRpZ2dpbmcuIFdlJ2xsIGNhbGwKdGhpcyB0aHJlc2hvbGQgJFxhbHBoYSQsIGFuZCB3ZSdsbCBzZXQgaXQgdG8gNSUgKGZvciBsaXRlcmFsbHkgbm8gcmVhc29uIGluCnBhcnRpY3VsYXIpLgoKTm93IGxldCdzIHRyeSB1c2luZyB0aGUgcnVsZS4gV2UnbGwgZG8gYW5vdGhlciBzaW11bGF0aW9uLiBXZSdsbCBzaW11bGF0ZSBtYW55Cm1hbnkgaHVudHMsIGFuZCBvbiBlYWNoIGh1bnQgdGhlcmUgZWl0aGVyIHdpbGwgYmUgdHJlYXN1cmUgb3IgdGhlcmUgd29uJ3QgYmUKdHJlYXN1cmUuIFRyZWFzdXJlIHdpbGwgb2NjdXIgd2l0aCB0aGUgcHJvYmFiaWxpdHkgb2YgUCh0cmVhc3VyZSkuCldlIHdvbid0IGtub3cgdGhpcyB2YWx1ZSwgYmVjYXVzZSB3ZSdsbCBqdXN0IHJhbmRvbWx5IHNldCBpdC4gRm9yIGVhY2ggaHVudCwKd2UnbGwgbm90ZSBkb3duIHdoZXRoZXIgdGhlIHJ1bGUgdG9sZCB1cyB0byBkaWcgb3IgbW92ZSBvbmUuIEFuZCB3ZSdsbCBhbHNvCnJlY29yZCB0aGUgZ3JvdW5kIHRydXRoIHRvIHRlc3QgdGhlIGFjY3VyYWN5LgoKYGBge3J9CiMgdGVzdGluZyBvdXIgcnVsZQpzZXQuc2VlZCgxNCkgIyBzZXQgc2VlZCBmb3IgcmVwcm9kdWNpYmx5Cm5fdGVzdHMgPC0gMTAwMCAjIHNldCB0aGUgbnVtYmVyIG9mIHRlc3RzCgpwcl90cmVhc3VyZSA8LSBydW5pZigxKSAjIFNldCB0aGUgcHJvYmFibGl0eSBvZiBmaW5kaW5nIHRyZWFzdXJlCgojIGEgZnVuY3Rpb24gZm9yIHNpbXVsYXRpbmcgYSB0cmVhc3VyZSBodW50CnNpbXVsYXRlX2h1bnQgPC0gZnVuY3Rpb24ocHJfdHJlYXN1cmUpIHsKCiAgIyBEZWNpZGUgd2hldGhlciB0aGlzIGh1bnQgaGFzX3RyZWFzdXJlCiAgIyBUaGlzIGlzIHRoZSBncm91bmQgdHJ1dGgKICBoYXNfdHJlYXN1cmUgPC0gaWZlbHNlKHJ1bmlmKDEpIDwgcHJfdHJlYXN1cmUsIDEsIDApCgogIGdlbmVyYXRlZF9kYXRhIDwtIHJub3JtKDEwLCBoYXNfdHJlYXN1cmUsIDEuNSkgIyBnZW5lcmF0ZSAxMCByZWFkaW5ncwoKICAjIHdvcmsgb3V0IHRoZSBzY2FsZWQgbWVhc3VyZW1lbnQgYW5kIGhvdyBzdXByaXNpbmcgaXQgaXMKICAjIGFuZCBkZWNpZGUgd2hldGhlciB0byBkaWcgb3Igbm90IQogICMgRm9yIHRoaXMgd2UnbGwgdXNlIGFuIGFjdHVhbCB0LWRpc3RyaWJ1dGlvbiwgcmF0aGVyIHRoYW4gdGhlIGRpc3RyaWJ1dGlvbgogICMgdGhhdCB3ZSBzaW11bGF0ZWQgZWFybGllcgoKICB0LnRlc3QoZ2VuZXJhdGVkX2RhdGEpICU+JQogICAgYnJvb206OnRpZHkoKSAlPiUKICAgIGRwbHlyOjptdXRhdGUoCiAgICAgIGhhc190cmVhc3VyZSA9IGlmZWxzZShoYXNfdHJlYXN1cmUgPT0gMSwgIlllcyIsICJObyIpLAogICAgICBob3cuc3VwcmlzaW5nID0gcC52YWx1ZSwKICAgICAgZGlnID0gaWZlbHNlKHAudmFsdWUgPCAwLjA1LCAiWWVzIiwgIk5vIikKICAgICkgJT4lCiAgICBkcGx5cjo6c2VsZWN0KGhhc190cmVhc3VyZSwgZGlnKQp9CgpzZXQuc2VlZCgxMSkgIyBzZXQgc2VlZCBmb3IgcmVwcm9kdWNpYmx5CnRlc3RfaHVudHMgPC0gbWFwX2RmKDE6bl90ZXN0cywgZnVuY3Rpb24oeCkgc2ltdWxhdGVfaHVudChwcl90cmVhc3VyZSkpCgoKCmBgYAoKYGBge3J9CiMgbG9vayBhdCB0aGUgcmVzdWx0cyBvZiB0ZXN0cwoKdGVzdF9odW50cyAlPiUKICBzbGljZSgxOjIwKSAlPiUKICBkcGx5cjo6c2xpY2UoMToxMCkgJT4lCiAga25pdHI6OmthYmxlKAogICAgZm9ybWF0ID0gdGFibGVfZm9ybWF0LAogICAgY29sLm5hbWVzID0gYygiSGFkIHRyZWFzdXJlPyIsICJEaWQgZGlnPyIpLAogICAgY2FwdGlvbiA9ICJGaXJzdCAxMCByb3dzIG9mIHNpbXVsYXRlZCB0cmVhc3VyZSBodW50IGRhdGEiLAogICAgYWxpZ24gPSAiYyIKICApICU+JQogIGRpc3BsYXlfaHRtbCgpCgoKCmBgYAoKVG8gYXNzZXMgdGhlIHVzZWZ1bG5lc3Mgb2Ygb3VyIHJ1bGUsIHdlIGNhbiBldmFsdWF0ZSB0aGUgYWNjdXJhY3kgb2Ygb3VyIHJ1bGUuClRoZXJlIGFyZSBhIGZldyB3YXlzIHRvIGRvIHRoaXMuIFdlIGNhbiBsb29rIGF0IG92ZXJhbGwgYWNjdXJhY3kuIFdlIGNhbiBsb29rCmF0IGhvdyBvZnRlbiB3ZSBtaXNzZWQgdHJlYXN1cmUgd2hlbiB0aGVyZSB3YXMgdHJlYXN1cmUuIFdlIGNhbiBsb29rIGhvdyBvZnRlbgp3ZSBkdWcgZm9yIHRyZWFzdXJlIHdoZW4gdGhlcmUgd2Fzbid0IGFueS4gTGV0J3MgdGFrZSBhIGxvb2sgYXQgc29tZSBtZXRyaWNzLgoKYGBge3J9CgojIGNyZWF0ZSBhIGZ1bmN0aW9uIHRvIG1ha2UgdGhlIG1ldHJpY3MgbG9vayBuaWNlCgpnZXRfbWV0cmljcyA8LSBmdW5jdGlvbih0ZXN0X2h1bnRzKSB7CiAgaHVudF9zdW1tYXJ5IDwtIHRlc3RfaHVudHMgJT4lCiAgICBncm91cF9ieShoYXNfdHJlYXN1cmUsIGRpZykgJT4lCiAgICBzdW1tYXJpc2UobiA9IG4oKSwgLmdyb3VwcyA9ICJkcm9wIikgJT4lCiAgICBtdXRhdGUobiA9IDEwMCAqIChuIC8gc3VtKG4pKSkKCiAgYWNjdXJhY3kgPC0gdGVzdF9odW50cyAlPiUKICAgIG11dGF0ZShhY2MgPSBoYXNfdHJlYXN1cmUgPT0gZGlnKSAlPiUKICAgIHB1bGwoYWNjKSAlPiUKICAgIG1lYW4oKQogIGh1bnRfc3VtbWFyeSAlPiUKICAgIGtuaXRyOjprYWJsZSgKICAgICAgZGlnaXRzID0gMiwKICAgICAgYWxpZ24gPSAiYyIsCiAgICAgIGZvcm1hdCA9IHRhYmxlX2Zvcm1hdCwKICAgICAgY29sLm5hbWVzID0gYygiSGFkIHRyZWFzdXJlPyIsICJEaWQgZGlnPyIsICIlIiksCiAgICAgIGNhcHRpb24gPSBwYXN0ZTAoCiAgICAgICAgIk91ciB0cmVhc3VyZSBodW50aW5nIG1ldHJpY3MuIEFjY3VyYWN5OiAiLAogICAgICAgIHJvdW5kKGFjY3VyYWN5LCAyKQogICAgICApCiAgICApCn0KCgoKYGBgCgpgYGB7cn0KIyBHZXQgc29tZSBtZXRyaWNzIGZvciB5b3VyIHNpbXVsYXRlZCBodW50CnRlc3RfaHVudHMgJT4lCiAgZ2V0X21ldHJpY3MoKSAlPiUKICBkaXNwbGF5X2h0bWwoKQoKCgpgYGAKClRoZSBydWxlIHNlZW1zIHRvIHdvcmsgcHJldHR5IHdlbGwgaW4gdGVybXMgb2YgYWNjdXJhY3kuIEJ1dCBob3cgbXVjaCBpcwphY2N1cmFjeSBkZXBlbmRlbnQgb24gdGhlIGFjdHVhbCBwcm9iYWJpbGl0eSBvZiBmaW5kaW5nIHRyZWFzdXJlPyBMZXQncyBydW4gdHdvCm1vcmUgcXVpY2sgc2ltdWxhdGlvbnMgd2hlcmUgd2Ugc2V0IHRoZSBwcm9iYWJpbGl0eSBvZiB0cmVhc3VyZSBhY3R1YWxseSBiZWluZwpwcmVzZW50IHRvIDEgKHRyZWFzdXJlIGFsbCB0aGUgdGltZSkgb3IgMCAodHJlYXN1cmUgbm9uZSBvZiB0aGUgdGltZSkuCgpgYGB7cn0KdGVzdF9odW50c19ub3RoaW5nIDwtIG1hcF9kZigxOm5fdGVzdHMsIGZ1bmN0aW9uKHgpIHNpbXVsYXRlX2h1bnQoMCkpCnRlc3RfaHVudHNfbm90aGluZyAlPiUKICBnZXRfbWV0cmljcygpICU+JQogIGRpc3BsYXlfaHRtbCgpCgoKCmBgYAoKYGBge3J9CnRlc3RfaHVudHNfZXZlcnl3aGVyZSA8LSBtYXBfZGYoMTpuX3Rlc3RzLCBmdW5jdGlvbih4KSBzaW11bGF0ZV9odW50KDEpKQp0ZXN0X2h1bnRzX2V2ZXJ5d2hlcmUgJT4lCiAgZ2V0X21ldHJpY3MoKSAlPiUKICBkaXNwbGF5X2h0bWwoKQoKCgpgYGAKCkJ1dCBtYXliZSBqdXN0IGxvb2tpbmcgYXQgYWNjdXJhY3kgaXNuJ3QgdGhlIGJlc3QuIEFmdGVyIGFsbCwgdGhlcmUgYXJlIHR3bwp3YXlzIGluIHdoaWNoIHdlIGNhbiBiZSB3cm9uZy4gV2UgY2FuIGRpZyB3aGVuIHdlJ3JlIG5vdCBtZWFudCB0bywgYW5kIHdlIGNhbgptb3ZlIG9uIHdoZW4gdGhlcmUncyBhY3R1YWxseSB0cmVhc3VyZS4gU28gbGV0J3Mgc3BsaXQgdGhhdCBhY2N1cmFjeSBwZXJjZW50YWdlCihvciByYXRoZXIgdGhlIFxbMSAtIGFjY3VyYWN5XF0gb3IgImVycm9yIiBwZXJjZW50YWdlKSBpbnRvIHR3bzogMSkgRGlnZ2luZwp3aGVuIHRoZXJlJ3Mgbm8gdHJlYXN1cmUsIGFuZCAyKSBtb3Zpbmcgb24gd2l0aG91dCBkaWdnaW5nIHdoZW4gdGhlcmUgd2FzCnRyZWFzdXJlLiBOb3cgbGV0J3MgYWRqdXN0IFAodHJlYXN1cmUpIGFuZCBzZWUgaG93IHRoZSB0d28gZXJyb3IKcmF0ZXMgZmFyZS4KCmBgYHtyfQoKIyBmdW5jdGlvbiBmb3Igd29ya2luZyBvdXQgdGhlIG1ldHJpY3MKZ2V0X21ldHJpY3MyIDwtIGZ1bmN0aW9uKGRhdGEpIHsKICBkYXRhICU+JQogICAgbXV0YXRlKAogICAgICBGQSA9IGhhc190cmVhc3VyZSA9PSAiTm8iICYgZGlnID09ICJZZXMiLAogICAgICBNUyA9IGhhc190cmVhc3VyZSA9PSAiWWVzIiAmIGRpZyA9PSAiTm8iCiAgICApICU+JQogICAgc3VtbWFyaXNlKEZBID0gbWVhbihGQSkgKiAxMDAsIE1TID0gbWVhbihNUykgKiAxMDApICU+JQogICAgcGl2b3RfbG9uZ2VyKDE6MikgJT4lCiAgICBwdWxsKHZhbHVlLCBuYW1lKQp9CgojIHdvcmsgb3V0IHRoZSBtZXRyaWNzCm5vd2hlcmVfbXRyeCA8LSB0ZXN0X2h1bnRzX25vdGhpbmcgJT4lCiAgZ2V0X21ldHJpY3MyKCkKZXZlcnl3aGVyZV9tdHJ4IDwtIHRlc3RfaHVudHNfZXZlcnl3aGVyZSAlPiUKICBnZXRfbWV0cmljczIoKQoKIyBub3cgcHJpbnQgdGhlIHJlc3VsdHMgbmljZWx5CgpnbHVlOjpnbHVlKCJXaGVuIHRoZXJlIHdhcyBubyB0cmVhc3VyZSBhdCBhbGwgdGhlbiB0aGUgKipmYWxzZSBhbGFybQpyYXRlKiogd2FzIHtub3doZXJlX210cnhbWydGQSddXX0gYW5kIHRoZSAqKm1pc3MgcmF0ZSoqIHdhcwp7bm93aGVyZV9tdHJ4W1snTVMnXV19CgpXaGVuIHRoZXJlIHdhcyB0cmVhc3VyZSBldmVyeXdoZXJlIHRoZW4gdGhlICoqZmFsc2UgYWxhcm0gcmF0ZSoqIHdhcwp7ZXZlcnl3aGVyZV9tdHJ4W1snRkEnXV19IGFuZCB0aGUgKiptaXNzIHJhdGUqKiB3YXMKe2V2ZXJ5d2hlcmVfbXRyeFtbJ01TJ11dfSIpICU+JQogIGRpc3BsYXlfbWFya2Rvd24oKQoKCmBgYAoKV2UgY2FuIHNlZSB0aGF0IG5vIG1hdHRlciB3aGF0IHdlIGRvLCB0aGUgZmFsc2UgYWxhcm0gcmF0ZSAoZGlnZ2luZyB3aGVuIHRoZXJlCmlzIG5vIHRyZWFzdXJlKSBuZXZlciBnb2VzIGFib3ZlIFx+NSUsIHdoaWNoIGlzIHRoZSBzYW1lIHZhbHVlIHdlIHNldCBmb3IKJFxhbHBoYSQuIFRoaXMgaXMgZ3JlYXQgYmVjYXVzZSBpdCBtZWFucyB0aGF0IHdlIGNhbiB3aXRoIGNlcnRhaW50eSBzZXQgdGhlCnVwcGVyIGJvdW5kIG9mIHRoaXMgZXJyb3IgcmF0ZS4gQW5kLCB3ZSBjYW4gZG8gc28ga25vd2luZyBub3RoaW5nIGFib3V0IGhvdwptdWNoIHRyZWFzdXJlIHRoZXJlIGlzIHRvIGJlIGZvdW5kIG9yIGhvdyBvdXIgZGV2aWNlIHdvcmtzIGluIHRoZSBwcmVzZW5jZSBvZgp0cmVhc3VyZS4gQWxsIHdlIG5lZWQgaXM6IDEpIHRvIGtub3cgdGhhdCAqb24gYXZlcmFnZSogdGhlIGRldmljZSBwb2ludHMgYXQKemVybyB3aGVuIHRoZXJlJ3Mgbm8gdHJlYXN1cmUgYXJvdW5kIGFuZCAyKSB0byBzaXQgYW5kIHdhdGNoIHRoZSBkZXZpY2UgZm9yIGEKbG9uZyB0aW1lIGFuZCBqdXN0IHJlY29yZCBzb21lIHNjYWxlZCBtZWFzdXJlbWVudHMgdGhhdCB0aGUgZGV2aWNlIHByb2R1Y2VzLiBJbgpmYWN0LCB3ZSBkb24ndCBldmVuIG5lZWQgdG8gZG8gKDIpLiBXZSBjYW4ganVzdCAqcHJldGVuZCogdG8gdGhpcyBieSBzaW11bGF0aW5nCnRoZSByZXN1bHRzLCBhbmQgd2Ugb25seSBuZWVkIHRvIGlucHV0ICoqb25lIHBhcmFtZXRlcioqLS0tdGhlIHNhbWUgdmFsdWUgd2UKdGhhdCB3ZSBuZWVkZWQgZm9yIHN0ZXAgMS4gRXZlcnl0aGluZyBlbHNlIGNhbiBqdXN0IGJlIG1hZGUgdXAuCgpJJ20gbm90IGdvaW5nIHRvIHRhbGsgbXVjaCBhYm91dCB0aGUgb3RoZXIgZXJyb3IgcmF0ZSwgYmVjYXVzZSB0aGlzIGlzbid0IGEKY291cnNlIG9mIGZyZXF1ZW50aXN0IGluZmVyZW5jZS4gQnV0IHdlIGNhbiBlc3RpbWF0ZSBpdCBiYXNlZCBvbiBzb21lCmFzc3VtcHRpb25zIGFib3V0IGhvdyB0aGUgZGV2aWNlIGJlaGF2ZXMgKmluIHRoZSBwcmVzZW5jZSBvZiB0cmVhc3VyZSouIEZvcgpleGFtcGxlLCBpZiB3ZSBrbm93IHRoYXQgdHJlYXN1cmUgb2YgYSBjZXJ0YWluIHZhbHVlIHJlc3VsdHMgaW4gdGhlIGRldmljZQpwb2ludGluZyBvbiBhdmVyYWdlIGF0IDEsIHRoZW4gd2UgY2FuIGNhbGN1bGF0ZSB0aGUgKip1cHBlciBib3VuZCoqIG9mIG1pc3NpbmcKdHJlYXN1cmVzIHNtYWxsZXIgdGhhbiB0aGF0IHZhbHVlLiBUcnlpbmcgdG8gZXN0aW1hdGUgdGhlICoqdXBwZXIgYm91bmQqKiBvbgp0aGlzIGVycm9yIHJhdGUgaXMgd2hhdCB5b3XigJlyZSBkb2luZyB3aGVuIHlvdeKAmXJlIGRvaW5nIGEgKipwb3dlciBhbmFseXNpcyoqLgpJdOKAmXMgZ2VuZXJhbGx5ICoqYSBsb3QqKiBoYXJkZXIgdG8gZXN0aW1hdGUgdGhpcywgYmVjYXVzZSBpdCBpbnZvbHZlcyBhIGxvdCBvZgpndWVzc3dvcmsuIEluIGNvbXBhcmlzb24sIGVzdGltYXRpbmcgdGhlIGZpcnN0IGVycm9yIHJhdGUgaXMgcmF0aGVyIHRyaXZpYWwuCgojIyBTdW1tYXJ5CgpXaGF0IHRoaXMgcmF0aGVyIGxvbmctd2luZGVkIGRlbW9uc3RyYXRpb24gd2FzIG1lYW50IHRvIHNob3cgaXMgdGhhdCAqcCogdmFsdWVzCmFyZSB2ZXJ5IGdvb2QgYXQgZG9pbmcgb25lIHRoaW5nLiBUaGF0IHRoaW5nIGlzLCBjb250cm9sbGluZyBob3cgb2Z0ZW4sIGluIHRoZQpsb25nIHJ1biwgd2XigJlsbCBtYWtlIGEgcGFydGljdWxhciBraW5kIG9mIGVycm9yLiBEZXBsb3llZCBpbiB0aGUgcmlnaHQgY29udGV4dCwKdGhleeKAmXJlIHZlcnkgZ29vZCBhdCB0aGlzLiBUaGlzIGFsbCBjb21lcyBmcm9tIGEgc2ltcGxlIHByb2Nlc3M6IFNldHRpbmcgdGhlCnZhbHVlIG9mICoqb25lIHBhcmFtZXRlcioqLCBydW5uaW5nIHByZXRlbmQgZXhwZXJpbWVudHMsIGFuZCB0aGVuIGNvbXBhcmluZyBvdXIKZGF0YSBhdCBoYW5kIHRvIHJlc3VsdHMgb2J0YWluZWQgZnJvbSBvdXIgcHJldGVuZCBleHBlcmltZW50cyB0byAqKmp1ZGdlCndoZXRoZXIgb3VyIGRhdGEgaXMgc3VycHJpc2luZyoqIG9yIG5vdC4KCk9mIGNvdXJzZSwgb3VyIHRyZWFzdXJlLWh1bnRpbmcgc2NlbmFyaW8gbWF5IG5vdCBiZSBleGFjdGx5IGFuYWxvZ291cyB0byBob3cKc2NpZW5jZSB3b3Jrcy4gVGhlc2UgbWVhbnMgdGhhdCBkZWNpZGluZyB3aGV0aGVyICpwKiB2YWx1ZXMgYXJlIHVzZWZ1bCBvciBub3QKaXMgZ29pbmcgdG8gZGVwZW5kIG9uIGhvdyBjbG9zZWx5IHRoZWlyIHJlYWwtd29ybGQgdXNlIGNhc2UgbWF0Y2hlcyB0aGVpciBpZGVhbApvcGVyYXRpbmcgZW52aXJvbm1lbnQuCgojIyMgQSBzaG9ydCBub3RlIG9uIGNvbmZpZGVuY2UgaW50ZXJ2YWxzCgpJJ2xsIG1lbnRpb24gY29uZmlkZW5jZSBpbnRlcnZhbHMgb25seSBicmllZmx5LCBidXQgdGhleSBmb2xsb3cgdGhlICpleGFjdCoKc2FtZSBsb2dpYyBhcyAqcCotdmFsdWVzLiBMZXTigJlzIHNheSBJIGNvbGxlY3Qgc29tZSBtZWFzdXJlbWVudHMsIHdvcmsgb3V0IHRoZQphdmVyYWdlLiBJIGNvdWxkIHNjYWxlIHRoaXMgdmFsdWUgd2l0aCBteSBzY2FsaW5nIGZhY3RvciwgY291bGQgZ2V0IGEgKnQqCnZhbHVlLiBJIGNvdWxkIHRoZW4gdHVybiB0byBteSBsaXN0IG9mIHJlc3VsdHMgZnJvbSB0aGUgcHJldGVuZCBleHBlcmltZW50cwoodGhlIHNhbXBsaW5nIGRpc3RyaWJ1dGlvbikgdG8gd29yayBvdXQgbXkgKnAqIHZhbHVlLiBIb3dldmVyLCBJIGNhbiBhbHNvIHRoZQpzYW1wbGluZyBkaXN0cmlidXRpb24gdG8gY29uc3RydWN0ICh0aGUgdmVyeSBwb29ybHkgbmFtZWQpIGNvbmZpZGVuY2UgaW50ZXJ2YWwuCgpIb3cgY291bGQgd2UgZG8gdGhpcz8gTG9va2luZyBhdCB0aGUgc2FtcGxpbmcgZGlzdHJpYnV0aW9uIHdlIGNvbnN0cnVjdGVkCmVhcmxpZXIgd2Ugd291bGQgc2VlIHRoYXQgdmFsdWVzIHRoYXQgYXJlIG1vcmUgdGhhbiBhYm91dCAyLjIzICp0KiB1bml0cyBmcm9tIDAKd291bGQgYmUgc3VycHJpc2luZy4gVXNpbmcgdGhpcyBpbmZvcm1hdGlvbiwgSSBjYW4gYXNrIG15c2VsZiB0aGUgZm9sbG93aW5nCnF1ZXN0aW9uOiBJZiBteSBkZXZpY2Ugb24gYXZlcmFnZSBwb2ludGVkIGF0IHRoZSBjdXJyZW50IHNhbXBsZSBhdmVyYWdlLCByYXRoZXIKdGhhbiB6ZXJvLCB3aGF0IGRhdGEgdmFsdWVzIHdvdWxkIGJlIHN1cnByaXNpbmc/IFRoZSBhbnN3ZXIgdG8gdGhpcyBpcywgb2YKY291cnNlLCB2YWx1ZXMgdGhhdCBhcmUgbW9yZSB0aGFuIDIuMjMgKnQqIHVuaXRzIGZyb20gdGhlIHNhbXBsZSBtZWFuLiBIYXZpbmcKYW4gYW5zd2VyIGluICp0KiB1bml0cyBpc24ndCB2ZXJ5IHVzZWZ1bC4gQnV0IEkga25vdyB0aGF0IEkgY29udmVydGVkCm1lYXN1cmVtZW50cyB0byAqdCogdW5pdHMgYnkgc2NhbGluZyByZWFkaW5ncyB1c2luZyB0aGUgc2NhbGluZyBmYWN0b3IKJHNfe1xiYXJ7eH19JC4gVGhpcyBtZWFucyB3ZSBjYW4ganVzdCB1bi1zY2FsZSB0aGUgdmFsdWUgaW4gKnQqIHVuaXRzIGJhY2sgaW50bwpyYXcgdW5pdHMgdXNpbmcgdGhlIHNjYWxpbmcgZmFjdG9yIGNhbGN1bGF0ZWQgZnJvbSBteSBzYW1wbGUuIFRoaXMgbWVhbnMgSSBjYW4Kc2F5IHRoYXQgYW55IHZhbHVlcyAkXHBtIDIuMjNcY2RvdHt9c197XGJhcnt4fX0kIGZyb20gdGhlIHNhbXBsZSBtZWFuIHdvdWxkIGJlCnN1cnByaXNpbmcuIEFueSB2YWx1ZXMgbGVzcyB0aGFuIHRoaXMsIG9yIGluIHRoaXMgcmFuZ2UsIHdvdWxkIGJlIHVuc3VycHJpc2luZwppZiBteSBkZXZpY2UsIG9uIGF2ZXJhZ2UsIHBvaW50ZWQgYXQgbXkgY3VycmVudCBzYW1wbGUgbWVhbi4gSSBjb3VsZCBkcmF3IGEKbGluZSB0aHJvdWdoIHRoZXNlIHZhbHVlcywgcHV0IGxpdHRsZSB0YWlscyBvbiB0aGlzIGxpbmUsIGFuZCAqaGV5IHByZXN0byogSQpoYXZlIGEgY29uZmlkZW5jZSBpbnRlcnZhbC4KCk5vdyBqdXN0IHRvIGJlIGNsZWFyLCBqdXN0IGxpa2Ugd2l0aCBhICpwKiB2YWx1ZSwgYSBjb25maWRlbmNlIGludGVydmFsIHRlbGxzCnlvdSB3aGF0IHZhbHVlcyB3b3VsZCBiZSBzdXJwcmlzaW5nL3Vuc3VycHJpc2luZyBvbiBhbiBhc3N1bXB0aW9uIG9mIGEgY2VydGFpbgp2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLiBGb3IgdGhlICpwKiB2YWx1ZSB5b3Ugc2V0IHRoZSBwYXJhbWV0ZXIgdG8gMCAob3IKd2hlcmV2ZXIgZWxzZSB0aGUgZGV2aWNlIHBvaW50cyB3aGVuIG5vIHRyZWFzdXJlIGlzIGFyb3VuZCkuIEZvciB0aGUgY29uZmlkZW5jZQppbnRlcnZhbCwgSSBqdXN0IHNldCB0aGUgcGFyYW1ldGVyIHZhbHVlIHRvIHRoZSBlc3RpbWF0ZSBvYnRhaW5lZCBmcm9tIHRoZQpjdXJyZW50IHNhbXBsZSwgYnV0IGl04oCZcyBleGFjdGx5IHRoZSBzYW1lIGlkZWEuCgpIb3BlZnVsbHksIHRoaXMgc2hvdWxkIG1ha2UgaXQgY2xlYXIgd2hhdCB0aGUgY29uZmlkZW5jZSBpbnRlcnZhbCBkb2VzIGFuZApkb2Vzbid0IHRlbGwgeW91LiBJdCBkb2Vzbid0IHRlbGwgeW91IGFib3V0IHRoZSAqcHJvYmFiaWxpdHkgb2YgYSBwYXJhbWV0ZXIKZmFsbGluZyB3aXRoaW4gYSByYW5nZSogKHRoZSBjb21tb24gbWlzaW50ZXJwcmV0YXRpb24pLiBJdCB0ZWxscyB5b3UgKmZyZXF1ZW5jeQp3aXRoIHdoaWNoIGRhdGEgZnJvbSBwcmV0ZW5kIGV4cGVyaW1lbnRzIHdpbGwgZmFsbCB3aXRoaW4gYSBwYXJ0aWN1bGFyIHJhbmdlIG9uCnRoZSBhc3N1bXB0aW9uIHRoYXQgdGhlIHBhcmFtZXRlciBpcyBlcXVhbCB0byB0aGUgb2JzZXJ2ZWQgdmFsdWUqLiBBdCBubyBwb2ludAphcmUgd2UgbWFraW5nIGluZmVyZW5jZXMgYWJvdXQgKipwYXJhbWV0ZXJzKiogb3IgKip0cnVlIHZhbHVlcyoqIG9mIHBhcmFtZXRlcnMuCldlIGFyZSBob2xkaW5nIHBhcmFtZXRlcnMgY29uc3RhbnQsIGRvaW5nIHByZXRlbmQgZXhwZXJpbWVudHMsIGFuZCB0aGVuIG1hcmtpbmcKb3V0IHRoZSByYW5nZSBvZiBzdXJwcmlzaW5nIGFuZCB1bnN1cnByaXNpbmcgZGF0YS4gCgpOb3cgdGhhdCB3ZSdyZSBhbGwgb24gdGhlIHNhbWUgcGFnZSBhYm91dCAqcCogdmFsdWVzIGFuZCBjb25maWRlbmNlIGludGVydmFscywKYW5kIHdlIGhhdmUgYSBnb29kIGlkZWEgb2Ygd2hlcmUgdGhleSBjb21lIGZyb20gbGV0IHVzIHRoZSBhIGxvb2sgYXQgc29tZQpjcml0aWNpc21zIG9mICpwKiB2YWx1ZXMuCg" download="01-pvalues.Rmd"><img src="https://img.shields.io/badge/.Rmd-Download-blue"></a>
<a href="https://colab.research.google.com/github/ljcolling/bayes2022/blob/main/_notebooks/01-pvalues.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab" /></a></p>
<p>Before diving into Bayesian hypothesis testing, it’s worth spending a little
time going over Frequentist null-hypothesis significance testing. The reason
for this is that I want it to be clear that Bayesian methods and Frequentist
methods aren’t just two different ways of answering the same question. Rather,
I want it to be clear that Bayesian methods and Frequentist methods are asking
<strong>fundamentally different questions</strong>. For this reason, we’ll start right back
at the beginning with <em>p</em> values.</p>
<p>The American Statistical Association (ASA) defines a <em>p</em> value as:</p>
<blockquote>
<p>the probability under a specified statistical model that a statistical
summary of the data (e.g., the sample mean difference between two compared
groups) would be equal to or more extreme than its observed value
(<a href="https://doi.org/10.1080/00031305.2016.1154108">Wasserstein and Lazar 2016</a>)</p>
</blockquote>
<p>While this is a perfectly acceptable definition, it is maybe a little tricky to
understand. The main reason for this is that the definition contains at least
one <em>ill-defined concept</em> (“probability”) and one tricky concept (“specified
statistical model”). To understand what a <em>p</em> value really is, we’re going to
have to unpack both of these ideas. Along the way, we’re going to learn about
some other concepts that will also help us understand <em>Frequentist</em> inference.
And a good grounding in Frequentist inference will also help us understand the
distinction between Frequentist inference and Bayesian inference.</p>
<div id="probability" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Probability</h2>
<p>Most people think of <em>probability</em> as a mathematical concept. In a sense it is,
but it is also a deeply <em>philosophical</em> concept. We deploy the word
<em>probability</em> in many different <em>kinds</em> of situations, and it’s not clear
whether we mean the same thing in each of them. Some examples of where we use
the word probability are when we ask questions like: What is the probability of
getting heads on repeated tosses of a fair coin? What is the probability that
it will rain tomorrow? What is the probability the accused committed the crime?
The word <em>probability</em> seemingly refers to different things in each of these
situations.</p>
<p>For example, we might suggest that the probability of the getting heads is 0.5,
where this 0.5 refers to the <em>long-run relative frequency</em> of getting heads.
That is, if we were to toss a coin many many times then on around 0.5 (i.e.,
half) of the tosses the coin would come up heads.</p>
<p>We might use a different notion when thinking about the case of somebody
accused of a crime. We might say something like, “we are 90% sure” (probability
of .9) that the criminal committed the crime. But what does “90% sure” mean.
Does it make sense to think of it as the <em>relative frequency</em>? If not, then how
else might we think of it? We might, for example, think of it as a <em>credence</em>
or a <em>degree of belief</em> that the proposition is true. Or we might think of it
as a <em>degree of support</em>. That is, we might say that the available evidence
supports the hypothesis that the accused committed the crime with odds of
9-to-1.</p>
<p>This list isn’t meant to be exhaustive. The aim is just to highlight that we
might sometimes mean different things when we think about probability. It pays
to keep this in mind as we move through the course.</p>
</div>
<div id="probability-and-p-values" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Probability and <em>p</em> values</h2>
<p>Now that we know that <em>probability</em> can mean different things in different
situations, what notion of <em>probability</em> is at play in ASA’s definition of the
<em>p</em> value? The common view is to say that it refers to <em>relative frequencies</em>.
But relative frequencies of <strong>what</strong> over repeats of <strong>what</strong>?</p>
<p>We could possibly re-phrase that definition to say something like this:</p>
<blockquote>
<p>the p value refers to the relative frequency of obtaining a statistical
summary of the data as large or larger than the observed value over
hypothetical repeats of an experiment described by a specified statistical
model</p>
</blockquote>
<div id="understanding-the-p-through-simulation" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Understanding the <em>p</em> through simulation</h3>
<p>One method that I think is useful for understanding statistical concept is
<em>simulation</em>. This is particularly true in the case of <em>p</em>-values, because I
definition above refers to <em>hypothetical repeats</em>. Simulation means that we can
just simulate those <em>repeats</em>. To understand how <em>p</em> values work, let’s start
with a little scenario:</p>
<blockquote>
<p>You’ve been given a device that can be used to find buried treasure. The
device has a numbered dial on it, and there is a little arrow that can point
at these numbers. The indicator never stays still, but swings around a bit.
You don’t know how the device works, except that it behaves <em>differently</em>
around treasure compared with when there is no treasure present. How can you
use this device to find treasure?</p>
</blockquote>
<p>This seems like a hard problem. You know very little about the device. You
don’t know what it’s meant to do when it finds treasure, and you don’t know
what it’s meant to do when there isn’t any treasure. So how do you go about
using it to find treasure?</p>
<div id="finding-treasure" class="section level4" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Finding treasure</h4>
<p>The first step in using the device is to get a good description of what it does
when there isn’t any treasure around. To do this, you might just take your
device somewhere without treasure. You can then just sit and watch the dial.
After a long time watching it, you might notice that although the pointer
swings around a lot, <em>on average</em> it points at zero. This one bit of
information is enough to develop a treasure hunting strategy using this device.</p>
<p>The first step in the strategy is deciding how many readings to take on each
hunt. Because the pointer swings around a lot, we’ll need to take a couple of
readings and then use these to work out an average (which we’ll call
<span class="math inline">\(\bar{x}\)</span>). We’re in a hurry so we’ll take <strong>10</strong> readings on each hunt.</p>
<p>Next, we’ll need to scale our average. If our average is 1, then is this close
to 0? How about 0.5? Or 5? Or 15? It’s impossible to know because you don’t
know range of the average dial’s swings. So your scaling factor should be
proportional to the magnitude of the average deviations you’ve observed (we’ll
call this scaling factor <span class="math inline">\(s_{\bar{x}}\)</span>).</p>
<p>With this information in hand, we have enough to build a statistical model of
our device’s behaviour. To do this, we just go where there is no treasure and
perform the following steps: 1) Take 10 readings; 2) work out an average
(<span class="math inline">\(\bar{x}\)</span>); 3) scale it by our scaling factor (<span class="math inline">\(s_{\bar{x}}\)</span>); write down our
scaled measurement (which we’ll call <span class="math inline">\(t\)</span>), and repeat! Once we’ve done this
many many times, then we’ll have a nice distribution or statistical model of
how our device behaves when there isn’t any treasure. Of course, we don’t have
to do this for real. We can just simulate it! Feel free to play around with the
simulation, to change the numbers, and to see how this influences our
statistical model.</p>
<table>
<caption>
<span id="tab:unnamed-chunk-2">Table 1.1: </span>First 10 rows of simulated experiment data
</caption>
<thead>
<tr>
<th style="text-align:center;">
Sample Mean
</th>
<th style="text-align:center;">
Sample sd
</th>
<th style="text-align:center;">
N
</th>
<th style="text-align:center;">
Std Error
</th>
<th style="text-align:center;">
t
</th>
<th style="text-align:center;">
index
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
-1.76
</td>
<td style="text-align:center;">
3.38
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.07
</td>
<td style="text-align:center;">
-1.65
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
0.50
</td>
<td style="text-align:center;">
4.29
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.36
</td>
<td style="text-align:center;">
0.37
</td>
<td style="text-align:center;">
2
</td>
</tr>
<tr>
<td style="text-align:center;">
0.08
</td>
<td style="text-align:center;">
0.79
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
0.25
</td>
<td style="text-align:center;">
0.33
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
-0.87
</td>
<td style="text-align:center;">
3.31
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.05
</td>
<td style="text-align:center;">
-0.83
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;">
-2.46
</td>
<td style="text-align:center;">
3.50
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.11
</td>
<td style="text-align:center;">
-2.23
</td>
<td style="text-align:center;">
5
</td>
</tr>
<tr>
<td style="text-align:center;">
1.08
</td>
<td style="text-align:center;">
3.93
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.24
</td>
<td style="text-align:center;">
0.87
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
1.09
</td>
<td style="text-align:center;">
3.47
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.10
</td>
<td style="text-align:center;">
1.00
</td>
<td style="text-align:center;">
7
</td>
</tr>
<tr>
<td style="text-align:center;">
0.07
</td>
<td style="text-align:center;">
0.75
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
0.24
</td>
<td style="text-align:center;">
0.31
</td>
<td style="text-align:center;">
8
</td>
</tr>
<tr>
<td style="text-align:center;">
3.28
</td>
<td style="text-align:center;">
5.46
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.73
</td>
<td style="text-align:center;">
1.90
</td>
<td style="text-align:center;">
9
</td>
</tr>
<tr>
<td style="text-align:center;">
-0.29
</td>
<td style="text-align:center;">
3.53
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
1.12
</td>
<td style="text-align:center;">
-0.26
</td>
<td style="text-align:center;">
10
</td>
</tr>
</tbody>
</table>
<p><img src="01-pvalues_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>In panel <strong>A</strong> we can see the distribution of the raw averges from our device.
In panel <strong>B</strong> the averages have been scaled. Finally, in panel <strong>C</strong>, the
histogram has been turned into a density plot. The blue line shows our scaled
averages, and the dashed black line shows a <em>t</em> distribution. As we increase
the number of experiments we simulate then the two lines should begin to
overlap.</p>
</div>
<div id="using-our-device" class="section level4" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Using our device</h4>
<p>We can use our statistical model of our device (our distribution of <em>t</em> values)
to come up with a method for finding treasure. Our statistical model tells us
what readings we’ll see when <strong>we haven’t found treasure</strong> and <strong>how often</strong>
we’ll see those readings. In the absence of treasure we’ll see readings near
the middle of the distribution very often and readings near the tails of the
distribution less often. We might even say that, in the absence of treasure, it
would be pretty <strong>surprising</strong> to see an extreme reading. Now we don’t know
anything about how the device behaves when it’s around treasure, but we know
what readings would be <em>surprising</em> if it <strong>wasn’t</strong> around treasure.</p>
<p>We can use this fact to come up with a treasure hunting rule. When you see a
<strong>surprising</strong> reading (that is, if our average of multiple readings, from a
single hunt falls in the extreme tails) the we dig for treasure. When you see
an <strong>unsurprising</strong> reading, move on to the next spot. Let’s try it out!</p>
<p>Our 10 measurements are:
0.25; -0.54; -0.51; -0.75; 0.27; -1.62; -1.29; -0.21; 0.17; -0.83</p>
<p>Our <span class="math inline">\(\bar{x}\)</span> = -0.507</p>
<p>Our <span class="math inline">\(s_{\bar{x}}\)</span> = 0.204</p>
<p>This means that our scaled measurement, <span class="math inline">\(t\)</span> = -2.485</p>
<p>Once we have our scaled reading <span class="math inline">\(t\)</span>, we can ask how <strong>surprising</strong> it is. To do
this, we just compare it against the distribution of measurements that we
generated when we weren’t around treasure.</p>
<p>96.7% of values from our simulation where closer to zero than our current value.
Only 3.3% of values where further from zero than our current value.</p>
<p>Once we have a measurement of how surprising our value is, then we just need to
set a threshold for when it’s surprising enough to warrant digging. We’ll call
this threshold <span class="math inline">\(\alpha\)</span>, and we’ll set it to 5% (for literally no reason in
particular).</p>
<p>Now let’s try using the rule. We’ll do another simulation. We’ll simulate many
many hunts, and on each hunt there either will be treasure or there won’t be
treasure. Treasure will occur with the probability of P(treasure).
We won’t know this value, because we’ll just randomly set it. For each hunt,
we’ll note down whether the rule told us to dig or move one. And we’ll also
record the ground truth to test the accuracy.</p>
<table>
<caption>
<span id="tab:unnamed-chunk-7">Table 1.2: </span>First 10 rows of simulated treasure hunt data
</caption>
<thead>
<tr>
<th style="text-align:center;">
Had treasure?
</th>
<th style="text-align:center;">
Did dig?
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
Yes
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
</tr>
</tbody>
</table>
<p>To asses the usefulness of our rule, we can evaluate the accuracy of our rule.
There are a few ways to do this. We can look at overall accuracy. We can look
at how often we missed treasure when there was treasure. We can look how often
we dug for treasure when there wasn’t any. Let’s take a look at some metrics.</p>
<table>
<caption>
<span id="tab:unnamed-chunk-9">Table 1.3: </span>Our treasure hunting metrics. Accuracy: 0.83
</caption>
<thead>
<tr>
<th style="text-align:center;">
Had treasure?
</th>
<th style="text-align:center;">
Did dig?
</th>
<th style="text-align:center;">
%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
69.9
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
3.4
</td>
</tr>
<tr>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
13.9
</td>
</tr>
<tr>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
12.8
</td>
</tr>
</tbody>
</table>
<p>The rule seems to work pretty well in terms of accuracy. But how much is
accuracy dependent on the actual probability of finding treasure? Let’s run two
more quick simulations where we set the probability of treasure actually being
present to 1 (treasure all the time) or 0 (treasure none of the time).</p>
<table>
<caption>
<span id="tab:unnamed-chunk-10">Table 1.4: </span>Our treasure hunting metrics. Accuracy: 0.95
</caption>
<thead>
<tr>
<th style="text-align:center;">
Had treasure?
</th>
<th style="text-align:center;">
Did dig?
</th>
<th style="text-align:center;">
%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
94.6
</td>
</tr>
<tr>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
5.4
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:unnamed-chunk-11">Table 1.5: </span>Our treasure hunting metrics. Accuracy: 0.46
</caption>
<thead>
<tr>
<th style="text-align:center;">
Had treasure?
</th>
<th style="text-align:center;">
Did dig?
</th>
<th style="text-align:center;">
%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
No
</td>
<td style="text-align:center;">
54.5
</td>
</tr>
<tr>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
Yes
</td>
<td style="text-align:center;">
45.5
</td>
</tr>
</tbody>
</table>
<p>But maybe just looking at accuracy isn’t the best. After all, there are two
ways in which we can be wrong. We can dig when we’re not meant to, and we can
move on when there’s actually treasure. So let’s split that accuracy percentage
(or rather the <span class="math display">\[1 - accuracy\]</span> or “error” percentage) into two: 1) Digging
when there’s no treasure, and 2) moving on without digging when there was
treasure. Now let’s adjust P(treasure) and see how the two error
rates fare.</p>
<p>When there was no treasure at all then the <strong>false alarm
rate</strong> was 5.4 and the <strong>miss rate</strong> was
0</p>
<p>When there was treasure everywhere then the <strong>false alarm rate</strong> was
0 and the <strong>miss rate</strong> was
54.5</p>
<p>We can see that no matter what we do, the false alarm rate (digging when there
is no treasure) never goes above ~5%, which is the same value we set for
<span class="math inline">\(\alpha\)</span>. This is great because it means that we can with certainty set the
upper bound of this error rate. And, we can do so knowing nothing about how
much treasure there is to be found or how our device works in the presence of
treasure. All we need is: 1) to know that <em>on average</em> the device points at
zero when there’s no treasure around and 2) to sit and watch the device for a
long time and just record some scaled measurements that the device produces. In
fact, we don’t even need to do (2). We can just <em>pretend</em> to this by simulating
the results, and we only need to input <strong>one parameter</strong>—the same value we
that we needed for step 1. Everything else can just be made up.</p>
<p>I’m not going to talk much about the other error rate, because this isn’t a
course of frequentist inference. But we can estimate it based on some
assumptions about how the device behaves <em>in the presence of treasure</em>. For
example, if we know that treasure of a certain value results in the device
pointing on average at 1, then we can calculate the <strong>upper bound</strong> of missing
treasures smaller than that value. Trying to estimate the <strong>upper bound</strong> on
this error rate is what you’re doing when you’re doing a <strong>power analysis</strong>.
It’s generally <strong>a lot</strong> harder to estimate this, because it involves a lot of
guesswork. In comparison, estimating the first error rate is rather trivial.</p>
</div>
</div>
</div>
<div id="summary" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Summary</h2>
<p>What this rather long-winded demonstration was meant to show is that <em>p</em> values
are very good at doing one thing. That thing is, controlling how often, in the
long run, we’ll make a particular kind of error. Deployed in the right context,
they’re very good at this. This all comes from a simple process: Setting the
value of <strong>one parameter</strong>, running pretend experiments, and then comparing our
data at hand to results obtained from our pretend experiments to <strong>judge
whether our data is surprising</strong> or not.</p>
<p>Of course, our treasure-hunting scenario may not be exactly analogous to how
science works. These means that deciding whether <em>p</em> values are useful or not
is going to depend on how closely their real-world use case matches their ideal
operating environment.</p>
<div id="a-short-note-on-confidence-intervals" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> A short note on confidence intervals</h3>
<p>I’ll mention confidence intervals only briefly, but they follow the <em>exact</em>
same logic as <em>p</em>-values. Let’s say I collect some measurements, work out the
average. I could scale this value with my scaling factor, could get a <em>t</em>
value. I could then turn to my list of results from the pretend experiments
(the sampling distribution) to work out my <em>p</em> value. However, I can also the
sampling distribution to construct (the very poorly named) confidence interval.</p>
<p>How could we do this? Looking at the sampling distribution we constructed
earlier we would see that values that are more than about 2.23 <em>t</em> units from 0
would be surprising. Using this information, I can ask myself the following
question: If my device on average pointed at the current sample average, rather
than zero, what data values would be surprising? The answer to this is, of
course, values that are more than 2.23 <em>t</em> units from the sample mean. Having
an answer in <em>t</em> units isn’t very useful. But I know that I converted
measurements to <em>t</em> units by scaling readings using the scaling factor
<span class="math inline">\(s_{\bar{x}}\)</span>. This means we can just un-scale the value in <em>t</em> units back into
raw units using the scaling factor calculated from my sample. This means I can
say that any values <span class="math inline">\(\pm 2.23\cdot{}s_{\bar{x}}\)</span> from the sample mean would be
surprising. Any values less than this, or in this range, would be unsurprising
if my device, on average, pointed at my current sample mean. I could draw a
line through these values, put little tails on this line, and <em>hey presto</em> I
have a confidence interval.</p>
<p>Now just to be clear, just like with a <em>p</em> value, a confidence interval tells
you what values would be surprising/unsurprising on an assumption of a certain
value of the parameter. For the <em>p</em> value you set the parameter to 0 (or
wherever else the device points when no treasure is around). For the confidence
interval, I just set the parameter value to the estimate obtained from the
current sample, but it’s exactly the same idea.</p>
<p>Hopefully, this should make it clear what the confidence interval does and
doesn’t tell you. It doesn’t tell you about the <em>probability of a parameter
falling within a range</em> (the common misinterpretation). It tells you <em>frequency
with which data from pretend experiments will fall within a particular range on
the assumption that the parameter is equal to the observed value</em>. At no point
are we making inferences about <strong>parameters</strong> or <strong>true values</strong> of parameters.
We are holding parameters constant, doing pretend experiments, and then marking
out the range of surprising and unsurprising data.</p>
<p>Now that we’re all on the same page about <em>p</em> values and confidence intervals,
and we have a good idea of where they come from let us the a look at some
criticisms of <em>p</em> values.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="criticisms-of-p-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["bayes_notes.pdf", "pdf"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
