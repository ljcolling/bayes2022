<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 The evidential alternative to p values | Advanced Statistical Methods</title>
  <meta name="description" content="An introduction to Bayesian Statistics" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 The evidential alternative to p values | Advanced Statistical Methods" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to Bayesian Statistics" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 The evidential alternative to p values | Advanced Statistical Methods" />
  
  <meta name="twitter:description" content="An introduction to Bayesian Statistics" />
  

<meta name="author" content="Dr Lincoln Colling" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="criticisms-of-p-values.html"/>
<link rel="next" href="bayes-rule.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html"><i class="fa fa-check"></i><b>1</b> Null-hypothesis significance testing</a>
<ul>
<li class="chapter" data-level="1.1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#probability"><i class="fa fa-check"></i><b>1.1</b> Probability</a></li>
<li class="chapter" data-level="1.2" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#probability-and-p-values"><i class="fa fa-check"></i><b>1.2</b> Probability and <em>p</em> values</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#understanding-the-p-through-simulation"><i class="fa fa-check"></i><b>1.2.1</b> Understanding the <em>p</em> through simulation</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="null-hypothesis-significance-testing.html"><a href="null-hypothesis-significance-testing.html#summary"><i class="fa fa-check"></i><b>1.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html"><i class="fa fa-check"></i><b>2</b> Criticisms of <em>p</em> values</a>
<ul>
<li class="chapter" data-level="2.1" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html#same-measurements-from-different-devices"><i class="fa fa-check"></i><b>2.1</b> Same measurements from different devices</a></li>
<li class="chapter" data-level="2.2" data-path="criticisms-of-p-values.html"><a href="criticisms-of-p-values.html#the-universe-of-possible-events"><i class="fa fa-check"></i><b>2.2</b> The universe of possible events</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-evidential-alternative-to-p-values.html"><a href="the-evidential-alternative-to-p-values.html"><i class="fa fa-check"></i><b>3</b> The evidential alternative to <em>p</em> values</a>
<ul>
<li class="chapter" data-level="3.1" data-path="the-evidential-alternative-to-p-values.html"><a href="the-evidential-alternative-to-p-values.html#doing-inference-with-likelihoods"><i class="fa fa-check"></i><b>3.1</b> Doing inference with likelihoods</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="the-evidential-alternative-to-p-values.html"><a href="the-evidential-alternative-to-p-values.html#a-brief-detour-back-to-sampling-rules"><i class="fa fa-check"></i><b>3.1.1</b> A brief detour back to sampling rules</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="the-evidential-alternative-to-p-values.html"><a href="the-evidential-alternative-to-p-values.html#some-features-of-likelihoods"><i class="fa fa-check"></i><b>3.2</b> Some features of likelihoods</a></li>
<li class="chapter" data-level="3.3" data-path="the-evidential-alternative-to-p-values.html"><a href="the-evidential-alternative-to-p-values.html#testing-more-complex-hypotheses"><i class="fa fa-check"></i><b>3.3</b> Testing more complex hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bayes-rule.html"><a href="bayes-rule.html"><i class="fa fa-check"></i><b>4</b> Bayes rule</a>
<ul>
<li class="chapter" data-level="4.1" data-path="bayes-rule.html"><a href="bayes-rule.html#what-is-bayes-rule"><i class="fa fa-check"></i><b>4.1</b> What is Bayes rule</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="bayes-rule.html"><a href="bayes-rule.html#conditional-probability-form"><i class="fa fa-check"></i><b>4.1.1</b> Conditional probability form</a></li>
<li class="chapter" data-level="4.1.2" data-path="bayes-rule.html"><a href="bayes-rule.html#proportional-form"><i class="fa fa-check"></i><b>4.1.2</b> Proportional form</a></li>
<li class="chapter" data-level="4.1.3" data-path="bayes-rule.html"><a href="bayes-rule.html#ratio-form"><i class="fa fa-check"></i><b>4.1.3</b> Ratio form</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="bayes-rule.html"><a href="bayes-rule.html#bayes-factor"><i class="fa fa-check"></i><b>4.2</b> Bayes factor</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced Statistical Methods</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-evidential-alternative-to-p-values" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> The evidential alternative to <em>p</em> values</h1>
<p><a href="data:text/x-markdown;base64,LS0tCnRpdGxlOiAiTGlrZWxpaG9vZHMiCm91dHB1dDogaHRtbF9kb2N1bWVudAotLS0KCmBgYHtyIHNldHVwLCBlY2hvPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IEZBTFNFKQpzdXBwcmVzc01lc3NhZ2VzKGV4cHIgPSAgewogIGlmICgicGF0Y2h3b3JrIiAlaW4lIHJvdy5uYW1lcyhpbnN0YWxsZWQucGFja2FnZXMoKSkgPT0gRkFMU0UpIHsKICAgIGluc3RhbGwucGFja2FnZXMoInBhdGNod29yayIpCiAgfQogIGlmICgiYmF5ZXNwbGF5IiAlaW4lIHJvdy5uYW1lcyhpbnN0YWxsZWQucGFja2FnZXMoKSkgPT0gRkFMU0UpIHsKICAgIGluc3RhbGwucGFja2FnZXMoImJheWVzcGxheSIpCiAgfQogIGlmICgicG9sc3BsaW5lIiAlaW4lIHJvdy5uYW1lcyhpbnN0YWxsZWQucGFja2FnZXMoKSkgPT0gRkFMU0UpIHsKICAgIGluc3RhbGwucGFja2FnZXMoInBvbHNwbGluZSIpCiAgfQoKICBpZiAoIklSZGlzcGxheSIgJWluJSByb3cubmFtZXMoaW5zdGFsbGVkLnBhY2thZ2VzKCkpID09IFRSVUUpIHsKICAgIGRpc3BsYXlfbWFya2Rvd24gPDwtIFwoeCkgSVJkaXNwbGF5OjpkaXNwbGF5X21hcmtkb3duKGFzLmNoYXJhY3Rlcih4KSkKICAgIGRpc3BsYXlfaHRtbCA8PC0gXCh4KSBJUmRpc3BsYXk6OmRpc3BsYXlfaHRtbChhcy5jaGFyYWN0ZXIoeCkpCiAgfSBlbHNlIHsKICAgIGRpc3BsYXlfbWFya2Rvd24gPDwtIGtuaXRyOjphc2lzX291dHB1dAogICAgZGlzcGxheV9odG1sIDw8LSBrbml0cjo6YXNpc19vdXRwdXQKICB9CgogIGxpYnJhcnkodGlkeXZlcnNlKQogIGxpYnJhcnkocG9sc3BsaW5lKQogIGxpYnJhcnkocGF0Y2h3b3JrKQogIGxpYnJhcnkobWFncml0dHIpCn0pCgp0YWJsZV9mb3JtYXQgPC0gImh0bWwiCgpgYGAKIyBUaGUgZXZpZGVudGlhbCBhbHRlcm5hdGl2ZSB0byAqcCogdmFsdWVzCgpDb21pbmcgdXAgd2l0aCBhbiBhbHRlcm5hdGl2ZSB0byAqcCogdmFsdWVzIHJlcXVpcmVzIHVzIHRvIHJlYXJyYW5nZSBvdXIKdGhpbmtpbmcgYSBiaXQuIFNvIGxldCdzIGZpcnN0IGdldCBzdHJhaWdodCB3aGF0IHdlJ3JlIGRvaW5nIHdpdGggZnJlcXVlbnRpc3QKaW5mZXJlbmNlLiBJbiBmcmVxdWVudGlzdCBpbmZlcmVuY2Ugd2Ugc2V0IHNvbWUgcGFyYW1ldGVyIHRvIGEgY2VydGFpbiB2YWx1ZQooJFx0aGV0YSQpLCB3ZSB0aGVuIGdlbmVyYXRlIGRhdGEgZnJvbSBpbWFnaW5hcnkgZXhwZXJpbWVudHMgdXNpbmcgdGhhdApwYXJhbWV0ZXIgc2V0dGluZywgYW5kIHdlIHRoZW4gY29tcGFyZSBvdXIgZGF0YSB0byB0aGUgZGF0YSBmcm9tIHRob3NlCmV4cGVyaW1lbnRzLiBXZSB0aGVuIGFzayB0aGUgcXVlc3Rpb246ICJHaXZlbiB0aGF0IHBhcmFtZXRlciB2YWx1ZSwgaG93CnN1cnByaXNpbmcgaXMgb3VyIGRhdGE/IiBBdCBubyBwb2ludCBhcmUgd2UgbWFraW5nIGluZmVyZW5jZXMgKmFib3V0IHRoZSB2YWx1ZSoKb2YgJFx0aGV0YSQuIFdlICoqc2V0KiogdGhlIHZhbHVlLCBhbmQgd2UgYXNrIGEgcXVlc3Rpb24gYWJvdXQgb3VyIGRhdGEgaW4KcmVsYXRpb24gdG8gKiphbGwgdGhlIHBvc3NpYmxlIGRhdGEqKiB0aGF0IG1pZ2h0IGJlIGdlbmVyYXRlZC4KClRvIHRoaW5rIGFib3V0IHdoYXQgYW4gYWx0ZXJuYXRpdmUgbWlnaHQgbG9vayBsaWtlLCBsZXQgdXMgdGhpbmsgYmFjayB0byBvdXIKZWFybGllciBleGFtcGxlIG9uIHRoZSBkaWZmZXJlbnQgbWVhbmluZ3Mgb2YgcHJvYmFiaWxpdHkuIFdpdGggKnAqLXZhbHVlcyB3ZQp0aG91Z2h0IGFib3V0IHByb2JhYmlsaXR5IGluIHRlcm1zIG9mIHJlbGF0aXZlIGZyZXF1ZW5jeS4gV2Ugd2VyZSBhc2tpbmcgImhvdwpvZnRlbj8iIHF1ZXN0aW9ucy4gQnV0IEkgYWxzbyBtZW50aW9uZWQgYW5vdGhlciBleGFtcGxlLiBUaGUgZXhhbXBsZSBvZiBiZWluZwo5MCUgc3VyZSB0aGF0IHRoZSBhY2N1c2VkIGNvbW1pdHRlZCBhIGNyaW1lLiBJZiB3ZSB3YW50IHRvIGJlIHJhdGlvbmFsIGh1bWFucywKd2hlbiB3ZSBtYWtlIGNsYWltcyBsaWtlIHRoaXMgd2hhdCB3ZSB1c3VhbGx5IGRvIGlzIGV4YW1pbmUgdGhlIGV2aWRlbmNlLiBXZQoqKmNvbXBhcmUqKiB3aGV0aGVyIHRoZXJlIGlzIG1vcmUgZXZpZGVuY2UgZm9yIHRoZSBhY2N1c2VkJ3MgZ3VpbHQgb3IgdGhlCmFjY3VzZWQncyBpbm5vY2VuY2UuIFRoYXQgaXMsIHdlIHRha2UgdGhlIGNvdXJ0cm9vbSBldmlkZW5jZSBhbmQgZXhhbWluZQp3aGV0aGVyIGl0IHN1cHBvcnRzIGh5cG90aGVzaXMgMSAodGhlIGFjY3VzZWQgaXMgZ3VpbHR5KSBvciBoeXBvdGhlc2lzIDIgKHRoZQphY2N1c2VkIGlzIGlubm9jZW50KS4gVG8gZG8gdGhpcyB3ZSBiYWxhbmNlIG9mIHByb2JhYmlsaXRpZXMuIElzIGlzIG1vcmUKcHJvYmFibGUgdGhhdCB3ZSdkIHNlZSB0aGlzIGV2aWRlbmNlIGlmIGh5cG90aGVzaXMgMSB3YXMgdHJ1ZSwgb3IgaXMgaXQgbW9yZQpwcm9iYWJsZSB0aGF0IHdlJ2Qgc2VlIHRoaXMgZXZpZGVuY2UgaWYgaHlwb3RoZXNpcyAyIHdhcyB0cnVlPyAoSW4gYSBjaXZpbAp0cmlhbCB3ZSdkIGp1c3Qgd2VpZ2ggdXAgdGhlIHByb2JhYmlsaXRpZXMsIGJ1dCBpbiBhIGNyaW1pbmFsIHRyaWFsIHdlJ2QgaGF2ZQp0byBhbHNvIGV4YW1pbmUgd2hldGhlciB0aGlzIGRpZmZlcmVuY2UgaW4gcHJvYmFiaWxpdGllcyBleGNlZWRzIHNvbWUKdGhyZXNob2xkLiBXZSdsbCBsZWF2ZSB0aGlzIGlzc3VlIG9mIHRocmVzaG9sZHMgZm9yIG5vdykuIE1pZ2h0IHdlIGJlIGFibGUgdG8KYXBwbHkgdGhlIHNhbWUga2luZCBvZiB0aGlua2luZyB0byBzdGF0aXN0aWNhbCBldmlkZW5jZT8KClRvIHVuZGVyc3RhbmQgdGhlIGNvbmNlcHQgb2Ygc3RhdGlzdGljYWwgZXZpZGVuY2UsIGxldCdzIGdvIGJhY2sgdG8gb3VyIGNvaW4KZmxpcHBpbmcgZXhhbXBsZS4gSW4gb3VyIGNvaW4gZmxpcHBpbmcgZXhhbXBsZSwgd2UgY29sbGVjdGVkIDEwIGZsaXBzIGFuZCBmb3VuZAo4IGhlYWRzIGFuZCAyIHRhaWxzLiBPdXIgZnJlcXVlbnRpc3QgYW5hbHlzaXMgYXNrZWQgc29tZXRoaW5nIGxpa2UsICJpcyB0aGlzCmRhdGEgc3VycHJpc2luZz8iLiBCdXQgd2UgY291bGQgYXNrIGFub3RoZXIgcXVlc3Rpb24uIFRoYXQgcXVlc3Rpb24gbWlnaHQgZ28Kc29tZXRoaW5nIGxpa2UgdGhpczogIklzIGl0IG1vcmUgbGlrZWx5IHRoYXQgdGhlICoqYmlhcyBpcyAwLjYqKiBvciB0aGF0IHRoZQoqKmJpYXMgaXMgMC44KiogZ2l2ZW4gdGhhdCB3ZSdkIG9idGFpbmVkIDggaGVhZHMgaW4gMTAgZmxpcHM/IgoKVG8gdHJ5IGFuZCBhbnN3ZXIgdGhpcyBxdWVzdGlvbiwgd2UnbGwgYWdhaW4gY3JlYXRlIHNvbWUgc2ltdWxhdGlvbnMuIFdlJ2xsCnN0YXJ0IGJ5IGNyZWF0aW5nIHR3byAqKnNhbXBsaW5nIGRpc3RyaWJ1dGlvbnMqKi4gRm9yIG5vdyB3ZSdsbCBrZWVwIHRoaW5ncwpzaW1wbGUgYW5kIHdlJ2xsIGNyZWF0ZSB0aGVzZSBzYW1wbGluZyBkaXN0cmlidXRpb25zIG9uIHRoZSBhc3N1bXB0aW9uIHRoYXQgSQppbnRlbmRlZCB0byBmbGlwIHRoZSBjb2luIDEwIHRpbWVzLiBUbyBjcmVhdGUgb3VyIHNhbXBsaW5nIGRpc3RyaWJ1dGlvbnMgd2UnbGwKZmlyc3Qgc2V0ICRcdGhldGEkIHRvIDAuNiBhbmQgcnVuIHRoZSBzaW11bGF0aW9ucywgYW5kIHRoZW4gd2UnbGwgc2V0ICRcdGhldGEkCnRvIDAuOCBhbmQgcnVuIHRoZSBzaW11bGF0aW9ucy4gSSBrbm93IHRoZSBkaXN0cmlidXRpb24gdGhleSdsbCBmb2xsb3csIHNvIEknbGwKanVzdCBjb21wdXRlIHRoZSBkaXN0cmlidXRpb25zIGRpcmVjdGx5IHJhdGhlciB0aGFuIGFjdHVhbGx5IHJ1bm5pbmcgdGhlCnNpbXVsYXRpb25zLgoKYGBge3J9CiMgZmxpcCB0aGUgY29pbiBuIHRpbWVzIGFuZCB0aGVuIGNvdW50IHVwIHRoZSBoZWFkcy4KIyB0aHJlZSBwYXJhbWV0ZXJzIG5lZWQgdG8gYmUgc2V0CiMgMS4gdGhlIG51bWJlciBvZiBmbGlwcyAobl9mbGlwcykKIyAyLiB0aGUgcHJvYmFiaWxpdHkgb2YgaGVhZHMgKHByX2hlYWRzKQojIDMuIHRoZSBudW1iZXIgb2YgaGVhZHMgaW4gb3VyIG9ic2VydmF0aW9uIChvYnNfaGVhZHMpCgpjb2luX2ZsaXBfdjEgPC0gZnVuY3Rpb24obl9mbGlwcywgcHJfaGVhZHMsIG9ic19oZWFkcykgewogIHBtYXBfZGYoCiAgICB0aWJibGUoaGVhZHMgPSAwOm5fZmxpcHMsIGZsaXBzID0gbl9mbGlwcywgcHJfaGVhZHMgPSBwcl9oZWFkcyksCiAgICBmdW5jdGlvbihoZWFkcywgZmxpcHMsIHByX2hlYWRzKSB7CiAgICAgIHRpYmJsZSgKICAgICAgICBmbGlwcyA9IGZsaXBzLCBoZWFkcyA9IGhlYWRzLAogICAgICAgIGZyZXEgPSBkYmlub20oaGVhZHMsIGZsaXBzLCBwcl9oZWFkcykKICAgICAgKQogICAgfQogICkgJT4lICMgZ2V0IHRoZSBmcmVxdWVuY3kKICAgIG11dGF0ZShvdXJfb2IgPSBjYXNlX3doZW4oCiAgICAgIGZsaXBzID09IG5fZmxpcHMgJiBoZWFkcyA9PSBvYnNfaGVhZHMgfiBUUlVFLAogICAgICBUUlVFIH4gRkFMU0UKICAgICkpICMgbWFyayBvdXIgb2JzZXJ2YXRpb24KfQoKCgoKYGBgCgpXZSBjYW4gZHJhdyB0aGUgZGlzdHJpYnV0aW9ucyBvZiB0aGUgcG9zc2libGUgZGF0YSB0aGF0IHdvdWxkIG9jY3VyIGZvcgpkaWZmZXJlbnQgdmFsdWVzIG9mICRQcl97XG1hdGhybXtoZWFkc319ID0gXHRoZXRhJC4gSW4gZWFjaCBvZiB0aGUgcGxvdHMsIG91cgphY3R1YWwgb2JzZXJ2YXRpb24gd2lsbCBiZSBoaWdobGlnaHRlZC4gQWx0aG91Z2ggd2UncmUgInNpbXVsYXRpbmciIGFsbApwb3NzaWJsZSBvYnNlcnZhdGlvbnMsIHlvdSdsbCBzZWUgdGhhdCB3ZSdyZSBvbmx5IGdvaW5nIHRvIGNhcmUgYWJvdXQgb3VyCioqYWN0dWFsKiogb2JzZXJ2YXRpb24uIFdlIHdpbGwgd2FudCB0byBrbm93IHRoZSByZWxhdGl2ZSBmcmVxdWVuY3kgd2l0aCB3aGljaAoqKnRoYXQqKiByZXN1bHQgb2NjdXJzLCBub3QgdGhlIGZyZXF1ZW5jeSBvZiByZXN1bHRzIHRoYXQgZGlkbid0IGJ1dCBtaWdodCd2ZQpvY2N1cnJlZC4gSSdtIGdvaW5nIHRvIGRyYXcgc2V2ZXJhbCBkaXN0cmlidXRpb25zIG5vdCBqdXN0IHR3byB0aGF0IGNvcnJlc3BvbmQKdG8gdGhlIHZhbHVlcyBvZiAkXHRoZXRhJCB0aGF0IHdlJ3JlIGludGVyZXN0ZWQgaW4uCgpgYGB7cn0KIyBkcmF3IGRpc3RyaWJ1dGlvbnMgb2YgdGhlIGRhdGEgZm9yIHZhcmlvdXMgdmFsdWVzIG9mIHByX2hlYWRzIGZvciB2ZXJzaW9uIDEKIyAoZmxpcCBuIHRpbWVzKQoKbl9mbGlwcyA8LSAxMAoKcHJfaGVhZHNfdmFsdWVzIDwtIGMoMC4yLCAwLjQsIDAuNiwgMC44KSAjIHNldCBvdXIgcHJfaGVhZHMgdmFsdWVzCgpvYnNfaGVhZHMgPC0gOAoKIyBtYWtlIHRoZSBwbG90cwpjb2luX2ZsaXBfdjFfcGxvdHMgPC0gcG1hcCgKICB0aWJibGUobl9mbGlwcyA9IG5fZmxpcHMsIHByX2hlYWRzID0gcHJfaGVhZHNfdmFsdWVzLCBvYnNfaGVhZHMgPSBvYnNfaGVhZHMpLAogIGZ1bmN0aW9uKG5fZmxpcHMsIHByX2hlYWRzLCBvYnNfaGVhZHMpIHsKICAgIGNvaW5fZmxpcF92MShuX2ZsaXBzLCBwcl9oZWFkcywgb2JzX2hlYWRzKSAlPiUKICAgICAgZ2dwbG90KGFlcyh4ID0gaGVhZHMsIHkgPSBmcmVxKSkgKwogICAgICBnZW9tX2xpbmUoYWxwaGEgPSAuMjUpICsKICAgICAgZ2VvbV9wb2ludChhZXMoY29sb3VyID0gb3VyX29iKSwgc2l6ZSA9IDMpICsKICAgICAgc2NhbGVfY29sb3VyX21hbnVhbCgKICAgICAgICBndWlkZSA9ICJub25lIiwKICAgICAgICB2YWx1ZXMgPSBjKCJUUlVFIiA9ICJibGFjayIsICJGQUxTRSIgPSAiZ3JleSIpCiAgICAgICkgKwogICAgICBsYWJzKAogICAgICAgIHggPSBnbHVlOjpnbHVlKCJudW1iZXIgb2YgaGVhZHMgaW4ge25fZmxpcHN9IGZsaXBzIiksCiAgICAgICAgeSA9ICJyZWxhdGl2ZSBmcmVxdWVuY3kiLAogICAgICAgIHRpdGxlID0gZ2x1ZTo6Z2x1ZSgiUHIoaGVhZHMpID0ge3ByX2hlYWRzfSIpCiAgICAgICkgKwogICAgICBzY2FsZV94X2NvbnRpbnVvdXMoYnJlYWtzID0gYyhzZXEoMCwgbl9mbGlwcywgMSkpKSArCiAgICAgIHNjYWxlX3lfY29udGludW91cyhsaW1pdHMgPSBjKDAsIC41KSkgKwogICAgICB0aGVtZV9taW5pbWFsKCkgKwogICAgICBOVUxMCiAgfQopCgojIG1ha2UgdGhlIHBsb3RzIHByZXR0eSBhbmQgYXJyYW5nZSB0aGVtCgoocGF0Y2h3b3JrOjp3cmFwX3Bsb3RzKGNvaW5fZmxpcF92MV9wbG90cywgbnJvdyA9IDIpICsKICBwbG90X2Fubm90YXRpb24odGFnX2xldmVscyA9ICJBIikpCgoKCmBgYAoKTGV0J3MgdGFrZSB0aGVzZSBwbG90cyBhbmQgY3JlYXRlIGEgbmV3IG9uZSBvdXQgb2YgdGhlbS4gU2luY2Ugd2UncmUganVzdAppbnRlcmVzdGVkIGluICoqb3VyIHNwZWNpZmljIG9ic2VydmF0aW9uKiogd2UnbGwgdGFrZSBhbGwgdGhlIG1hcmtlZCBwb2ludHMgYW5kCnB1dCB0aGVtIG9uIGEgcGxvdCBvZiB0aGVpciBvd24uIE5vdyB3ZSdsbCBzdGlsbCBoYXZlIHJlbGF0aXZlIGZyZXF1ZW5jeSBvbiB0aGUKeS1heGlzLCBidXQgb24gdGhlIHgtYXhpcyB3ZSB3b24ndCBoYXZlIHRoZSBvYnNlcnZhdGlvbiBhbnltb3JlIChiZWNhdXNlIHdlJ3JlCm9ubHkgZm9jdXNlZCBvbiBvbmUgc3BlY2lmaWMgb3V0Y29tZSkuIEluc3RlYWQsIHdlJ2xsIGhhdmUgJFx0aGV0YSQgb24gdGhlCngtYXhpcy4KCmBgYHtyfQojIGZpcnN0IHNldCBvdXIgb2JzZXJ2YXRpb24gYWdhaW4KbnVtYmVyX29mX2hlYWRzIDwtIDgKbnVtYmVyX29mX2ZsaXBzIDwtIDEwCgojIGFuZCBzZXQgdGhlIHJhbmdlIG9mIGJpYXMgdG8gY29uc2lkZXIKcHJfaGVhZHNfcmFuZ2UgPC0gc2VxKDAsIDEsIC4xKSAjIDAvMTAsIDEvMTAgLi4uIDkvMTAsIDEwLzEwCgojIHRyYW5zbGF0ZSBvdXIgb2JzZXJ2YXRpb24gaW50byB0aGUgcGFyYW1ldGVycyBuZWVkZWQgZm9yIHZlcnNpb24gMQojIGdlbmVyYXRlIHRoZSBkYXRhIGFuZCBwdWxsIG91dCB0aGUgcmVsYXRpdmUgZnJlcXVlbmN5IG9mIG91ciBzcGVjaWZpYwojIG9ic2VydmF0aW9uCgpuX2ZsaXBzIDwtIG51bWJlcl9vZl9mbGlwcwpvYnNfaGVhZHMgPC0gbnVtYmVyX29mX2hlYWRzCmxpa2VsaWhvb2RfdjEgPC0gbWFwX2RmKHByX2hlYWRzX3JhbmdlLCBmdW5jdGlvbih4KSB7CiAgY29pbl9mbGlwX3YxKG5fZmxpcHMsIHgsIG9ic19oZWFkcykgJT4lCiAgICBmaWx0ZXIob3VyX29iID09IFRSVUUpICU+JQogICAgc2VsZWN0KGZyZXEpICU+JQogICAgbXV0YXRlKHByX2hlYWRzID0geCkKfSkKCgoKCgpgYGAKCmBgYHtyfQojIG5vdyBhY3R1YWxseSBkcmF3IHRoZSBwbG90CgpsaWtlbGlob29kX3YxICU+JSBnZ3Bsb3QoYWVzKHggPSBwcl9oZWFkcywgeSA9IGZyZXEpKSArCiAgZ2VvbV9wb2ludCgpICsKICBnZW9tX2xpbmUoKSArCiAgdGhlbWVfbWluaW1hbCgxMikgKwogIHNjYWxlX3hfY29udGludW91cyhuYW1lID0gIlByIGhlYWRzIiwgYnJlYWtzID0gc2VxKDAsIDEsIC4yKSkgKwogIHNjYWxlX3lfY29udGludW91cyhsaW1pdHMgPSBjKDAsIC40KSwgbmFtZSA9ICJyZWxhdGl2ZSBmcmVxdWVuY3kiKSArCiAgbGFicygKICAgIHRpdGxlID0gZ2x1ZTo6Z2x1ZSgKICAgICAgImxpa2VsaWhvb2QgZnVuY3Rpb24gZm9yIHtudW1iZXJfb2ZfaGVhZHN9IiwKICAgICAgIiBoZWFkcyBpbiB7bnVtYmVyX29mX2ZsaXBzfSBmbGlwcyIKICAgICksCiAgICBzdWJ0aXRsZSA9IGdsdWU6OmdsdWUoInN0b3BwaW5nIGFmdGVyIHtudW1iZXJfb2ZfZmxpcHN9IikKICApCgoKCmBgYAoKVGhpcyBuZXcgcGxvdCB0aGF0IHdlJ3JlIGNyZWF0ZWQgaWxsdXN0cmF0ZXMgd2hhdCdzIGtub3cgYXMgdGhlICoqbGlrZWxpaG9vZCoqCmZ1bmN0aW9uLiBUaGUgbGlrZWxpaG9vZCBmdW5jdGlvbiBkZXNjcmliZXMgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHZhbHVlcyBvZgp0aGUgcGFyYW1ldGVyIGFuZCAqKm91ciBkYXRhKiouIEl0J3MgbWFkZSB1cCBvZiBzbGljZXMgb2YgdGhlIHNhbXBsaW5nCmRpc3RyaWJ1dGlvbi10aGUgc2xpY2VzIHRoYXQgY29ycmVzcG9uZCB0byBvdXIgYWN0dWFsIG9ic2VydmF0aW9uLiBSZW1lbWJlcgp0aGF0IHdoZW4gd2Ugd2VyZSBkb2luZyBpbmZlcmVuY2Ugd2l0aCB0aGUgc2FtcGxpbmcgZGlzdHJpYnV0aW9uIHdlIHdlcmUKbG9va2luZyBhdCB0aGUgZXh0cmVtZSB0YWlscyBvZiB0aGUgc2FtcGxpbmcgZGlzdHJpYnV0aW9uLiBUaGF0IGlzLCB3ZSB3ZXJlCmludGVyZXN0ZWQgaW4gdGhlIGVudGlyZSBzaGFwZSBvZiB0aGUgc2FtcGxpbmcgZGlzdHJpYnV0aW9uLiBOb3cgd2UncmUgaW5zdGVhZApvbmx5IGludGVyZXN0ZWQgaW4gdGhlIHRoaW4gc2xpY2UgdGhhdCBjb3JyZXNwb25kcyB0byBvdXIgb2JzZXJ2YXRpb24uCgojIyBEb2luZyBpbmZlcmVuY2Ugd2l0aCBsaWtlbGlob29kcwoKVGhlIGxpa2VsaWhvb2QgcGxheXMgYSBrZXkgcm9sZSBpbiBCYXllc2lhbiBpbmZlcmVuY2UuIEluZmVyZW5jZXMgb24gdGhlIGJhc2lzCm9mIGxpa2VsaWhvb2RzIGFyZSBkZXJpdmVkIGZyb20gd2hhdCBpcyBrbm93biBhdCB0aGUgKmxhdyBvZiBsaWtlbGlob29kKi4KU2ltcGx5IHN0YXRlZCwgdGhlICpsYXcgb2YgbGlrZWxpaG9vZCogc2F5cyB0aGF0IGZvciBhIGdpdmVuIHBhaXIgb2YKaHlwb3RoZXNlcy0tLWZvciBleGFtcGxlLCAkXG1hdGhjYWx7SH1fMSQgdGhhdCB0aGUgY29pbiBiaWFzIGlzCiRQcl9cbWF0aHJte2hlYWRzfT0wLjYkIGFuZCAkXG1hdGhjYWx7SH1fMiQgdGhhdCB0aGUgY29pbiBiaWFzIGlzCiRQcl9cbWF0aHJte2hlYWRzfT0wLjgkLS0tdGhlbiBkYXRhIHN1cHBvcnQgJFxtYXRoY2Fse0h9XzEkIG92ZXIKJFxtYXRoY2Fse0h9XzIkIGlmIHRoZSBsaWtlbGlob29kIG9mICRcbWF0aGNhbHtIfV8xJCBleGNlZWRzIHRoYXQgb2YKJFxtYXRoY2Fse0h9XzIkLiBPciwgcHV0IGFub3RoZXIgd2F5LCBpZiBvdXIgZGF0YSB3b3VsZCBiZSBwcm9kdWNlZCBtb3JlIG9mdGVuCmlmICRcbWF0aGNhbHtIfV8xJCB3ZXJlIHRydWUgdGhhbiBpZiAkXG1hdGhjYWx7SH1fMiQgd2VyZSB0cnVlLCB0aGVuIHRoZSBkYXRhCnByb3ZpZGUgc3VwcG9ydCBmb3IgJFxtYXRoY2Fse0h9XzEkIG92ZXIgJFxtYXRoY2Fse0h9XzIkIChTZWUgSGFja2luZywgMTk2NSwKQ2hhcHRlciA1LCBmb3IgYm90aCBmb3JtdWxhdGlvbnMpLgoKSWYgdGhpcyBkZWZpbml0aW9uIG1pZ2h0IHNlZW0gYSBsaXR0bGUgb3BhcXVlLCBidXQgd2UgY2FuIHJlYWQgdGhlc2UgbGlrZWxpaG9vZAp2YWx1ZXMgc3RyYWlnaHQgb2ZmIG91ciBsaWtlbGlob29kIHBsb3QuIFRoZSBoZWlnaHQgb2YgdGhlIGxpa2VsaWhvb2QgcGxvdCwgYXQKZWFjaCB2YWx1ZSBvZiAkXHRoZXRhJCB0ZWxscyB5b3Ugb3VyIGRhdGEgd291bGQgYmUgcHJvZHVjZWQgYnkgdGhhdCB2YWx1ZSBvZgokXHRoZXRhJC4gSWYgdGhlIGxpa2VsaWhvb2QgZnVuY3Rpb24gaXMgaGlnaGVyIGF0ICRcdGhldGE9MC44JCB0aGFuCiRcdGhldGE9MC42JCB0aGVuIG91ciBkYXRhIHdvdWxkIGJlIHByb2R1Y2VkIG1vcmUgb2Z0ZW4gaWYgJFx0aGV0YSQgd2FzIDAuOAp0aGFuIGl0IHdvdWxkIGJlIGlmICRcdGhldGEkIHdhcyAwLjYuIENvbnNlcXVlbnRseSwgb3VyIGRhdGEgc3VwcG9ydCB0aGUKaHlwb3RoZXNpcyB0aGF0ICRcdGhldGE9MC44JCAqb3ZlciogdGhlIGh5cG90aGVzaXMgJFx0aGV0YT0wLjYkLiBBIGtleSBwb2ludApoZXJlLCB0aGF0J3Mgd29ydGggc3RyZXNzaW5nIGFnYWluLCBpcyB0aGF0IHRoaXMgaXMgYSBjb21wYXJpc29uLiBEb2VzIHRoaXMKZGF0YSBzdXBwb3J0IHRoaXMgb25lIHNwZWNpZmljIGh5cG90aGVzaXMgb3ZlciB0aGlzIG90aGVyIHNwZWNpZmljIGh5cG90aGVzaXMuCldoYXQgeW91J3JlIGRvaW5nIGhlcmUgaXMgKndlaWdoaW5nIHVwIHByb2JhYmlsaXRpZXMqIGp1c3QgbGlrZSB5b3Ugd291bGQgZG8gaW4KYSBjb3VydHJvb20uCgojIyMgQSBicmllZiBkZXRvdXIgYmFjayB0byBzYW1wbGluZyBydWxlcwoKQmVmb3JlIHdlIGNvbnRpbnVlLCBsZXQncyBqdXN0IGJhY2sgdG8gc29tZXRoaW5nIGZyb20gdGhlIHByZXZpb3VzIHNlY3Rpb24uIEkKbWFkZSBhIGJpZyBkZWFsIGFib3V0IGhvdyBvdXIgc2FtcGxpbmcgcnVsZXMgY2hhbmdlIHRoZSBzaGFwZSBvZiB0aGUgc2FtcGxpbmcKZGlzdHJpYnV0aW9uLCBhbmQgaG93IHRoaXMgY2hhbmdlcyB0aGUgaW5mZXJlbmNlcyB0aGF0IHdlIG1ha2UgZXZlbiBpZiB0aGVzZQpzYW1wbGluZyBydWxlcyBkb24ndCBjaGFuZ2Ugb3VyIGRhdGEuIEJ1dCBkbyBkaWZmZXJlbnQgc2FtcGxpbmcgcnVsZXMgY2hhbmdlCnRoZSBsaWtlbGlob29kLiBUbyB0ZXN0IHRoaXMgb3V0LCB3ZSdsbCBnZW5lcmF0ZSBhIG5ldyBzZXQgb2Ygc2FtcGxpbmcKZGlzdHJpYnV0aW9ucyB1c2luZyB0aGUgb3RoZXIgc2FtcGxpbmcgcnVsZSAoc2FtcGxpbmcgdW50aWwgd2UgZ2V0IDIgaGVhZHMpLgpBbmQgZnJvbSB0aGVzZSBzYW1wbGluZyBkaXN0cmlidXRpb25zIHdlJ2xsIGdlbmVyYXRlIHNvbWUgbGlrZWxpaG9vZHMuCgpgYGB7cn0KCiMgZnVuY3Rpb24gdjIgInNpbXVsYXRlcyIgcmVzdWx0cyBmcm9tIHRoZSB2ZXJzaW9uIHdoZXJlIHlvdQojIGZsaXAgdGhlIGNvaW4gdW50aWwgaXQgY29tZXMgdXAgdGFpbHMgbiB0aW1lcy4KIyB0aHJlZSBwYXJhbWV0ZXJzIG5lZWQgdG8gYmUgc2V0CiMgMS4gdGhlIG51bWJlciBvZiB0YWlscyB0byBzdG9wIGF0IChuX3RhaWxzKQojIDIuIHRoZSBwcm9iYWJpbGl0eSBvZiBoZWFkcyAocHJfaGVhZHMpCiMgMy4gdGhlIG51bWJlciBvZiBmbGlwcyBpbiBvdXIgb2JzZXJ2YXRpb24gKG9ic19mbGlwcykKCmNvaW5fZmxpcF92MiA8LSBmdW5jdGlvbihuX3RhaWxzLCBwcl9oZWFkcywgb2JzX2ZsaXBzKSB7CiAgcG1hcF9kZigKICAgIHRpYmJsZSgKICAgICAgdGFpbHMgPSBuX3RhaWxzLAogICAgICBwcl9oZWFkcyA9IHByX2hlYWRzLAogICAgICBmbGlwcyA9IDA6KG9ic19mbGlwcyArIDQpCiAgICApLCAjIGlucHV0IHZhbHVlcwogICAgZnVuY3Rpb24odGFpbHMsIHByX2hlYWRzLCBmbGlwcykgewogICAgICB0aWJibGUoCiAgICAgICAgZmxpcHMgPSBmbGlwcywgdGFpbHMgPSB0YWlscywKICAgICAgICBmcmVxID0gZG5iaW5vbShmbGlwcyAtIHRhaWxzLCB0YWlscywgMSAtIHByX2hlYWRzKQogICAgICApCiAgICB9CiAgKSAlPiUKICAgIG11dGF0ZShvdXJfb2IgPSBjYXNlX3doZW4oCiAgICAgIGZsaXBzID09IG9ic19mbGlwcyAmIHRhaWxzID09IHRhaWxzIH4gVFJVRSwKICAgICAgVFJVRSB+IEZBTFNFKSkgIyBtYXJrIG91ciBvYnNlcnZhdGlvbiAKICAgICAgfSAKCgoKCmBgYAoKYGBge3J9CiMgZHJhdyBkaXN0cmlidXRpb25zIG9mIHRoZSBkYXRhIGZvciB2YXJpb3VzIHZhbHVlcyBvZiBwcl9oZWFkcyBmb3IgdmVyc2lvbiAyCiMgKGZsaXAgdW50aWwgbiB0YWlscykKCm5fdGFpbHMgPC0gMgpuX2ZsaXBzIDwtIDEwIApwcl9oZWFkc192YWx1ZXMgPC0gYygwLjIsIDAuNCwgMC42LCAwLjgpICMgc2V0IG91ciBwcl9oZWFkcwpvYnNfZmxpcHMgPC0gMTAKIyBtYWtlIHRoZSBwbG90cwpjb2luX2ZsaXBfdjJfcGxvdHMgPC0gcG1hcCgKICB0aWJibGUobl90YWlscyA9IG5fdGFpbHMsIHByX2hlYWRzID0gcHJfaGVhZHNfdmFsdWVzLCBvYnNfZmxpcHMgPSBvYnNfZmxpcHMpLAogIGZ1bmN0aW9uKG5fdGFpbHMsIHByX2hlYWRzLCBvYnNfZmxpcHMpIHsKICAgIGNvaW5fZmxpcF92MihuX3RhaWxzLCBwcl9oZWFkcywgb2JzX2ZsaXBzKSAlPiUKICAgICAgZ2dwbG90KGFlcyh4ID0gZmxpcHMsIHkgPSBmcmVxKSkgKwogICAgICBnZW9tX2xpbmUoYWxwaGEgPSAuMjUsIG5hLnJtID0gVFJVRSkgKwogICAgICBnZW9tX3BvaW50KGFlcyhjb2xvdXIgPSBvdXJfb2IpLCBzaXplID0gMywgbmEucm0gPSBUUlVFKSArCiAgICAgIHNjYWxlX2NvbG91cl9tYW51YWwoCiAgICAgICAgZ3VpZGUgPSAibm9uZSIsCiAgICAgICAgdmFsdWVzID0gYygiVFJVRSIgPSAiYmxhY2siLCAiRkFMU0UiID0gImdyZXkiKQogICAgICApICsKICAgICAgbGFicygKICAgICAgICB4ID0gZ2x1ZTo6Z2x1ZSgibnVtYmVyIG9mIGZsaXBzIHVudGlsIHtuX3RhaWxzfSB0YWlscyIpLAogICAgICAgIHkgPSAicmVsYXRpdmUgZnJlcXVlbmN5IiwKICAgICAgICB0aXRsZSA9IGdsdWU6OmdsdWUoIlByIGhlYWRzID0ge3ByX2hlYWRzfSIpCiAgICAgICkgKwogICAgICBzY2FsZV94X2NvbnRpbnVvdXMoYnJlYWtzID0gc2VxKDIsIDEyLCAyKSwgbGltaXRzID0gYygyLCAxMikpICsKICAgICAgc2NhbGVfeV9jb250aW51b3VzKGxpbWl0cyA9IGMoMCwgLjg1KSkgKwogICAgICB0aGVtZV9taW5pbWFsKCkgKwogICAgICBOVUxMCiAgfQopCgoKKHBhdGNod29yazo6d3JhcF9wbG90cyhjb2luX2ZsaXBfdjJfcGxvdHMsIG5yb3cgPSAyKSArCiAgcGxvdF9hbm5vdGF0aW9uKHRhZ19sZXZlbHMgPSAiQSIpKQoKCgpgYGAKCldlIGNhbiBzZWUgdGhhdCB0aGVzZSBzYW1wbGluZyBkaXN0cmlidXRpb25zIGxvb2sgdmVyeSBkaWZmZXJlbnQgdG8gdGhlCnNhbXBsaW5nIGRpc3RyaWJ1dGlvbnMgdGhhdCB3ZSBnZW5lcmF0ZWQgYWJvdmUuIEJ1dCB3aGF0IHdlJ3JlIGludGVyZXN0ZWQgaW4KYXJlIGp1c3QgdGhlIGhpZ2hsaWdodGVkIHBvaW50cywgYmVjYXVzZSB3ZSdsbCB1c2UgdGhlc2UgdG8gZ2VuZXJhdGUgb3VyCmxpa2VsaWhvb2QuCgpgYGB7cn0KIyB0cmFuc2xhdGUgb3VyIG9ic2VydmF0aW9uIGludG8gdGhlIHBhcmFtZXRlcnMgbmVlZGVkIGZvciB2ZXJzaW9uIDIKIyBnZW5lcmF0ZSB0aGUgZGF0YSBhbmQgb3V0IHRoZSByZWxhdGl2ZSBmcmVxdWVuY3kgb2Ygb3VyIHNwZWNpZmljIG9ic2VydmF0aW9uCm5fdGFpbHMgPC0gbnVtYmVyX29mX2ZsaXBzIC0gbnVtYmVyX29mX2hlYWRzCm9ic19mbGlwcyA8LSBudW1iZXJfb2ZfZmxpcHMKbGlrZWxpaG9vZF92MiA8LSBtYXBfZGYocHJfaGVhZHNfcmFuZ2UsIGZ1bmN0aW9uKHgpIHsKICBzdXBwcmVzc1dhcm5pbmdzKHsgIyBzdXByZXNzIHdhcm5pbmdzIGFib3V0IGltcG9zc2libGUgdmFsdWVzCiAgICBjb2luX2ZsaXBfdjIobl90YWlscywgeCwgb2JzX2ZsaXBzKSAlPiUKICAgICAgZmlsdGVyKG91cl9vYiA9PSBUUlVFKSAlPiUKICAgICAgc2VsZWN0KGZyZXEpICU+JQogICAgICBtdXRhdGUocHJfaGVhZHMgPSB4KSAlPiUKICAgICAgbXV0YXRlKGZyZXEgPSBpZmVsc2UoaXMubmEoZnJlcSksIDAsIGZyZXEpKQogIH0pCn0pICMgcmVwbGFjZSBOYU4gKGltcG9zc2libGUgdmFsdWVzKSB3aXRoIDAgZm9yIHBsb3R0aW5nCgojIG5vdyBhY3R1YWxseSBkcmF3IHRoZSBwbG90CgpsaWtlbGlob29kX3YyICU+JQogIGdncGxvdChhZXMoeCA9IHByX2hlYWRzLCB5ID0gZnJlcSkpICsKICBnZW9tX3BvaW50KCkgKwogIGdlb21fbGluZSgpICsKICB0aGVtZV9taW5pbWFsKDEyKSArCiAgc2NhbGVfeF9jb250aW51b3VzKG5hbWUgPSAiUHIgaGVhZHMiLCBicmVha3MgPSBzZXEoMCwgMSwgLjIpKSArCiAgc2NhbGVfeV9jb250aW51b3VzKGxpbWl0cyA9IGMoMCwgLjQpLCBuYW1lID0gInJlbGF0aXZlIGZyZXF1ZW5jeSIpICsKICBsYWJzKAogICAgdGl0bGUgPSBnbHVlOjpnbHVlKAogICAgICAibGlrZWxpaG9vZCBmdW5jdGlvbiBmb3Ige251bWJlcl9vZl9oZWFkc30gIiwKICAgICAgImluIHtudW1iZXJfb2ZfZmxpcHN9IgogICAgKSwKICAgIHN1YnRpdGxlID0gZ2x1ZTo6Z2x1ZSgic3RvcHBpbmcgYWZ0ZXIge25fdGFpbHN9IHRhaWxzIikKICApCgoKCmBgYAoKVGhlIG5ldyBsaWtlbGlob29kIG1pZ2h0IGxvb2sgZGlmZmVyZW50IHRvIHRoZSBvbmUgd2UgZ2VuZXJhdGVkIGVhcmxpZXIsIGJ1dAppdCdzIGp1c3QgYSBzY2FsZWQgdmVyc2lvbiBvZiB0aGUgZWFybGllciBvbmUuIFdlIGNhbiBjaGVjayB0aGlzIGJ5IGp1c3QKcmVzY2FsaW5nIHRoZSB0d28gbGlrZWxpaG9vZHMgc28gdGhhdCB0aGV5IGJvdGggaGF2ZSBhIG1heCBvZiAxLgoKYGBge3J9CiMgbm93IGRyYXcgc2NhbGVkIHZlcnNpb25zIG9mIHRoZSBwbG90cwoKbGlrZWxpaG9vZF92MV9wbG90IDwtIGxpa2VsaWhvb2RfdjEgJT4lCiAgbXV0YXRlKGZyZXEgPSBmcmVxIC8gbWF4KGZyZXEpKSAlPiUKICBnZ3Bsb3QoYWVzKHggPSBwcl9oZWFkcywgeSA9IGZyZXEpKSArCiAgZ2VvbV9wb2ludCgpICsKICBnZW9tX2xpbmUoKSArCiAgdGhlbWVfbWluaW1hbCgxMikgKwogIHNjYWxlX3hfY29udGludW91cyhuYW1lID0gIlByIGhlYWRzIiwgYnJlYWtzID0gc2VxKDAsIDEsIC4yKSkgKwogIHNjYWxlX3lfY29udGludW91cyhsaW1pdHMgPSBjKDAsIDEpLCBuYW1lID0gInJlbGF0aXZlIGZyZXF1ZW5jeSIpICsKICBsYWJzKAogICAgdGl0bGUgPSBnbHVlOjpnbHVlKAogICAgICAibGlrZWxpaG9vZCBmdW5jdGlvbiBmb3Ige251bWJlcl9vZl9oZWFkc30gIiwKICAgICAgImhlYWRzIGluIHtudW1iZXJfb2ZfZmxpcHN9IGZsaXBzIgogICAgKSwKICAgIHN1YnRpdGxlID0gZ2x1ZTo6Z2x1ZSgic3RvcHBpbmcgYWZ0ZXIge251bWJlcl9vZl9mbGlwc30iKQogICkKCmxpa2VsaWhvb2RfdjJfcGxvdCA8LSBsaWtlbGlob29kX3YyICU+JQogIG11dGF0ZShmcmVxID0gZnJlcSAvIG1heChmcmVxKSkgJT4lCiAgZ2dwbG90KGFlcyh4ID0gcHJfaGVhZHMsIHkgPSBmcmVxKSkgKwogIGdlb21fcG9pbnQoKSArCiAgZ2VvbV9saW5lKCkgKwogIHRoZW1lX21pbmltYWwoMTIpICsKICBzY2FsZV94X2NvbnRpbnVvdXMobmFtZSA9ICJQciBoZWFkcyIsIGJyZWFrcyA9IHNlcSgwLCAxLCAuMikpICsKICBzY2FsZV95X2NvbnRpbnVvdXMobGltaXRzID0gYygwLCAxKSwgbmFtZSA9ICJyZWxhdGl2ZSBmcmVxdWVuY3kiKSArCiAgbGFicygKICAgIHRpdGxlID0gZ2x1ZTo6Z2x1ZSgKICAgICAgImxpa2VsaWhvb2QgZnVuY3Rpb24gZm9yIHtudW1iZXJfb2ZfaGVhZHN9ICIsCiAgICAgICJpbiB7bnVtYmVyX29mX2ZsaXBzfSIKICAgICksCiAgICBzdWJ0aXRsZSA9IGdsdWU6OmdsdWUoInN0b3BwaW5nIGFmdGVyIHtuX3RhaWxzfSB0YWlscyIpCiAgKQoKCihsaWtlbGlob29kX3YxX3Bsb3QgLyBsaWtlbGlob29kX3YyX3Bsb3QgKwogIHBsb3RfYW5ub3RhdGlvbih0YWdfbGV2ZWxzID0gIkEiKSkgJT4lCiAgc2hvdygpCgoKCmBgYAoKTm93IHRoYXQgdGhleSdyZSBiZWVuIHJlc2NhbGVkIHdlIGNhbiBzZWUgdGhhdCB0aGV5J3JlIHRoZXkgc2FtZS4gTm90ZSB0aGF0CnNjYWxpbmcgY2hhbmdlcyB0aGUgYWJzb2x1dGUgZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgb24gdGhlIGxpa2VsaWhvb2QsIGJ1dCBpdApkb2Vzbid0IGNoYW5nZSB0aGUgKnJlbGF0aXZlKiBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludHMuIFRoYXQncyB3aHkgd2UgdGFrZQp0aGUgKnJlbGF0aXZlIGRpc3RhbmNlKiBvciB0aGUgKnJhdGlvKiBvZiB0aGUgaGVpZ2h0cyBvbiB0aGUgbGlrZWxpaG9vZApmdW5jdGlvbiByYXRoZXIgdGhhbiBqdXN0IHRha2luZyB0aGUgYWJzb2x1dGUgZGlzdGFuY2UuIFRoaXMgbWVhbnMgc2NhbGluZwpkb2Vzbid0IG1hdHRlci4KCk1vcmUgaW1wb3J0YW50bHksIGhvd2V2ZXIsIHdoYXQgdGhpcyBkZW1vbnN0cmF0ZXMgaXMgdGhhdCB3aGVuIHdlIGRvIGluZmVyZW5jZQp3aXRoICoqbGlrZWxpaG9vZHMqKiBpbnN0ZWFkIG9mICoqc2FtcGxpbmcgZGlzdHJpYnV0aW9ucyoqLCB0aGluZ3MgbGlrZQpzdG9wcGluZyBydWxlcywgZGF0YSB0aGF0IHdhc24ndCBjb2xsZWN0ZWQgYnV0IG1pZ2h0IGhhdmUgYmVlbiBjb2xsZWN0ZWQsIGFuZAphbGwgdGhvc2Ugb3RoZXIgc29ydHMgb2YgdGhpbmdzIHRoYXQgd2VyZSB0cmlja3kgYWJvdXQgKnAqLXZhbHVlcyBkb24ndCBjb21lIGluCnRvIHBsYXkuIFdlIG9ubHkgaGF2ZSB0aGUgd29ycnkgYWJvdXQgKip0aGUgZGF0YSB3ZSBhY3R1YWxseSBoYXZlKiosIGFuZCB0aGUKKipsaWtlbGlob29kKiogd2hpY2ggcmVsYXRlcyAqKnBhcmFtZXRlciB2YWx1ZXMqKiB0byAqKmRhdGEqKi4KCkhvdyBkbyBsaWtlbGlob29kIGZ1bmN0aW9ucyBnaXZlIHVzIGEgbm90aW9uIG9mIHN0YXRpc3RpY2FsIGV2aWRlbmNlPyBPbmUgd2F5CnRvIHVuZGVyc3RhbmQgc3RhdGlzdGljYWwgZXZpZGVuY2UgaXMgdG8gY29tcGFyZSBob3cgbGlrZWx5IG91ciBkYXRhIGlzIHdoZW4KJFByX3tcbWF0aHJte2hlYWRzfX0kID0gMC42IGFuZCB3aGVuICRQcl97XG1hdGhybXtoZWFkc319JCA9IDAuOCBieSBzdWJ0cmFjdGluZwp0aGUgdHdvIGxpa2VsaWhvb2QgdmFsdWVzLiBCdXQgYmVjYXVzZSBsaWtlbGlob29kcyBjYW4gYmUgb24gZGlmZmVyZW50IHNjYWxlcywKcmF3IGRpc3RhbmNlcyBjYW4gYmUgbWlzbGVhZGluZy4gSW5zdGVhZCwgbGV0IHVzIHRha2UgdGhlICoqcmF0aW8qKi4gVGhhdCB3YXksCndlIGNhbiB0ZWxsIGhvdyBtYW55ICoqdGltZXMqKiBiaWdnZXIgb25lIHZhbHVlIGlzIHJlbGF0aXZlIHRvIHRoZSBvdGhlci4gVGhhdAppcywgYXJlIHRoZSB0d28gdmFsdWVzIHRoZSBzYW1lIHNpemU/IElzIG9uZSB0d2ljZSBhcyBiaWcsIHRocmVlIHRpbWVzIGJpZ2dlciwKZXRjLiBCeSB0YWtpbmcgdGhlIHJhdGlvIHdlIGNhbiBub3cgYW5zd2VyIHRoZSBxdWVzdGlvbiwgImhvdyBtYW55IHRpbWVzIG1vcmUKbGlrZWx5IGlzIG91ciBvYnNlcnZhdGlvbiB3aGVuICRQcl97XG1hdGhybXtoZWFkc319JCA9IDAuNiByZWxhdGl2ZSB0byB3aGVuCiRQcl97XG1hdGhybXtoZWFkc319JCA9IDAuOD8iIFdlIGNhbiByZWFkIHRoaXMgYXMgdGhlIHN1cHBvcnQgb3VyIGRhdGEgZ2l2ZXMgdG8KdGhlc2UgdHdvIGh5cG90aGVzZXMuCgpUaGUgZmlyc3Qgc2V0IG9mIHBsb3RzIGxvb2tlZCB2ZXJ5IGRpZmZlcmVudC4gVGhpcyBkaWZmZXJlbmNlIGlzIG1haW5seSBpbgp0ZXJtcyBvZiB0aGUgcmVsYXRpdmUgZnJlcXVlbmN5IG9mIHJlc3VsdHMgdGhhdCAqKndlIGRpZG4ndCBvYnNlcnZlKiouIFRoZQpyZWxhdGl2ZSBmcmVxdWVuY3kgb2YgdGhlIHJlc3VsdHMgKip3ZSBkaWQgb2JzZXJ2ZSoqIGlzIGFjdHVhbGx5IHZlcnkgc2ltaWxhci4KSW4gdGhlIHBsb3RzIGFib3ZlIHRoZXkgbWF5IG5vdCBsb29rIHRoYXQgc2ltaWxhciwgYnV0IHRoZXkgYXJlIGluIGZhY3QganVzdApzY2FsZWQgdmVyc2lvbnMgb2YgZWFjaCBvdGhlci4gV2UgY2FuIHNjYWxlIHRoZW0gc28gdGhhdCB0aGV5IG1hdGNoLiBJbiB0aGUKc2NhbGVkIHZlcnNpb25zIGJlbG93LCBlYWNoIHBsb3QgaXMganVzdCBzY2FsZWQgc28gdGhhdCB0aGUgcGVhayBpcyBhdCAxLgoKYGBge3J9CiMgbm93IGRyYXcgc2NhbGVkIHZlcnNpb25zIG9mIHRoZSBwbG90cwoKbGlrZWxpaG9vZF92MV9wbG90IDwtIGxpa2VsaWhvb2RfdjEgJT4lCiAgbXV0YXRlKGZyZXEgPSBmcmVxIC8gbWF4KGZyZXEpKSAlPiUKICBnZ3Bsb3QoYWVzKHggPSBwcl9oZWFkcywgeSA9IGZyZXEpKSArCiAgZ2VvbV9wb2ludCgpICsKICBnZW9tX2xpbmUoKSArCiAgdGhlbWVfbWluaW1hbCgxMikgKwogIHNjYWxlX3hfY29udGludW91cyhuYW1lID0gIlByIGhlYWRzIiwgYnJlYWtzID0gc2VxKDAsIDEsIC4yKSkgKwogIHNjYWxlX3lfY29udGludW91cyhsaW1pdHMgPSBjKDAsIDEpLCBuYW1lID0gInJlbGF0aXZlIGZyZXF1ZW5jeSIpICsKICBsYWJzKAogICAgdGl0bGUgPSBnbHVlOjpnbHVlKAogICAgICAibGlrZWxpaG9vZCBmdW5jdGlvbiBmb3Ige251bWJlcl9vZl9oZWFkc30gIiwKICAgICAgImhlYWRzIGluIHtudW1iZXJfb2ZfZmxpcHN9IGZsaXBzIgogICAgKSwKICAgIHN1YnRpdGxlID0gZ2x1ZTo6Z2x1ZSgic3RvcHBpbmcgYWZ0ZXIge251bWJlcl9vZl9mbGlwc30iKQogICkKCmxpa2VsaWhvb2RfdjJfcGxvdCA8LSBsaWtlbGlob29kX3YyICU+JQogIG11dGF0ZShmcmVxID0gZnJlcSAvIG1heChmcmVxKSkgJT4lCiAgZ2dwbG90KGFlcyh4ID0gcHJfaGVhZHMsIHkgPSBmcmVxKSkgKwogIGdlb21fcG9pbnQoKSArCiAgZ2VvbV9saW5lKCkgKwogIHRoZW1lX21pbmltYWwoMTIpICsKICBzY2FsZV94X2NvbnRpbnVvdXMobmFtZSA9ICJQciBoZWFkcyIsIGJyZWFrcyA9IHNlcSgwLCAxLCAuMikpICsKICBzY2FsZV95X2NvbnRpbnVvdXMobGltaXRzID0gYygwLCAxKSwgbmFtZSA9ICJyZWxhdGl2ZSBmcmVxdWVuY3kiKSArCiAgbGFicygKICAgIHRpbGUgPSBnbHVlOjpnbHVlKAogICAgICAibGlrZWxpaG9vZCBmdW5jdGlvbiBmb3Ige251bWJlcl9vZl9oZWFkc30gIiwKICAgICAgImluIHtudW1iZXJfb2ZfZmxpcHN9IgogICAgKSwKICAgIHN1YnRpdGxlID0gZ2x1ZTo6Z2x1ZSgic3RvcHBpbmcgYWZ0ZXIge25fdGFpbHN9IHRhaWxzIikKICApCgoKKGxpa2VsaWhvb2RfdjFfcGxvdCAvIGxpa2VsaWhvb2RfdjJfcGxvdCArCiAgcGxvdF9hbm5vdGF0aW9uKHRhZ19sZXZlbHMgPSAiQSIpKSAlPiUKICBzaG93KCkKCgoKYGBgCgpUaGUgcGxvdHMgZGVzY3JpYmUgdGhlIHJlbGF0aXZlIGZyZXF1ZW5jeSBvZiBvYnNlcnZpbmcgKipvdXIgcmVzdWx0KiogZ2l2ZW4KZGlmZmVyZW50IHZhbHVlcyBvZiB0aGUgY29pbiBiaWFzLiBUaGV5IGJvdGggc2hvdyB0aGF0IG91ciBvYnNlcnZhdGlvbiAoOCBoZWFkcwppbiAxMCBmbGlwcykgd291bGQgYmUgdGhlIG1vc3QgZnJlcXVlbnQgb2JzZXJ2YXRpb24gaWYgdGhlIGNvaW4gd2FzIGluIGZhY3QKYmlhc2VkIHRvIHNob3cgOCBoZWFkcyBpbiAxMCBmbGlwcy4gV2UgY2FuIGNhbGwgdGhlc2UgcGxvdHMgKipsaWtlbGlob29kCmZ1bmN0aW9ucyoqIGFuZCB3ZSBjYW4gY2FsbCB0aGUgdmFsdWUgb2YgdGhlIGJpYXMgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcGVhawpvZiB0aGUgbGlrZWxpaG9vZCBmdW5jdGlvbiB0aGUgKiptYXhpbXVtIGxpa2VsaWhvb2QgZXN0aW1hdGUqKi4KCkJlZm9yZSB3ZSBnbyBmdXJ0aGVyLCBpdCBpcyB3b3J0aHdoaWxlIHRvIHBheSBhdHRlbnRpb24gdG8gdGhlIGtleSBkaWZmZXJlbmNlCmJldHdlZW4gdGhlc2UgcGxvdHMgYW5kIHRoZSBwbG90cyB3ZSd2ZSBkcmF3biB1cCB1bnRpbCBub3cuIEluIGFsbCBvdXIgcHJldmlvdXMKcGxvdHMgd2UgcGxvdHRlZCB0aGUgKipkYXRhKiogeW91IHdvdWxkIGV4cGVjdCBmb3IgYSAqKmdpdmVuIHZhbHVlKiogb2YgYQpwYXJhbWV0ZXIgKGUuZy4sIHRoZSBjb2luIGJpYXMsIG9yIHdoZXJlIHRoZSB0cmVhc3VyaW5nIGh1bnRpbmcgZGV2aWNlIGFycm93CnBvaW50cyB3aGVuIG5vdCBhcm91bmQgdHJlYXN1cmUpLiBUaGVzZSBwbG90cyBzaG93IHNvbWV0aGluZyB2ZXJ5IGRpZmZlcmVudC4KVGhleSBzaG93ICoqcmVsYXRpdmUgZnJlcXVlbmN5IG9mIG91ciBvYnNlcnZhdGlvbioqIGZvciAqKmRpZmZlcmVudCBwYXJhbWV0ZXIKdmFsdWVzKiouIFB1dCBhbm90aGVyIHdheTogSW4gdGhlIGZpcnN0IHNldCBvZiBwbG90cywgd2UgZml4IG91ciBwYXJhbWV0ZXIKdmFsdWUgd2hpbGUgdGhlIGRhdGEgdmFyaWVzLiBJbiB0aGUgc2Vjb25kIHNldCBvZiBwbG90cywgd2UgZml4IG91ciBkYXRhIHdoaWxlCnRoZSBwYXJhbWV0ZXIgdmFyaWVzLiBPciBwdXQgeWV0IGFub3RoZXIgd2F5OiBUaGUgZmlyc3Qgc2V0IG9mIHBsb3RzIGFsbG93cyB1cwp0byBtYWtlIGluZmVyZW5jZXMgYWJvdXQgKipkYXRhKiotLS1pcyBvdXIgZGF0YSBzdXJwcmlzaW5nIG9uIHRoZSBhc3N1bXB0aW9uCnRoYXQgdGhlIHBhcmFtZXRlciBoYXMgYSBzcGVjaWZpYyB2YWx1ZS4gVGhlIHNlY29uZCBzZXQgb2YgcGxvdHMgd2lsbCBhbGxvdyB1cwp0byBtYWtlIGluZmVyZW5jZXMgYWJvdXQgKipwYXJhbWV0ZXJzKiotLS13aGF0IGlzIHRoZSBtb3N0IGxpa2VseSB2YWx1ZSBvZiB0aGUKcGFyYW1ldGVyIGdpdmVuIG91ciBzcGVjaWZpYyBkYXRhLgoKIyMgU29tZSBmZWF0dXJlcyBvZiBsaWtlbGlob29kcwoKQmVmb3JlIHdlIG1vdmUgdG8gdGFsayBhYm91dCBob3cgdG8gdXNlIGxpa2VsaWhvb2RzIGluIGEgbm90aW9uIG9mIHN0YXRpc3RpY2FsCmV2aWRlbmNlLCBpdCdzIHdvcnRoIG5vdGluZyBhIGNvdXBsZSBvZiB0aGluZ3MgYWJvdXQgbGlrZWxpaG9vZHMuIEZpcnN0LApsaWtlbGlob29kcyBhcmUgKipub3QqKiBwcm9iYWJpbGl0eSBkaXN0cmlidXRpb25zLiBUaGlzIG11Y2ggc2hvdWxkIGFscmVhZHkgYmUKb2J2aW91cyBieSBsb29raW5nIGF0IHRoZSB0d28gdW5zY2FsZWQgbGlrZWxpaG9vZHMgYWJvdmUuIFByb2JhYmlsaXR5CmRpc3RyaWJ1dGlvbnMgaGF2ZSBhbiBhcmVhIHVuZGVyIHRoZSBjdXJ2ZSBvZiAxLiBUaGF0IGlzLCBwcm9iYWJpbGl0eQpkaXN0cmlidXRpb25zIGRlc2NyaWJlIHRoZSBwcm9iYWJpbGl0eSBvZiBldmVudHMgd2hlcmUgdGhlIHByb2JhYmlsaXR5IG9mIGV2ZXJ5CnBvc3NpYmxlIGV2ZW50IGlzIGdpdmVuIChhbmQgd2hlcmUgYXQgbGVhc3Qgb25lIG9mIHRoZSBldmVudHMgKiptdXN0Kiogb2NjdXIpLgpTdW1taW5nIHRoZXNlIHZhbHVlcyBnaXZlcyB0aGUgcHJvYmFiaWxpdHkgb2YgKiphbiBldmVudCoqIChhbnkgZXZlbnQpCm9jY3VycmluZy4gVGhpcyB2YWx1ZSBpcyAxLiBBbmQgaW4gZmFjdCwgaXQncyBnaXZlbiBieSBvdXIgZGVmaW5pdGlvbiBiZWNhdXNlCm91ciBkZWZpbml0aW9uIHNhaWQgdGhhdCBvbmUgb2YgdGhlIGV2ZW50cyAqKm11c3Qgb2NjdXIqKi4gT3VyIHR3byBsaWtlbGlob29kCmZ1bmN0aW9ucyBkbyBub3QgKipuZWNlc3NhcmlseSoqIGhhdmUgYW4gYXJlYSB1bmRlcm5lYXRoIGVxdWFsIHRvIDEuIEZvciBvdXIKdHdvIGxpa2VsaWhvb2RzIGZyb20gdGhlIGNvaW4gZmxpcHBpbmcgZXhhbXBsZSwgdGhpcyBpcyBjbGVhci4gQm90aCBjYW4ndCBoYXZlCmFuIGFyZWEgZXF1YWwgdG8gMSBiZWNhdXNlIHRoZXkgYm90aCBvYnZpb3VzbHkgaGF2ZSBkaWZmZXJlbnQgYXJlYXMuIEluc3RlYWQsCndoYXQgdGhlIGxpa2VsaWhvb2QgZGVzY3JpYmVzIGlzIHRoZSBwcm9iYWJpbGl0eSBvZiBhICoqc3BlY2lmaWMgZXZlbnQqKgpvY2N1cnJpbmcgb3ZlciB0aGUgcmFuZ2Ugb2YgcG9zc2libGUgcGFyYW1ldGVyIHZhbHVlcy4gT2YgY291cnNlLCBwcm9iYWJpbGl0eQphbmQgbGlrZWxpaG9vZCBhcmUgcmVsYXRlZCBjb25jZXB0cy4gT25lIGlzIGp1c3QgaW4gdGhlIGludmVyc2Ugb2YgdGhlIG90aGVyLAp3aGljaCBpcyB3aHkgbGlrZWxpaG9vZCBpcyBzb21ldGltZXMgY2FsbGVkICJpbnZlcnNlIHByb2JhYmlsaXR5Ii4KCkJlbG93IHdlIHNlZSBzb21lIGV4YW1wbGVzIG9mIGhvdyB0aGUgYXJlYSB1bmRlciB0aGUgY3VydmUgY2FuIHZhcnkuCgpgYGB7cn0KIyBwbG90IHNvbWUgbGlrZWxpaG9vZCBmdW5jdGlvbnMKCnNjZW5hcmlvcyA8LSBsaXN0KAogIHAxID0gbGlzdChoZWFkcyA9IDAsIGZsaXBzID0gMTApLAogIHAyID0gbGlzdChoZWFkcyA9IDEsIGZsaXBzID0gMiksCiAgcDMgPSBsaXN0KGhlYWRzID0gMCwgZmxpcHMgPSAyKSwKICBwNCA9IGxpc3QoaGVhZHMgPSAyLCBmbGlwcyA9IDUpCikKCnBsb3RzIDwtIG1hcChzY2VuYXJpb3MsIGZ1bmN0aW9uKHgpIHsKICBkYXRhX21vZGVsIDwtIGJheWVzcGxheTo6bGlrZWxpaG9vZCgiYmlub21pYWwiLAogICAgc3VjY2Vzc2VzID0geCRoZWFkcywKICAgIHRyaWFscyA9IHgkZmxpcHMKICApCiAgYXVjIDwtIGludGVncmF0ZShkYXRhX21vZGVsJGxpa2VsaWhvb2RfZnVuY3Rpb24sIDAsIDEpJHZhbHVlCiAgcGxvdChkYXRhX21vZGVsKSArCiAgICBsYWJzKAogICAgICB0aXRsZSA9IGdsdWU6OmdsdWUoImxpa2VsaWhvb2QgZm9yIHt4JGhlYWRzfSBoZWFkcyBpbiB7eCRmbGlwc30gZmxpcHMiKSwKICAgICAgc3VidGl0bGUgPSBnbHVlOjpnbHVlKCJhcmVhIHVuZGVyIGN1cnZlIGlzIHtyb3VuZChhdWMsMyl9IikKICAgICkgKwogICAgdGhlbWVfbWluaW1hbCgxMikgKwogICAgTlVMTAp9KQoKcGF0Y2h3b3JrOjp3cmFwX3Bsb3RzKHBsb3RzKQoKCgpgYGAKCkl0IGlzIGFsc28gd29ydGggbm90aW5nIHRoYXQgaW4gYWRkaXRpb24gdG8gaGF2aW5nIGEgcGVhayBhdCBhIGNlcnRhaW4gcG9pbnQsCmxpa2VsaWhvb2QgZnVuY3Rpb25zIGFsc28gaGF2ZSBhIHNwcmVhZC4gV2UnbGwgYmUgdGFsa2luZyBhYm91dCB0aGlzIHNwcmVhZCwgb3IKdmFyaWFuY2UsIGF0IGEgbGF0ZXIgcG9pbnQuCgpMZXQncyBkbyB0aGlzIG91ciBvYnNlcnZhdGlvbiBhbmQgdGhlIGxpa2VsaWhvb2RzIGZvciB0aGUgdHdvIHZlcnNpb25zIG9mIHRoZQpjb2luLWZsaXBwaW5nIGV4YW1wbGUuIEFnYWluLCBJIHdvbid0IHJlbHkgb24gc2ltdWxhdGlvbnMgKGFsdGhvdWdoIEkgY291bGQpLgpJbnN0ZWFkLCBJIGtub3cgdGhhdCB0aGUgdHdvIGxpa2VsaWhvb2RzIGFyZSBkcmF3biBmcm9tIGEgKipiaW5vbWlhbCoqIGFuZCBhCioqbmVnYXRpdmUgYmlub21pYWwqKiBkaXN0cmlidXRpb24sIHJlc3BlY3RpdmVseSwgc28gSSdsbCBqdXN0IGdlbmVyYXRlIHRoZQp2YWx1ZXMuCgpgYGB7cn0KIyBkZWZpbmUgYSBmdW5jdGlvbiBmb3IgbmljZSBwcmludGluZwpwcmludF9saWtlbGlob29kIDwtIGZ1bmN0aW9uKGgxLCBoMiwgbGlrZWxpaG9vZF8xLCBsaWtlbGlob29kXzIpIHsKICBsaWtlbGlob29kXzFfdGV4dCA8LSBnbHVlOjpnbHVlKAogICAgIlRoZSBsaWtlbGlob29kIGZvciAkXFxtYXRoY2Fse3tIfX1fMSQgKCRQcl97e2hlYWRzfX0kID0ge2gxfSkgIiwKICAgICJpcyB7cm91bmQobGlrZWxpaG9vZF8xLDIpfSIKICApCiAgbGlrZWxpaG9vZF8yX3RleHQgPC0gZ2x1ZTo6Z2x1ZSgKICAgICJUaGUgbGlrZWxpaG9vZCBmb3IgJFxcbWF0aGNhbHt7SH19XzIkICgkUHJfe3toZWFkc319JCA9IHtoMn0pICIsCiAgICAiaXMge3JvdW5kKGxpa2VsaWhvb2RfMiwyKX0iCiAgKQogIHJhdGlvX3RleHQgPC0gZ2x1ZTo6Z2x1ZSgKICAgICJUaGUgbGlrZWxpaG9vZCByYXRpbyBpcyB7cm91bmQobGlrZWxpaG9vZF8xIC8gbGlrZWxpaG9vZF8yLCAyKX0iCiAgKQogIGludGVycHJldGF0aW9uIDwtIGdsdWU6OmdsdWUoCiAgICAiVGhlIGRhdGEgYXJlIHtyb3VuZChsaWtlbGlob29kXzEgLyBsaWtlbGlob29kXzIsIDIpfSB0aW1lcyBtb3JlICIsCiAgICAicHJvYmFibGUgdW5kZXIgJFxcbWF0aGNhbHt7SH19XzEkIHRoYW4gJFxcbWF0aGNhbHt7SH19XzIkIgogICkKICBwYXN0ZShjKGxpa2VsaWhvb2RfMV90ZXh0LCBsaWtlbGlob29kXzJfdGV4dCwgcmF0aW9fdGV4dCwgaW50ZXJwcmV0YXRpb24pLAogICAgY29sbGFwc2UgPSAiXG5cbiIKICApCn0KCgoKYGBgCgpGaXJzdCwgZm9yIHZlcnNpb24gMSwgdGhlICoqYmlub21pYWwqKiBzYW1wbGluZyBydWxlLgoKYGBge3J9CiMgc2V0IG91dCBvYnNlcnZhdGlvbgpuIDwtIDEwICMgbnVtYmVyIG9mIGZsaXBzCmggPC0gOCAjIG51bWJlciBvZiBoZWFkcwp0IDwtIG4gLSBoICMgbnVtYmVyIG9mIHRhaWxzCgojIHNldCBvdXIgdHdvIGh5cG90aGVzZXMKaDEgPC0gMC42ICMgdGhlIHByb2JhYmlsaXR5IG9mIGdldHRpbmcgaGVhZHMgaXMgMC42CmgyIDwtIDAuOCAjIHRoZSBwcm9iYWJpbGl0eSBvZiBnZXR0aW5nIGhlYWRzIGlzIDAuOAoKIyB3b3JrIG91dCB0aGUgbGlrZWxpaG9vZCB2YWx1ZXMKbGlrZWxpaG9vZF8xIDwtIGRiaW5vbShoLCBuLCBoMSkKbGlrZWxpaG9vZF8yIDwtIGRiaW5vbShoLCBuLCBoMikKCnByaW50X2xpa2VsaWhvb2QoaDEsIGgyLCBsaWtlbGlob29kXzEsIGxpa2VsaWhvb2RfMikgJT4lIGRpc3BsYXlfbWFya2Rvd24oKQoKCgpgYGAKClNlY29uZCwgZm9yIHZlcnNpb24gMSwgdGhlICoqbmVnYXRpdmUtYmlub21pYWwqKiBzYW1wbGluZyBydWxlLgoKYGBge3J9CiMgU2V0IG91ciBvYnNlcnZhdGlvbgpuIDwtIDEwICMgbnVtYmVyIG9mIGZsaXBzCmggPC0gOCAjIG51bWJlciBvZiBoZWFkcwp0IDwtIG4gLSBoICMgbnVtYmVyIG9mIHRhaWxzCgojIHNldCBvdXIgdHdvIGh5cG90aGVzZXMKaDEgPC0gMC42ICMgdGhlIHByb2JhYmlsaXR5IG9mIGdldHRpbmcgaGVhZHMgaXMgMC42CmgyIDwtIDAuOCAjIHRoZSBwcm9iYWJpbGl0eSBvZiBnZXR0aW5nIGhlYWRzIGlzIDAuOAoKIyB3b3JrIG91dCB0aGUgbGlrZWxpaG9vZCB2YWx1ZXMKbGlrZWxpaG9vZF8xIDwtIGRuYmlub20odCwgaCwgaDEpCmxpa2VsaWhvb2RfMiA8LSBkbmJpbm9tKHQsIGgsIGgyKQoKcHJpbnRfbGlrZWxpaG9vZChoMSwgaDIsIGxpa2VsaWhvb2RfMSwgbGlrZWxpaG9vZF8yKSAlPiUgZGlzcGxheV9tYXJrZG93bigpCgoKCmBgYAoKT25lIHRoaW5nIHlvdSdsbCBub3RpY2UgaXMgdGhhdCByZWdhcmRsZXNzIG9mIHRoZSBleHBlcmltZW50IHR5cGUgKGZsaXBwaW5nIDEwCnRpbWVzIG9yIGZsaXBwaW5nIHVudGlsIDIgdGFpbHMpIHRoZSBzdXBwb3J0IGZvciBvbmUgaHlwb3RoZXNpcyBvdmVyIHRoZSBvdGhlcgppcyB0aGUgc2FtZS4gVGhpcyBzaG91bGRuJ3QgYmUgc3VycHJpc2luZywgYmVjYXVzZSB3aGF0IGxlYWQgdG8gZGlmZmVyZW50CmluZmVyZW5jZXMgdW5kZXIgdGhlIGZyZXF1ZW50aXN0IGFuYWx5c2lzIHdhcyBkYXRhIHRoYXQgY291bGQndmUgb2NjdXJyZWQgYnV0CmRpZG4ndC4gU2luY2Ugd2UncmUgbm93IG9ubHkgaW50ZXJlc3RlZCBpbiB0aGUgYWN0dWFsIGV2ZW50IHRoYXQgaGFwcGVuZWQsCnRoZXNlIHBvc3NpYmxlLCBidXQgbm90IGFjdHVhbCwgZXZlbnRzIGRvbid0IGNvbWUgaW4gdG8gcGxheS4KCiMjIFRlc3RpbmcgbW9yZSBjb21wbGV4IGh5cG90aGVzZXMKCmBgYHs9aHRtbH0KPCEtLSAKCkZyb20gaGVyZSB3ZSdsbCB0YWtlIGJpdHMgZnJvbSB0aGUgcGFwZXIKClNvIGNvbXBhcmluZyBsaWtlbGlob29kcyAoYnkgdGFraW5nIHRoZWlyIHJhdGlvKSBjYW4gdGVsbCB1cyB3aGljaCBoeXBvdGhlc2lzCmlzIGJldHRlciBzdXBwb3J0ZWQgYnkgdGhlIGRhdGEuIEhvd2V2ZXIsIHRoZXJlJ3MgYSBjb3VwbGUgb2YgcHJvYmxlbXMgd2l0aAp0aGlzLiBGaXJzdCwgaG93IGRvIHdlIGtub3cgd2hlbiB3ZSBoYXZlIGVub3VnaCBldmlkZW5jZT8gVG8gYW5zd2VyIHRoaXMKcXVlc3Rpb24sIHdlJ3JlIGdvaW5nIHRvIGhhdmUgdG8gdGFrZSBpbnRvIGFjY291bnQgYSBsb3Qgb2YgYWRkaXRpb25hbCBmYWN0b3JzLgpBbmQgdGhlIGFuc3dlciB0byB0aGlzIHF1ZXN0aW9uIGlzIHByb2JhYmx5IGdvaW5nIHRvIGJlIGNvbnRleHQtZGVwZW5kZW50LiBGb3IKZXhhbXBsZSwgaWYgd2UncmUgcGxhY2luZyBiZXRzIG9uIGh5cG90aGVzZXMsIHdlJ3JlIHByb2JhYmx5IGdvaW5nIHRvIHdhbnQgdG8KdGFrZSBpbnRvIGFjY291bnQgdGhlIHJlbGF0aXZlIHBheS1vZmZzLiBJZiB3ZSdyZSB1c2luZyBldmlkZW5jZSB0byBkZWNpZGUKc29tZWJvZHkncyBndWlsdCBpbiBhIGNvdXJ0IGNhc2UsIHdlJ3JlIHByb2JhYmx5IGdvaW5nIHRvIHdhbnQgdG8gdGFrZSBpbnRvCmFjY291bnQgdGhpbmdzIGxpa2UgInJlYXNvbmFibGUgZG91YnQiLiBJbiBzaG9ydCwgdGhlcmUncyBub3QgYSBzdHJhaWdodApmb3J3YXJkIGFuc3dlciB0byB0aGlzIHF1ZXN0aW9uLCBzbyB3ZSdsbCBzZXQgaXQgYXNpZGUgZm9yIG5vdy4gSW5zdGVhZCwgd2UnbGwKdHVybiB0byB0aGUgc2Vjb25kIHByb2JsZW0uIAoKVGhlIHNlY29uZCBwcm9ibGVtIHdpdGggdGhpcyBtZXRob2QgaXMgdGhhdCBpdCBvbmx5IHdvcmtzIGZvciBjb21wYXJpbmcgdHdvCmh5cG90aGVzZXMuIFdlIGNhbiBjYW4gc2F5LCBmb3IgZXhhbXBsZSwgd2hldGhlciB0aGUgZGF0YSBzdXBwb3J0cwokUHJfe1xtYXRocm17aGVhZHN9fSQgPSAwLjUgb3ZlciB0aGUgaHlwb3RoZXNpcyAkUHJfe1xtYXRocm17aGVhZHN9fSQgPSAwLjgsCmFuZCB3ZSBjYW4gcXVhbnRpZnkgdGhpcyBsZXZlbCBvZiBzdXBwb3J0LiBCdXQgdXN1YWxseSwgd2UgYXJlIG5vdCBjb21wYXJpbmcKdHdvIHNpbXBsZSBoeXBvdGhlc2VzIGxpa2UgdGhpcy4gT3VyIGh5cG90aGVzZXMgdGFrZSBhIG1vcmUgY29tcGxleCBmb3JtIGxpa2U6CiJJcyB0aGUgY29pbiBmYWlyPyIKCkhvdyBtaWdodCB3ZSBnbyBhYm91dCBhbnN3ZXJpbmcgdGhpcyBxdWVzdGlvbj8KCkxldCdzIGZvcm1hbGlzZSB0aGlzIGlkZWEgYSBiaXQuIEZpcnN0LCB3ZSdsbCBkcm9wIHRoZSB0ZXJtaW5vbG9neQoqaHlwb3RoZXNpcyosIGFuZCByZXBsYWNlIGl0IHdpdGggKm1vZGVsKiAoZGVub3RlZCAkXG1hdGhjYWx7TX1fSCQuIEFuZCB3ZSdsbApzYXkgdGhhdCBvdXIgZGF0YSBmYXZvdXJzICRcbWF0aGNhbHtNXzF9JCBvdmVyICRcbWF0aGNhbHtNXzJ9JCBieSBhIGZhY3RvciBvZgokXGZyYWN7XG1hdGhjYWx7TX1fMX17XG1hdGhjYWx7TX1fMn0kLiBBbmQgc2Vjb25kLCB3ZSdsbCBzYXkgdGhhdCB0aGUgdmFsdWUgb2YKJFxtYXRoY2Fse019X0gkIGlzIGdvaW5nIHRvIGJlIHRoZSBhdmVyYWdlIGxpa2VsaWhvb2Qgb2YgYWxsIHRoZSAkbiQKc3ViLWh5cG90aGVzZXMgKCRcVGhldGE9XGxlZnQgXHsgXHRoZXRhXzEsIFx0aGV0YV8yLFxsZG90c1x0aGV0YV9uXHJpZ2h0IFx9JCkKdGhhdCBtYWtlIHVwICRcbWF0aGNhbHtIfV9NJC4gT3IsIAoKJCRcbWF0aGNhbHtNfV9IID0gXHN1bV97aT0xfV57bn1cbWF0aGNhbHtMfV9IKFx0aGV0YV9pfFxtYXRoYmZ7eX0pXGNkb3R7fVxmcmFjezF9e259JCQgICAKIApGcm9tIHRoaXMsIHdlIGNhbiBidWlsZCBhIG1vZGVsIG9mIGEgZmFpciBjb2luLCB3aGljaCBtaWdodCBvbmx5IGhhdmUgb25lCnN1Yi1oeXBvdGhlc2lzIChpLmUuLCAkXHRoZXRhJCA9IDAuNSkuIEFuZCB3ZSBtaWdodCB3YW50IHRvIGNvbXBhcmUgdGhhdCB0byBhCm1vZGVsIHRoYXQgc2F5cyB0aGUgY29pbiBjYW4gY2FuIGhhdmUgYSBiaWFzIHRoYXQgdGFrZXMgYW55IHZhbHVlcyBmcm9tCiRcZnJhY3swfXsxMH0kIHRvICRcZnJhY3sxMH17MTB9JCAoaS5lLiwgJFx0aGV0YSA9Clx7XGZyYWN7MH17MTB9LFxmcmFjezF9ezEwfSxcZnJhY3syfXsxMH0sXGZyYWN7M317MTB9LFxmcmFjezR9ezEwfSxcZnJhY3s1fXsxMH0sXGZyYWN7Nn17MTB9LFxmcmFjezd9ezEwfSxcZnJhY3s4fXsxMH0sXGZyYWN7OX17MTB9LFxmcmFjezEwfXsxMH1cfSQpLgoKTGV0J3MgdHJ5IHRvIGRvIHRoYXQuIFdlIGRvbid0IG5lZWQgdG8gZG8gaXQgZm9yIGJvdGggdmVyc2lvbnMgYW55IG1vcmUuIFdlIGNhbgpqdXN0IGRvIGl0IGZvciBvbmUgb2YgdGhlIHZlcnNpb25zIGJlY2F1c2Ugbm93IHdlIGtub3cgdGhhdCB0aGV5J3JlIHNhbWUhCiAKCmBgYHtyfQoKCgpgYGAKCiMjIyBBcmUgYWxsIHN1Yi1oeXBvdGhlc2VzIGVxdWFsPwogCk5vdyB0aGF0IHdlIGhhdmUgYSB3YXkgdG8gY29tcGFyZSB0d28gbW9kZWxzIHRoYXQgbWlnaHQgYmUgY29tcG9zZWQgb2Ygb25lIG9yCm1vcmUgc3ViLWh5cG90aGVzZXMsIHdlIG1pZ2h0IHJlYXNvbmFibHkgYXNrLCAiYXJlIGFsbCBzdWItaHlwb3RoZXNlcyBlcXVhbD8iLgpUaGF0IGlzLCBkbyB3ZSB3YW50IHRvIGp1c3QgdGFrZSBhIHJlZ3VsYXIgYXZlcmFnZSBvdmVyIGFsbCB0aGUgc3ViLWh5cG90aGVzZXMKb3IgbWlnaHQgd2UgaW5zdGVhZCB3YW50IHRvIHRha2UgYSAqd2VpZ2h0ZWQqIGF2ZXJhZ2U/IAogIApPbmUgZ29vZCByZWFzb24gZm9yIHRha2luZyBhICp3ZWlnaHRlZCBhdmVyYWdlKiBpcyB0aGF0IGl0IGFsbG93cyB1cyB0byB0YWtlCmludG8gYWNjb3VudCBvdXIgdmlld3MgYWJvdXQgd2hhdCBpdCAqbWVhbnMqIGZvciBhIGNvaW4gdG8gYmUgYmlhc3NlZCBvcgp1bmZhaXIuIEZvciBleGFtcGxlLCB3ZSBtaWdodCB0aGluayB0aGF0IGlmIGNvaW5zIGFyZSBiaWFzc2VkLCB0aGVuIHRoZXkncmUKbXVjaCBtb3JlIGxpa2VseSB0byBzaG93IGhlYWRzLiBPciB3ZSBtaWdodCB0aGluayB0aGF0IGlmIGEgY29pbiBpcyBiaWFzZWQsIGl0CmlzIG11Y2ggbGVzcyBsaWtlbHkgdG8gc2hvdyBoZWFkcy4gT3IgbWF5YmUgYmlhc2VkIGNvaW5zIGFyZSBvbmx5IHNsaWdodGx5IG1vcmUKbGlrZWx5IHRvIHNob3cgYSBwcmVwb25kZXJhbmNlIG9mIGhlYWRzIG9yIHRhaWxzLiBXZSBjYW4gY2FwdHVyZSB0aGlzIHZpZXcgYnkKd2VpZ2h0aW5nIHNvbWUgc3ViLWh5cG90aGVzaXMgbW9yZSB0aGFuIG90aGVycyBiZWZvcmUgdGFraW5nIG91ciBhdmVyYWdlLgogIApJbiBmYWN0LCBpbiBvdXIgZmlyc3QgY2FsY3VsYXRpb24sIHdlIGRpZCBhcHBseSBhIHdlaWdodGluZywgYnV0IGl0IHdhcyBoaWRkZW4uCkJ1dCB3ZSBjYW4gbWFrZSBpdCBleHBsaWNpdC4gRm9yICRcbWF0aGNhbHtNfV8wJCB3ZSBjYW4gZ2l2ZSB0aGUgc3ViLWh5cG90aGVzaXMKJFx0aGV0YSQgPSAwLjUgYSB3ZWlnaHQgb2YgMSwgYW5kIGFsbCBvdGhlcnMgcG9zc2libGUgc3ViLWh5cG90aGVzZXMgYSB3ZWlnaHQKb2YgMC4gRm9yICRcbWF0aGNhbHtNfV8xJCwgd2UgY2FuIGdpdmUgZWFjaCBvZiB0aGUgJG4kIHN1Yi1oeXBvdGhlc2VzIGEgd2VpZ2h0Cm9mICRcZnJhY3sxfXtufSQuIElkZWFsbHksIHdlIHdhbnQgYWxsIHRoZSB3ZWlnaHRzIHRvIHN1bSB0byAxLiBUaGlzIHdheSwgd2UKY2FuIHRoaW5rIG9mIHRoZSB3ZWlnaHRzIGFzIGEgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uLiAKICAKVXN1YWxseSB0aGVzZSB3ZWlnaHRzLCBvciB0aGUgd2VpZ2h0aW5nIGRpc3RyaWJ1dGlvbiwgaXMgcmVmZXJlZWQgdG8gYXMgYQoqKnByaW9yKiogKG9yIG9jY2FzaW9uYWxseSBhcyB0aGUgKm1vZGVsIG9mIHRoZSBoeXBvdGhlc2lzKikuIFdlIGNhbiBtYWtlIHRoZXNlCndlaWdodHMgZXhwbGljaXQgYnkgYWRkaW5nIHRoZW0gaW4gdG8gb3VyIGVxdWF0aW9uIGZvciAkXG1hdGhjYWx7TX1fSCQuIE91cgplcXVhdGlvbiBub3cgYmVjb21lczoKIAokJFxtYXRoY2Fse019X0ggPSBcc3VtX3tpPTF9XntufVxtYXRoY2Fse0x9X0goXHRoZXRhX2l8XG1hdGhiZnt5fSlcY2RvdHt9cChcdGhldGFfaSkkJCAgIAogCkxldCdzIGV4cGxpY2l0bHkgYWRkcyB0aGUgd2VpZ2h0cyB0aGF0IHdlcmUgb25seSBpbXBsaWNpdCBiZWZvcmUuIFdlJ2xsIHNlZQp0aGF0IGFkZGluZyB0aGVzZSB3ZWlnaHRzIHNjYWxlcyBkb3duIGJvdGggb3VyIGxpa2VsaWhvb2QgdmFsdWVzLCBidXQgaXQKcHJvZHVjZXMgdGhlIHJhdGlvIGFuZCBoZW5jZSB0aGUgc2FtZSByZXN1bHQuCgpgYGB7cn0KCgoKYGBgCgpOb3cgdGhhdCB3ZSdyZSBhZGRpbmcgaW4gdGhlc2UgKndlaWdodGluZyogKipwcmlvcnMqKiwgdGhlIHJhdGlvIG9mCiRcZnJhY3tcbWF0aGNhbHtNfV8xfXtcbWF0aGNhbHtNfV8yfSQgaXMgdXN1YWxseSBjYWxsZWQgYSAqKkJheWVzIGZhY3RvcioqLgpPbmNlIHdlIG1ha2UgdGhlc2Ugd2VpZ2h0aW5ncyBleHBsaWNpdCBieSBhZGRpbmcgYSAqcHJpb3IqIHdlIGNhbiBzZWUgdGhlIHRoYXQKZm9yIGEgKipwYXJ0aWN1bGFyIG9ic2VydmF0aW9uKiogb3Igc2V0IG9mIGRhdGEsIHRoZSByYXRpbywgb3IgKipCYXllcyBmYWN0b3IqKgppcyAqY29tcGxldGVseSogZGVwZW5kZW50IG9uIG91ciBjaG9pY2Ugb2YgdGhlICpwcmlvciogZm9yICRcbWF0aGNhbHtNfV8wJAphbmQgJFxtYXRoY2Fse019XzEkLiBUaGlzIGlzIHdoeSBpdCBzb21ldGltZXMgbWFrZXMgbW9yZSBzZW5zZSB0byB0aGluayBvZgoqcHJpb3JzKiBhcyAqKm1vZGVscyBvZiBoeXBvdGhlc2VzKiouIEFuZCBvdXIgKipCYXllcyBmYWN0b3IqKiB0ZWxscyB1cyB3aGljaAoqKm1vZGVsKiogaXMgYmV0dGVyIHN1cHBvcnRlZCBieSB0aGUgZGF0YS4gCgpXZSBjYW4gc2VlIHRoaXMgZGVwZW5kZW5jZSBpbiB0aGUgZXhhbXBsZSBiZWxvdy4gSW4gZWFjaCBvZiB0aGUgZm91ciBxdWFkcmFudHMsCkkndmUgaGVsZCB0aGUgRGF0YSAoJFxtYXRoYmZ7eX0kKSBhbmQgbW9kZWwgdGhhdCByZXByZXNlbnRzIHRoZSBmYWlyIGNvaW4KKCRcbWF0aGNhbHtNfV8wJCkgY29uc3RhbnQuIEhvd2V2ZXIsIEkndmUgc2ltcGx5IHZhcmllZCAkXG1hdGhjYWx7TX1fMSQuIEVhY2gKb25lIG9mIHRoZXNlICRcbWF0aGNhbHtNfV8xJCdzIHByZXNlbnRzIGRpZmZlcmVudCB2aWV3cyBvZiB3aGF0ICoqaXQgbWVhbnMgZm9yCmEgY29pbiB0byBiZSB1bmZhaXIqKi4gRWFjaCBwbG90IHNob3dzIHRoZSBkaXN0cmlidXRpb24gb2Ygd2VpZ2h0aW5ncyBhbmQgdGhlCnJlc3VsdGluZyAqKkJheWVzIGZhY3RvcioqLiBBcyB5b3UgY2FuIHNlZSwgd2hlbiB0aGUgcHJpb3IgY2hhbmdlcyB0aGUgKipCYXllcwpmYWN0b3IqKiBjaGFuZ2VzLgoKYGBge3J9CgoKCmBgYAoKVGhpcyBmYWN0IHNob3VsZG4ndCBiZSBhbGFybWluZy4gQSAqKkJheWVzIGZhY3RvcioqIGlzIGdvaW5nIHRvIHRlbGwgeW91CndoZXRoZXIgeW91ciBkYXRhIHByb3ZpZGUgZXZpZGVuY2UgZm9yICpvbmUgbW9kZWwqIG92ZXIgKmFub3RoZXIgbW9kZWwqLiBDaGFuZ2UKdGhlIG1vZGVscywgYW5kIHlvdXIgZGF0YSB3aWxsIHNheSBzb21ldGhpbmcgZGlmZmVyZW50LiBUaGlzIGFsc28gaGlnaGxpZ2h0cwp0aGF0IHRoZSB0d28gaHlwb3RoZXNlcy9tb2RlbHMgKiphbHdheXMqKiBoYXZlIHRvIGJlIHNwZWNpZmllZC4gVGhlcmUncyBubyBzdWNoCnRoaW5nIGFzICoqdGhlIG51bGwqKiBoeXBvdGhlc2lzIG9yICoqdGhlIGFsdGVybmF0aXZlKiogaHlwb3RoZXNpc+KAlG9ubHkgdGhlIHR3bwp0aGF0IGhhdmUgYmVlbiBzcGVjaWZpZWQuIAoKQmVjYXVzZSAqKkJheWVzIGZhY3RvcnMqKiBhcmUgZGVwZW5kZW50IG9uICoqcHJpb3JzKiosIGl0IHBheXMgdG8gdGhpbmsKY2FyZWZ1bGx5IGFib3V0IHRoZW0uIFRoZXJlIGFyZSBtYW55IHNjaG9vbHMgb2YgdGhvdWdodCBhYm91dCBob3cgb25lIHNob3VsZCBnbwphYm91dCBmb3JtdWxhdGluZyBwcmlvcnMuIFNvbWUgb2YgdGhlc2UgbWlnaHQgaW5jbHVkZToKCjEuIENob29zaW5nIHByaW9ycyB0aGF0IHJlZmxlY3Qgb3VyICpnZW51aW5lIGJlbGllZnMgYWJvdXQgdGhlIHN0YXRlIG9mIHRoZQogICB3b3JsZCouIEZvciBleGFtcGxlLCBvdXIgYmVsaWVmcyBhYm91dCAqKndoYXQgaXQgbWVhbnMqKiBmb3IgYSBjb2luIHRvIGJlCiAgIHVuZmFpci4gCgoyLiBDaG9vc2luZyBwcmlvcnMgdGhhdCByZWZsZWN0IG91ciBpZ25vcmFuY2UgYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSB3b3JsZC4gRm9yCiAgIGV4YW1wbGUsIG91ciBiZWxpZWYgdGhhdCB3ZSBoYXZlIG5vIGdyb3VuZHMgZm9yIGZhdm91cmluZyBvbmUgcGFyYW1ldGVyCiAgIHZhbHVlIChzdWItaHlwb3RoZXNpcykgb3ZlciBhbm90aGVyLiBXZSBtaWdodCB2aWV3IHRoaXMgYXMgZ2l2aW5nIHRoZSBkYXRhCiAgIHRoZSBiZXN0IG9wcG9ydHVuaXR5IHRvIHNwZWFrIGZvciBpdHNlbGYuIAoKMy4gQ2hvb3NpbmcgcHJpb3JzIHRoYXQgaGF2ZSBzcGVjaWZpYyAob3IgdXNlZnVsKSBtYXRoZW1hdGljYWwgcHJvcGVydGllcy4gCgo0LiBDaG9vc2luZyBwcmlvcnMgdGhhdCBoYXZlIGJlZW4gdHVuZWQgc3VjaCB0aGF0IG91ciAqKkJheWVzIGZhY3RvcioqIHRlc3RzCiAgIHdpbGwgaGF2ZSBnb29kICpmcmVxdWVudGlzdCogcHJvcGVydGllc+KAlGZvciBleGFtcGxlLCB0aGF0IHRoZXkgcHJvZHVjZSBCRnMKICAgdGhhdCBpcyBzb21lIHNlbnNlICpsaW5lIHVwKiB3aXRoICpwKi12YWx1ZXMgCgpUaGlzLCBhZ2FpbiwgIGlzIG5vdCBtZWFudCB0byBiZSBhbiBleGhhdXN0aXZlIGxpc3QuIFBlb3BsZSBtaWdodCBoYXZlIG90aGVyCnJlYXNvbnMgZm9yIGNob29zaW5nIHRoZSBwcmlvcnMgdGhleSBkby4gQW5kIHNvbWUgcHJpb3IgY2hvaWNlIG1pZ2h0IGhhdmUKbXVsdGlwbGUgbW90aXZhdGlvbnMuIEJ1dCB0aGlzIHJvdWdoIGNhdGVnb3Jpc2F0aW9uIHdpbGwgZG8gZm9yIG91ciBwdXJwb3Nlcy4KSW4gdGhlIG5leHQgc2VjdGlvbiwgd2UnbGwgZXhhbWluZSBzb21lIG9mIHRoZXNlIHN0cmF0ZWdpZXMgc28gdGhhdCB3ZSBjYW4KdW5kZXJzdGFuZCB0aGVpciBpbXBsaWNhdGlvbnMuIEFuZCB3ZSdsbCBhbHNvIHRyeSBvdXIgaGFuZCBhdCBjYWxjdWxhdGluZyBCYXllcwpmYWN0b3JzIGZvciBzb21lIGRhdGEgb2YgdGhlIHNvcnQgd2UgZ2V0IGluIHBzeWNob2xvZ3kgZXhwZXJpbWVudHMgKHJhdGhlciB0aGFuCnNpbGx5IGNvaW4gZmxpcHMhKS4gQnV0IGJlZm9yZSB3ZSBnZXQgdG8gdGhhdCwgbGV0J3MgY292ZXIgc29tZXRoaW5nIHRoYXQgd2UKaGF2ZW4ndCBjb3ZlcmVkIHlldOKAlCoqQmF5ZXMgUnVsZSoqLgoKLS0+CmBgYApUbyBhbnN3ZXIgdGhpcyBxdWVzdGlvbiwgd2UnbGwgc2V0IG91ciBwYXJhbWV0ZXIgJFx0aGV0YSQgdG8gdGhlIHZhbHVlcyBiZXR3ZWVuCjAgYW5kIDEuIEZvciBlYWNoIHNldHRpbmcsIHdlJ2xsIHNpbXVsYXRlIGEgYnVuY2ggb2YgZXhwZXJpbWVudHMsIGFuZCB0aGVuCndlJ2xsIGFzaywgImhvdyBvZnRlbiBkaWQgb3VyICoqZXhhY3QqKiByZXN1bHQgKDggaGVhZHMgaW4gMTAgZmxpcHMpIG9jY3VyIHdpdGgKdGhhdCBzZXR0aW5nIG9mICRcdGhldGEkPyIgV2UnbGwgYWxzbyBkbyBpdCB0d2ljZS4gSW4gb25lIHZlcnNpb24sIHdlIHdpbGwgZmxpcAp0aGUgY29pbiAxMCB0aW1lcy4gSW4gdGhlIG90aGVyIHZlcnNpb24sIHdlJ2xsIGNhcnJ5IG9uIGZsaXBwaW5nIHVudGlsIHdlIGdldAp0d28gdGFpbHMuIEknbSBhbHNvIGdvaW5nIHRvIGNoZWF0IHNsaWdodGx5LiBJJ20gbm90IGFjdHVhbGx5IGdvaW5nIHRvIHNpbXVsYXRlCnRoZSByZXN1bHRzLgoKYGBge3J9CiMgdHJhbnNsYXRlIG91ciBvYnNlcnZhdGlvbiBpbnRvIHRoZSBwYXJhbWV0ZXJzIG5lZWRlZCBmb3IgdmVyc2lvbiAyCiMgZ2VuZXJhdGUgdGhlIGRhdGEgYW5kIG91dCB0aGUgcmVsYXRpdmUgZnJlcXVlbmN5IG9mIG91ciBzcGVjaWZpYyBvYnNlcnZhdGlvbgpuX3RhaWxzIDwtIG51bWJlcl9vZl9mbGlwcyAtIG51bWJlcl9vZl9oZWFkcwpvYnNfZmxpcHMgPC0gbnVtYmVyX29mX2ZsaXBzCmxpa2VsaWhvb2RfdjIgPC0gbWFwX2RmKHByX2hlYWRzX3JhbmdlLCBmdW5jdGlvbih4KSB7CiAgc3VwcHJlc3NXYXJuaW5ncyh7ICMgc3VwcmVzcyB3YXJuaW5ncyBhYm91dCBpbXBvc3NpYmxlIHZhbHVlcwogICAgY29pbl9mbGlwX3YyKG5fdGFpbHMsIHgsIG9ic19mbGlwcykgJT4lCiAgICAgIGZpbHRlcihvdXJfb2IgPT0gVFJVRSkgJT4lCiAgICAgIHNlbGVjdChmcmVxKSAlPiUKICAgICAgbXV0YXRlKHByX2hlYWRzID0geCkgJT4lCiAgICAgIG11dGF0ZShmcmVxID0gaWZlbHNlKGlzLm5hKGZyZXEpLCAwLCBmcmVxKSkKICB9KQp9KSAjIHJlcGxhY2UgTmFOIChpbXBvc3NpYmxlIHZhbHVlcykgd2l0aCAwIGZvciBwbG90dGluZwoKCmBgYAo" download="03-likelihoods.Rmd"><img src="https://img.shields.io/badge/.Rmd-Download-blue"></a>
<a href="https://colab.research.google.com/github/ljcolling/bayes2022/blob/main/_notebooks/03-likelihoods.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab" /></a></p>
<p>Coming up with an alternative to <em>p</em> values requires us to rearrange our
thinking a bit. So let’s first get straight what we’re doing with frequentist
inference. In frequentist inference we set some parameter to a certain value
(<span class="math inline">\(\theta\)</span>), we then generate data from imaginary experiments using that
parameter setting, and we then compare our data to the data from those
experiments. We then ask the question: “Given that parameter value, how
surprising is our data?” At no point are we making inferences <em>about the value</em>
of <span class="math inline">\(\theta\)</span>. We <strong>set</strong> the value, and we ask a question about our data in
relation to <strong>all the possible data</strong> that might be generated.</p>
<p>To think about what an alternative might look like, let us think back to our
earlier example on the different meanings of probability. With <em>p</em>-values we
thought about probability in terms of relative frequency. We were asking “how
often?” questions. But I also mentioned another example. The example of being
90% sure that the accused committed a crime. If we want to be rational humans,
when we make claims like this what we usually do is examine the evidence. We
<strong>compare</strong> whether there is more evidence for the accused’s guilt or the
accused’s innocence. That is, we take the courtroom evidence and examine
whether it supports hypothesis 1 (the accused is guilty) or hypothesis 2 (the
accused is innocent). To do this we balance of probabilities. Is is more
probable that we’d see this evidence if hypothesis 1 was true, or is it more
probable that we’d see this evidence if hypothesis 2 was true? (In a civil
trial we’d just weigh up the probabilities, but in a criminal trial we’d have
to also examine whether this difference in probabilities exceeds some
threshold. We’ll leave this issue of thresholds for now). Might we be able to
apply the same kind of thinking to statistical evidence?</p>
<p>To understand the concept of statistical evidence, let’s go back to our coin
flipping example. In our coin flipping example, we collected 10 flips and found
8 heads and 2 tails. Our frequentist analysis asked something like, “is this
data surprising?”. But we could ask another question. That question might go
something like this: “Is it more likely that the <strong>bias is 0.6</strong> or that the
<strong>bias is 0.8</strong> given that we’d obtained 8 heads in 10 flips?”</p>
<p>To try and answer this question, we’ll again create some simulations. We’ll
start by creating two <strong>sampling distributions</strong>. For now we’ll keep things
simple and we’ll create these sampling distributions on the assumption that I
intended to flip the coin 10 times. To create our sampling distributions we’ll
first set <span class="math inline">\(\theta\)</span> to 0.6 and run the simulations, and then we’ll set <span class="math inline">\(\theta\)</span>
to 0.8 and run the simulations. I know the distribution they’ll follow, so I’ll
just compute the distributions directly rather than actually running the
simulations.</p>
<p>We can draw the distributions of the possible data that would occur for
different values of <span class="math inline">\(Pr_{\mathrm{heads}} = \theta\)</span>. In each of the plots, our
actual observation will be highlighted. Although we’re “simulating” all
possible observations, you’ll see that we’re only going to care about our
<strong>actual</strong> observation. We will want to know the relative frequency with which
<strong>that</strong> result occurs, not the frequency of results that didn’t but might’ve
occurred. I’m going to draw several distributions not just two that correspond
to the values of <span class="math inline">\(\theta\)</span> that we’re interested in.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Let’s take these plots and create a new one out of them. Since we’re just
interested in <strong>our specific observation</strong> we’ll take all the marked points and
put them on a plot of their own. Now we’ll still have relative frequency on the
y-axis, but on the x-axis we won’t have the observation anymore (because we’re
only focused on one specific outcome). Instead, we’ll have <span class="math inline">\(\theta\)</span> on the
x-axis.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>This new plot that we’re created illustrates what’s know as the <strong>likelihood</strong>
function. The likelihood function describes the relationship between values of
the parameter and <strong>our data</strong>. It’s made up of slices of the sampling
distribution-the slices that correspond to our actual observation. Remember
that when we were doing inference with the sampling distribution we were
looking at the extreme tails of the sampling distribution. That is, we were
interested in the entire shape of the sampling distribution. Now we’re instead
only interested in the thin slice that corresponds to our observation.</p>
<div id="doing-inference-with-likelihoods" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Doing inference with likelihoods</h2>
<p>The likelihood plays a key role in Bayesian inference. Inferences on the basis
of likelihoods are derived from what is known at the <em>law of likelihood</em>.
Simply stated, the <em>law of likelihood</em> says that for a given pair of
hypotheses—for example, <span class="math inline">\(\mathcal{H}_1\)</span> that the coin bias is
<span class="math inline">\(Pr_\mathrm{heads}=0.6\)</span> and <span class="math inline">\(\mathcal{H}_2\)</span> that the coin bias is
<span class="math inline">\(Pr_\mathrm{heads}=0.8\)</span>—then data support <span class="math inline">\(\mathcal{H}_1\)</span> over
<span class="math inline">\(\mathcal{H}_2\)</span> if the likelihood of <span class="math inline">\(\mathcal{H}_1\)</span> exceeds that of
<span class="math inline">\(\mathcal{H}_2\)</span>. Or, put another way, if our data would be produced more often
if <span class="math inline">\(\mathcal{H}_1\)</span> were true than if <span class="math inline">\(\mathcal{H}_2\)</span> were true, then the data
provide support for <span class="math inline">\(\mathcal{H}_1\)</span> over <span class="math inline">\(\mathcal{H}_2\)</span> (See Hacking, 1965,
Chapter 5, for both formulations).</p>
<p>If this definition might seem a little opaque, but we can read these likelihood
values straight off our likelihood plot. The height of the likelihood plot, at
each value of <span class="math inline">\(\theta\)</span> tells you our data would be produced by that value of
<span class="math inline">\(\theta\)</span>. If the likelihood function is higher at <span class="math inline">\(\theta=0.8\)</span> than
<span class="math inline">\(\theta=0.6\)</span> then our data would be produced more often if <span class="math inline">\(\theta\)</span> was 0.8
than it would be if <span class="math inline">\(\theta\)</span> was 0.6. Consequently, our data support the
hypothesis that <span class="math inline">\(\theta=0.8\)</span> <em>over</em> the hypothesis <span class="math inline">\(\theta=0.6\)</span>. A key point
here, that’s worth stressing again, is that this is a comparison. Does this
data support this one specific hypothesis over this other specific hypothesis.
What you’re doing here is <em>weighing up probabilities</em> just like you would do in
a courtroom.</p>
<div id="a-brief-detour-back-to-sampling-rules" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> A brief detour back to sampling rules</h3>
<p>Before we continue, let’s just back to something from the previous section. I
made a big deal about how our sampling rules change the shape of the sampling
distribution, and how this changes the inferences that we make even if these
sampling rules don’t change our data. But do different sampling rules change
the likelihood. To test this out, we’ll generate a new set of sampling
distributions using the other sampling rule (sampling until we get 2 heads).
And from these sampling distributions we’ll generate some likelihoods.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>We can see that these sampling distributions look very different to the
sampling distributions that we generated above. But what we’re interested in
are just the highlighted points, because we’ll use these to generate our
likelihood.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>The new likelihood might look different to the one we generated earlier, but
it’s just a scaled version of the earlier one. We can check this by just
rescaling the two likelihoods so that they both have a max of 1.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Now that they’re been rescaled we can see that they’re they same. Note that
scaling changes the absolute distance between points on the likelihood, but it
doesn’t change the <em>relative</em> distance between the points. That’s why we take
the <em>relative distance</em> or the <em>ratio</em> of the heights on the likelihood
function rather than just taking the absolute distance. This means scaling
doesn’t matter.</p>
<p>More importantly, however, what this demonstrates is that when we do inference
with <strong>likelihoods</strong> instead of <strong>sampling distributions</strong>, things like
stopping rules, data that wasn’t collected but might have been collected, and
all those other sorts of things that were tricky about <em>p</em>-values don’t come in
to play. We only have the worry about <strong>the data we actually have</strong>, and the
<strong>likelihood</strong> which relates <strong>parameter values</strong> to <strong>data</strong>.</p>
<p>How do likelihood functions give us a notion of statistical evidence? One way
to understand statistical evidence is to compare how likely our data is when
<span class="math inline">\(Pr_{\mathrm{heads}}\)</span> = 0.6 and when <span class="math inline">\(Pr_{\mathrm{heads}}\)</span> = 0.8 by subtracting
the two likelihood values. But because likelihoods can be on different scales,
raw distances can be misleading. Instead, let us take the <strong>ratio</strong>. That way,
we can tell how many <strong>times</strong> bigger one value is relative to the other. That
is, are the two values the same size? Is one twice as big, three times bigger,
etc. By taking the ratio we can now answer the question, “how many times more
likely is our observation when <span class="math inline">\(Pr_{\mathrm{heads}}\)</span> = 0.6 relative to when
<span class="math inline">\(Pr_{\mathrm{heads}}\)</span> = 0.8?” We can read this as the support our data gives to
these two hypotheses.</p>
<p>The first set of plots looked very different. This difference is mainly in
terms of the relative frequency of results that <strong>we didn’t observe</strong>. The
relative frequency of the results <strong>we did observe</strong> is actually very similar.
In the plots above they may not look that similar, but they are in fact just
scaled versions of each other. We can scale them so that they match. In the
scaled versions below, each plot is just scaled so that the peak is at 1.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>The plots describe the relative frequency of observing <strong>our result</strong> given
different values of the coin bias. They both show that our observation (8 heads
in 10 flips) would be the most frequent observation if the coin was in fact
biased to show 8 heads in 10 flips. We can call these plots <strong>likelihood
functions</strong> and we can call the value of the bias that corresponds to the peak
of the likelihood function the <strong>maximum likelihood estimate</strong>.</p>
<p>Before we go further, it is worthwhile to pay attention to the key difference
between these plots and the plots we’ve drawn up until now. In all our previous
plots we plotted the <strong>data</strong> you would expect for a <strong>given value</strong> of a
parameter (e.g., the coin bias, or where the treasuring hunting device arrow
points when not around treasure). These plots show something very different.
They show <strong>relative frequency of our observation</strong> for <strong>different parameter
values</strong>. Put another way: In the first set of plots, we fix our parameter
value while the data varies. In the second set of plots, we fix our data while
the parameter varies. Or put yet another way: The first set of plots allows us
to make inferences about <strong>data</strong>—is our data surprising on the assumption
that the parameter has a specific value. The second set of plots will allow us
to make inferences about <strong>parameters</strong>—what is the most likely value of the
parameter given our specific data.</p>
</div>
</div>
<div id="some-features-of-likelihoods" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Some features of likelihoods</h2>
<p>Before we move to talk about how to use likelihoods in a notion of statistical
evidence, it’s worth noting a couple of things about likelihoods. First,
likelihoods are <strong>not</strong> probability distributions. This much should already be
obvious by looking at the two unscaled likelihoods above. Probability
distributions have an area under the curve of 1. That is, probability
distributions describe the probability of events where the probability of every
possible event is given (and where at least one of the events <strong>must</strong> occur).
Summing these values gives the probability of <strong>an event</strong> (any event)
occurring. This value is 1. And in fact, it’s given by our definition because
our definition said that one of the events <strong>must occur</strong>. Our two likelihood
functions do not <strong>necessarily</strong> have an area underneath equal to 1. For our
two likelihoods from the coin flipping example, this is clear. Both can’t have
an area equal to 1 because they both obviously have different areas. Instead,
what the likelihood describes is the probability of a <strong>specific event</strong>
occurring over the range of possible parameter values. Of course, probability
and likelihood are related concepts. One is just in the inverse of the other,
which is why likelihood is sometimes called “inverse probability”.</p>
<p>Below we see some examples of how the area under the curve can vary.</p>
<p><img src="03-likelihoods_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>It is also worth noting that in addition to having a peak at a certain point,
likelihood functions also have a spread. We’ll be talking about this spread, or
variance, at a later point.</p>
<p>Let’s do this our observation and the likelihoods for the two versions of the
coin-flipping example. Again, I won’t rely on simulations (although I could).
Instead, I know that the two likelihoods are drawn from a <strong>binomial</strong> and a
<strong>negative binomial</strong> distribution, respectively, so I’ll just generate the
values.</p>
<p>First, for version 1, the <strong>binomial</strong> sampling rule.</p>
<p>The likelihood for <span class="math inline">\(\mathcal{H}_1\)</span> (<span class="math inline">\(Pr_{heads}\)</span> = 0.6) is 0.12</p>
<p>The likelihood for <span class="math inline">\(\mathcal{H}_2\)</span> (<span class="math inline">\(Pr_{heads}\)</span> = 0.8) is 0.3</p>
<p>The likelihood ratio is 0.4</p>
<p>The data are 0.4 times more probable under <span class="math inline">\(\mathcal{H}_1\)</span> than <span class="math inline">\(\mathcal{H}_2\)</span></p>
<p>Second, for version 1, the <strong>negative-binomial</strong> sampling rule.</p>
<p>The likelihood for <span class="math inline">\(\mathcal{H}_1\)</span> (<span class="math inline">\(Pr_{heads}\)</span> = 0.6) is 0.1</p>
<p>The likelihood for <span class="math inline">\(\mathcal{H}_2\)</span> (<span class="math inline">\(Pr_{heads}\)</span> = 0.8) is 0.24</p>
<p>The likelihood ratio is 0.4</p>
<p>The data are 0.4 times more probable under <span class="math inline">\(\mathcal{H}_1\)</span> than <span class="math inline">\(\mathcal{H}_2\)</span></p>
<p>One thing you’ll notice is that regardless of the experiment type (flipping 10
times or flipping until 2 tails) the support for one hypothesis over the other
is the same. This shouldn’t be surprising, because what lead to different
inferences under the frequentist analysis was data that could’ve occurred but
didn’t. Since we’re now only interested in the actual event that happened,
these possible, but not actual, events don’t come in to play.</p>
</div>
<div id="testing-more-complex-hypotheses" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Testing more complex hypotheses</h2>
<!-- 

From here we'll take bits from the paper

So comparing likelihoods (by taking their ratio) can tell us which hypothesis
is better supported by the data. However, there's a couple of problems with
this. First, how do we know when we have enough evidence? To answer this
question, we're going to have to take into account a lot of additional factors.
And the answer to this question is probably going to be context-dependent. For
example, if we're placing bets on hypotheses, we're probably going to want to
take into account the relative pay-offs. If we're using evidence to decide
somebody's guilt in a court case, we're probably going to want to take into
account things like "reasonable doubt". In short, there's not a straight
forward answer to this question, so we'll set it aside for now. Instead, we'll
turn to the second problem. 

The second problem with this method is that it only works for comparing two
hypotheses. We can can say, for example, whether the data supports
$Pr_{\mathrm{heads}}$ = 0.5 over the hypothesis $Pr_{\mathrm{heads}}$ = 0.8,
and we can quantify this level of support. But usually, we are not comparing
two simple hypotheses like this. Our hypotheses take a more complex form like:
"Is the coin fair?"

How might we go about answering this question?

Let's formalise this idea a bit. First, we'll drop the terminology
*hypothesis*, and replace it with *model* (denoted $\mathcal{M}_H$. And we'll
say that our data favours $\mathcal{M_1}$ over $\mathcal{M_2}$ by a factor of
$\frac{\mathcal{M}_1}{\mathcal{M}_2}$. And second, we'll say that the value of
$\mathcal{M}_H$ is going to be the average likelihood of all the $n$
sub-hypotheses ($\Theta=\left \{ \theta_1, \theta_2,\ldots\theta_n\right \}$)
that make up $\mathcal{H}_M$. Or, 

$$\mathcal{M}_H = \sum_{i=1}^{n}\mathcal{L}_H(\theta_i|\mathbf{y})\cdot{}\frac{1}{n}$$   
 
From this, we can build a model of a fair coin, which might only have one
sub-hypothesis (i.e., $\theta$ = 0.5). And we might want to compare that to a
model that says the coin can can have a bias that takes any values from
$\frac{0}{10}$ to $\frac{10}{10}$ (i.e., $\theta =
\{\frac{0}{10},\frac{1}{10},\frac{2}{10},\frac{3}{10},\frac{4}{10},\frac{5}{10},\frac{6}{10},\frac{7}{10},\frac{8}{10},\frac{9}{10},\frac{10}{10}\}$).

Let's try to do that. We don't need to do it for both versions any more. We can
just do it for one of the versions because now we know that they're same!
 



### Are all sub-hypotheses equal?
 
Now that we have a way to compare two models that might be composed of one or
more sub-hypotheses, we might reasonably ask, "are all sub-hypotheses equal?".
That is, do we want to just take a regular average over all the sub-hypotheses
or might we instead want to take a *weighted* average? 
  
One good reason for taking a *weighted average* is that it allows us to take
into account our views about what it *means* for a coin to be biassed or
unfair. For example, we might think that if coins are biassed, then they're
much more likely to show heads. Or we might think that if a coin is biased, it
is much less likely to show heads. Or maybe biased coins are only slightly more
likely to show a preponderance of heads or tails. We can capture this view by
weighting some sub-hypothesis more than others before taking our average.
  
In fact, in our first calculation, we did apply a weighting, but it was hidden.
But we can make it explicit. For $\mathcal{M}_0$ we can give the sub-hypothesis
$\theta$ = 0.5 a weight of 1, and all others possible sub-hypotheses a weight
of 0. For $\mathcal{M}_1$, we can give each of the $n$ sub-hypotheses a weight
of $\frac{1}{n}$. Ideally, we want all the weights to sum to 1. This way, we
can think of the weights as a probability distribution. 
  
Usually these weights, or the weighting distribution, is refereed to as a
**prior** (or occasionally as the *model of the hypothesis*). We can make these
weights explicit by adding them in to our equation for $\mathcal{M}_H$. Our
equation now becomes:
 
$$\mathcal{M}_H = \sum_{i=1}^{n}\mathcal{L}_H(\theta_i|\mathbf{y})\cdot{}p(\theta_i)$$   
 
Let's explicitly adds the weights that were only implicit before. We'll see
that adding these weights scales down both our likelihood values, but it
produces the ratio and hence the same result.



Now that we're adding in these *weighting* **priors**, the ratio of
$\frac{\mathcal{M}_1}{\mathcal{M}_2}$ is usually called a **Bayes factor**.
Once we make these weightings explicit by adding a *prior* we can see the that
for a **particular observation** or set of data, the ratio, or **Bayes factor**
is *completely* dependent on our choice of the *prior* for $\mathcal{M}_0$
and $\mathcal{M}_1$. This is why it sometimes makes more sense to think of
*priors* as **models of hypotheses**. And our **Bayes factor** tells us which
**model** is better supported by the data. 

We can see this dependence in the example below. In each of the four quadrants,
I've held the Data ($\mathbf{y}$) and model that represents the fair coin
($\mathcal{M}_0$) constant. However, I've simply varied $\mathcal{M}_1$. Each
one of these $\mathcal{M}_1$'s presents different views of what **it means for
a coin to be unfair**. Each plot shows the distribution of weightings and the
resulting **Bayes factor**. As you can see, when the prior changes the **Bayes
factor** changes.



This fact shouldn't be alarming. A **Bayes factor** is going to tell you
whether your data provide evidence for *one model* over *another model*. Change
the models, and your data will say something different. This also highlights
that the two hypotheses/models **always** have to be specified. There's no such
thing as **the null** hypothesis or **the alternative** hypothesis—only the two
that have been specified. 

Because **Bayes factors** are dependent on **priors**, it pays to think
carefully about them. There are many schools of thought about how one should go
about formulating priors. Some of these might include:

1. Choosing priors that reflect our *genuine beliefs about the state of the
   world*. For example, our beliefs about **what it means** for a coin to be
   unfair. 

2. Choosing priors that reflect our ignorance about the state of the world. For
   example, our belief that we have no grounds for favouring one parameter
   value (sub-hypothesis) over another. We might view this as giving the data
   the best opportunity to speak for itself. 

3. Choosing priors that have specific (or useful) mathematical properties. 

4. Choosing priors that have been tuned such that our **Bayes factor** tests
   will have good *frequentist* properties—for example, that they produce BFs
   that is some sense *line up* with *p*-values 

This, again,  is not meant to be an exhaustive list. People might have other
reasons for choosing the priors they do. And some prior choice might have
multiple motivations. But this rough categorisation will do for our purposes.
In the next section, we'll examine some of these strategies so that we can
understand their implications. And we'll also try our hand at calculating Bayes
factors for some data of the sort we get in psychology experiments (rather than
silly coin flips!). But before we get to that, let's cover something that we
haven't covered yet—**Bayes Rule**.

-->
<p>To answer this question, we’ll set our parameter <span class="math inline">\(\theta\)</span> to the values between
0 and 1. For each setting, we’ll simulate a bunch of experiments, and then
we’ll ask, “how often did our <strong>exact</strong> result (8 heads in 10 flips) occur with
that setting of <span class="math inline">\(\theta\)</span>?” We’ll also do it twice. In one version, we will flip
the coin 10 times. In the other version, we’ll carry on flipping until we get
two tails. I’m also going to cheat slightly. I’m not actually going to simulate
the results.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="criticisms-of-p-values.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bayes-rule.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
